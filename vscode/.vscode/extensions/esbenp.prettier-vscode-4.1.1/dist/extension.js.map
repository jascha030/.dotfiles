{"version":3,"sources":["../webpack/bootstrap",".././node_modules/diagnostic-channel/dist/src/channel.js",".././node_modules/applicationinsights/out/Library/Logging.js",".././node_modules/semver/classes/semver.js","../external \"path\"",".././node_modules/applicationinsights/out/Declarations/Contracts/index.js","../external \"vscode\"","../external \"fs\"",".././node_modules/applicationinsights/out/Library/Util.js",".././node_modules/semver/classes/range.js",".././node_modules/semver/functions/compare.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","../external \"os\"","../external \"util\"",".././node_modules/applicationinsights/out/Library/CorrelationIdManager.js",".././node_modules/semver/internal/re.js",".././node_modules/semver/functions/parse.js",".././node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js",".././node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","../external \"http\"","../external \"child_process\"",".././node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","../external \"https\"","../external \"url\"","../external \"prettier\"",".././src/util.ts",".././node_modules/semver/internal/constants.js",".././node_modules/semver/internal/debug.js",".././node_modules/semver/functions/gt.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","../external \"assert\"",".././node_modules/emitter-listener/listener.js",".././node_modules/shimmer/index.js",".././node_modules/applicationinsights/out/AutoCollection/Performance.js",".././node_modules/applicationinsights/out/Declarations/Constants.js",".././node_modules/applicationinsights/out/Library/Config.js",".././node_modules/applicationinsights/out/Library/Context.js",".././node_modules/resolve/lib/is-core.js",".././node_modules/semver/internal/identifiers.js",".././node_modules/semver/functions/eq.js",".././node_modules/semver/functions/compare-build.js",".././node_modules/semver/functions/lt.js",".././node_modules/semver/functions/gte.js",".././node_modules/semver/functions/lte.js",".././node_modules/semver/classes/comparator.js",".././node_modules/semver/ranges/outside.js",".././src/message.ts",".././node_modules/diagnostic-channel/dist/src/patchRequire.js","../external \"module\"","../external \"timers\"",".././node_modules/stack-chain/index.js","../external \"zlib\"",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js",".././node_modules/applicationinsights/out/AutoCollection/RequestParser.js",".././node_modules/applicationinsights/out/Library/Traceparent.js",".././node_modules/applicationinsights/out/AutoCollection/HttpRequests.js",".././node_modules/resolve/lib/caller.js",".././node_modules/resolve/lib/node-modules-paths.js",".././node_modules/resolve/lib/normalize-options.js",".././node_modules/resolve/lib/core.js",".././node_modules/semver/functions/neq.js",".././node_modules/semver/functions/cmp.js",".././node_modules/semver/functions/satisfies.js",".././src/StatusBarService.ts",".././src/extension.ts",".././node_modules/vscode-extension-telemetry/lib/telemetryReporter.js",".././node_modules/applicationinsights/out/applicationinsights.js",".././node_modules/diagnostic-channel-publishers/dist/src/index.js",".././node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js",".././node_modules/diagnostic-channel/node_modules/semver/semver.js",".././node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","../external \"stream\"","../external \"console\"",".././node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Connection$",".././node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Pool$",".././node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","../external \"events\"",".././node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js",".././node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js",".././node_modules/cls-hooked/index.js",".././node_modules/cls-hooked/node_modules/semver/semver.js",".././node_modules/cls-hooked/context.js","../external \"async_hooks\"",".././node_modules/cls-hooked/context-legacy.js",".././node_modules/async-hook-jl/index.js",".././node_modules/async-hook-jl/async-hook.js",".././node_modules/async-hook-jl/patches/next-tick.js",".././node_modules/async-hook-jl/patches/promise.js",".././node_modules/async-hook-jl/patches/timers.js",".././node_modules/stack-chain/stack-chain.js",".././node_modules/stack-chain/format.js",".././node_modules/continuation-local-storage/context.js",".././node_modules/async-listener/index.js",".././node_modules/async-listener/node_modules/semver/semver.js",".././node_modules/async-listener/glue.js","../external \"net\"","../external \"dns\"","../external \"crypto\"",".././node_modules/async-listener/es6-wrapped-promise.js",".././node_modules/applicationinsights/out/AutoCollection/Console.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Constants.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js",".././node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js",".././node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js",".././node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js",".././node_modules/applicationinsights/out/AutoCollection/Exceptions.js","../external \"constants\"",".././node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js",".././node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js",".././node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js",".././node_modules/applicationinsights/out/Library/Tracestate.js",".././node_modules/applicationinsights/out/Library/QuickPulseStateManager.js",".././node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js",".././node_modules/applicationinsights/out/Library/QuickPulseSender.js",".././node_modules/applicationinsights/out/AutoCollection/NativePerformance.js","../external \"applicationinsights-native-metrics\"",".././node_modules/applicationinsights/out/Library/NodeClient.js",".././node_modules/applicationinsights/out/Library/TelemetryClient.js",".././node_modules/applicationinsights/out/Library/Channel.js",".././node_modules/applicationinsights/out/TelemetryProcessors/index.js",".././node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js",".././node_modules/applicationinsights/out/TelemetryProcessors/QuickPulseTelemetryProcessor.js",".././node_modules/applicationinsights/out/Library/Sender.js",".././node_modules/applicationinsights/out/Library/EnvelopeFactory.js",".././src/commands.ts",".././src/ConfigResolver.ts",".././src/IgnorerResolver.ts",".././src/LanguageResolver.ts",".././src/LoggingService.ts",".././src/ModuleResolver.ts",".././node_modules/find-up/index.js",".././node_modules/locate-path/index.js",".././node_modules/p-locate/index.js",".././node_modules/p-limit/index.js",".././node_modules/p-try/index.js",".././node_modules/path-exists/index.js",".././node_modules/mem/index.js",".././node_modules/mem/node_modules/mimic-fn/index.js",".././node_modules/map-age-cleaner/dist/index.js",".././node_modules/p-defer/index.js",".././node_modules/resolve/index.js",".././node_modules/resolve/lib/async.js",".././node_modules/path-parse/index.js",".././node_modules/resolve/lib/sync.js",".././node_modules/semver/index.js",".././node_modules/semver/functions/valid.js",".././node_modules/semver/functions/clean.js",".././node_modules/semver/functions/inc.js",".././node_modules/semver/functions/diff.js",".././node_modules/semver/functions/major.js",".././node_modules/semver/functions/minor.js",".././node_modules/semver/functions/patch.js",".././node_modules/semver/functions/prerelease.js",".././node_modules/semver/functions/rcompare.js",".././node_modules/semver/functions/compare-loose.js",".././node_modules/semver/functions/sort.js",".././node_modules/semver/functions/rsort.js",".././node_modules/semver/functions/coerce.js",".././node_modules/semver/ranges/to-comparators.js",".././node_modules/semver/ranges/max-satisfying.js",".././node_modules/semver/ranges/min-satisfying.js",".././node_modules/semver/ranges/min-version.js",".././node_modules/semver/ranges/valid.js",".././node_modules/semver/ranges/gtr.js",".././node_modules/semver/ranges/ltr.js",".././node_modules/semver/ranges/intersects.js",".././src/Files.ts",".././src/NotificationService.ts",".././src/PrettierEditService.ts",".././src/PrettierEditProvider.ts",".././src/TemplateService.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","this","version","subscribers","contextPreservationFunction","cb","knownPatches","currentlyPublishing","shouldPublish","listeners","some","_a","filter","publish","event","standardEvent_1","timestamp","Date","now","data","forEach","listener","e","subscribe","push","unsubscribe","index","length","splice","reset","_this","getOwnPropertyNames","prop","bindToContext","addContextPreservation","preserver","previousPreservationStack","registerMonkeyPatch","packageName","patcher","getPatchesObject","global","diagnosticsSource","require","channel","Logging","info","message","optionalParams","_i","arguments","enableDebug","console","TAG","warn","disableWarnings","debug","MAX_LENGTH","MAX_SAFE_INTEGER","re","compareIdentifiers","SemVer","options","loose","includePrerelease","TypeError","trim","match","LOOSE","FULL","raw","major","minor","patch","prerelease","split","map","id","test","num","build","format","join","other","compareMain","comparePre","a","b","undefined","release","identifier","inc","isNaN","Error","__export","__assign","assign","http","https","url","constants","RequestResponseHeaders","Util","getCookie","cookie","cookieName","cookies","indexOf","substring","str","replace","int32ArrayToBase64","array","toChar","v","String","fromCharCode","x","Buffer","from","toString","substr","random32","Math","random","randomu32","w3cTraceId","tmp","hexValues","oct","clockSequenceHi","isValidW3CId","isArray","obj","isError","isPrimitive","input","propType","isDate","msToTimeSpan","totalms","sec","toFixed","min","floor","hour","days","extractError","err","looseError","code","extractObject","origProperty","toJSON","validateStringMap","field","stringTarget","JSON","stringify","constructor","MAX_PROPERTY_LENGTH","canIncludeCorrelationHeader","client","requestUrl","excludedDomains","config","correlationHeaderExcludedDomains","RegExp","parse","hostname","getCorrelationContextTarget","response","contextHeaders","headers","requestContextHeader","keyValues","keyValue","makeRequest","requestOptions","requestCallback","requestUrlParsed","host","port","path","pathname","proxyUrl","protocol","proxyHttpsUrl","proxyHttpUrl","proxyUrlParsed","Host","isHttps","httpsAgent","agent","httpAgent","tlsRestrictedAgent","request","safeIncludeCorrelationHeader","correlationHeader","header","Array","addCorrelationIdHeaderFromString","setHeader","requestContextSourceKey","correlationId","components","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","Range","range","Comparator","set","parseRange","comps","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","compRe","COMPARATORLOOSE","COMPARATOR","comp","parseComparator","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","intersects","er","testSet","comparators","result","remainingComparators","slice","testComparator","pop","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","toLowerCase","replaceTilde","TILDELOOSE","TILDE","_","M","pr","ret","replaceCaret","CARETLOOSE","CARET","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","semver","ANY","allowed","compare","Domain","CorrelationIdManager","queryCorrelationId","callback","appIdUrlString","profileQueryEndpoint","instrumentationKey","completedLookups","pendingLookups","fetchAppId","method","disableAppInsightsAutoCollection","req","res","statusCode","appId_1","setEncoding","on","correlationIdPrefix","setTimeout","correlationIdRetryIntervalMs","error","end","cancelCorrelationIdQuery","generateRequestId","parentId","suffix","currentRootId","appendSuffix","generateRootId","getRootId","endIndex","startIndex","delimiter","requestIdMaxLength","trimPosition","w3cEnabled","MAX_SAFE_COMPONENT_LENGTH","src","R","createToken","isGlobal","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCE","LONETILDE","LONECARET","DiagChannel","CorrelationContextManager","getCurrentContext","enabled","context","session","CONTEXT_NAME","generateContextObject","operationId","operationName","correlationContextHeader","traceparent","tracestate","operation","customProperties","CustomPropertiesImpl","runWithContext","fn","wrapEmitter","emitter","bindEmitter","wrapCallback","enable","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","disable","nodeVer","process","versions","node","parseInt","canUseClsHooked","greater800","less820","greater470","props","addHeaderData","keyvals","keyval","parts","concat","serializeToHeader","getProperty","setProperty","val","bannedCharacters","requestContextTargetKey","requestIdHeader","parentIdHeader","rootIdHeader","traceparentHeader","traceStateHeader","HttpDependencyParser","CorrelationContextManager_1","Traceparent","AutoCollectHttpDependencies","INSTANCE","_client","isEnabled","_isEnabled","_isInitialized","_initialize","IsInitialized","isInitialized","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","apply","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","isValidTraceId","traceId","updateSpanId","getBackCompatRequestId","requestNumber","getUrl","getHeader","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","onError","dispose","filePath","pathToResolve","platform","os","homedir","workspace","workspaceFolders","folder","getWorkspaceFolder","Uri","file","isAbsolute","uri","fsPath","getConfiguration","Number","SEMVER_SPEC_VERSION","env","NODE_DEBUG","args","publishers","unpatchedModules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","shimmer","wrap","unwrap","SYMBOL","propertyIsEnumerable","configurable","writable","_listeners","self","_events","_findAndProcess","before","unprocessed","_process","_wrap","unwrapped","visit","wrapped","onAddListener","onEmit","addListener","removeListener","emit","adding","existing","returned","__wrapped","remover","isFunction","funktion","logger","nodule","wrapper","stack","original","__unwrap","massWrap","nodules","names","massUnwrap","Constants","AutoCollectPerformance","collectionInterval","enableLiveMetricsCounters","_collectionInterval","_enableLiveMetricsCounters","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","_lastDependencies","totalDependencyCount","_totalDependencyCount","totalFailedDependencyCount","_totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","setInterval","trackPerformance","unref","clearInterval","countRequest","start","once","_intervalRequestExecutionTime","_lastRequestExecutionTime","countException","countDependency","duration","success","durationMs","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","trackMetric","PerformanceCounter","PROCESSOR_TIME","PROCESS_TIME","freeMem","freemem","usedMem","memoryUsage","rss","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","QuickPulseCounter","COMMITTED_BYTES","lastRequests","requests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","REQUEST_RATE","REQUEST_DURATION","REQUEST_FAILURE_RATE","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","EXCEPTION_RATE","_lastDependencyExecutionTime","PerformanceToQuickPulseCounter","QuickPulseDocumentType","Event","Exception","Trace","Metric","Request","Dependency","QuickPulseType","TelemetryTypeStringToQuickPulseType","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","TelemetryTypeStringToQuickPulseDocumentType","Config","endpointBase","_getInstrumentationKey","endpointUrl","maxBatchSize","maxBatchIntervalMs","disableAppInsights","samplingPercentage","setCorrelationId","ENV_profileQueryEndpoint","ENV_http_proxy","ENV_https_proxy","_quickPulseHost","ENV_quickPulseHost","_profileQueryEndpoint","endpoint","iKey","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","ENV_nativeMetricsDisablers","ENV_nativeMetricsDisableAll","fs","Contracts","Context","packageJsonPath","keys","ContextTagKeys","tags","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","resolve","__dirname","appVersion","packageJson","readFileSync","exception","applicationVersion","deviceId","cloudRoleInstance","deviceOSVersion","type","cloudRole","DefaultRoleName","arch","sdkVersion","internalSdkVersion","core","numeric","anum","bnum","rcompareIdentifiers","versionA","versionB","compareBuild","operator","cmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","satisfies","gt","lt","lte","gte","hilo","gtfn","ltefn","ltfn","ecomp","high","low","comparator","OUTDATED_PRETTIER_VERSION_MESSAGE","VIEW_LOGS_ACTION_TEXT","FAILED_TO_LOAD_MODULE_MESSAGE","INVALID_PRETTIER_CONFIG","moduleModule","nativeModules","binding","originalRequire","patchedModules","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","versionSpecifier","_stackChain","AvailabilityData","Base","Data","DataPoint","DataPointType","Envelope","ExceptionDetails","PageViewData","SeverityLevel","StackFrame","extendStatics","__extends","setPrototypeOf","__proto__","__","_super","ver","properties","measurements","RequestParser","startTime","_setStatus","status","endTime","_isSuccess","traceFlag","DEFAULT_TRACE_FLAG","DEFAULT_VERSION","spanId","traceparentArr","len","isValidSpanId","legacyRootId","lastIndexOf","HttpRequestParser","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","getOperationId","getRequestId","getOperationName","getCorrelationContextHeader","getTraceparent","getTracestate","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","server","originalAddListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","getOperationParentId","headersSent","ellapsedMilliseconds","requestTelemetry","getRequestTelemetry","tagOverrides","getRequestTags","getLegacyRootId","origPrepareStackTrace","prepareStackTrace","getFileName","getNodeModulesDirs","absoluteStart","prefix","paths","parsed","dir","reduce","dirs","aPath","moduleDir","opts","moduleDirectory","current","specifierIncluded","specifier","op","versionParts","cur","matchesRange","specifiers","versionIncluded","specifierValue","eq","neq","FormattingResult","languageResolver","loggingService","statusBarItem","window","createStatusBarItem","StatusBarAlignment","Right","text","command","toggleStatusBarItem","activeTextEditor","onDidChangeActiveTextEditor","editor","show","part","document","scheme","setOutputLevel","isUntitled","fileName","score","languages","allEnabledLanguages","disabledLanguages","getConfig","disableLanguages","includes","languageId","hide","reporter","hrStart","LoggingService","logInfo","templateService","TemplateService","createConfigFileFunc","createConfigFile","createConfigFileCommand","commands","registerCommand","openOutputCommand","ignoreResolver","IgnorerResolver","configResolver","ConfigResolver","notificationService","NotificationService","moduleResolver","ModuleResolver","LanguageResolver","statusBarService","StatusBarService","editService","registerFormatter","subscriptions","registerDisposables","hrEnd","sendTelemetryEvent","activationTime","vscode","appInsights","TelemetryReporter","extensionId","extensionVersion","userOptIn","logFilePath","logStream","createWriteStream","flags","encoding","autoClose","updateUserOptIn","configListener","onDidChangeConfiguration","TELEMETRY_CONFIG_ID","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","defaultClient","appInsightsClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","commonProperties","getCommonProperties","userId","machineId","sessionId","eventName","trackEvent","write","sendTelemetryException","trackException","flushEventsToLogger","Promise","flushEventsToAI","flush","all","default","DistributedTracingModes","AutoCollectConsole","AutoCollectExceptions","QuickPulseClient","NativePerformance_1","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_nativePerformance","_serverRequests","_clientRequests","_performanceLiveMetrics","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","liveMetricsClient","Configuration","AutoCollectNativePerformance","getCorrelationContext","wrapWithCorrelationContext","setDistributedTracingMode","AI_AND_W3C","collectConsoleLog","collectExtendedMetrics","extendedMetricsConfig","parseEnabled","disabledMetrics","useAsyncHooks","resendInterval","maxBytesOnDisk","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","addCollector","quickPulseClient","consolePub","diagnostic_channel_1","originalBunyan","originalEmit","_emit","rec","noemit","level","unshift","log","valid","clean","diff","version1","version2","v1","v2","defaultResult","compareLoose","rcompare","sort","list","rsort","outside","rangeTmp","toComparators","maxSatisfying","max","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","r1","r2","coerce","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","chunk","stderr","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","mongoCore","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","next","eventMap","requestId","startedData","succeeded","mongo3","contextMap","mongo330","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","patchClassMemberFunction","classObject","connectionClass","dirname","hrDuration","query","callbackArgs","poolClass","webpackEmptyContext","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","values","queryResult","database","connectionParameters","patchCallback","trackingCallback","rowCount","ceil","EventEmitter","preparable","plan","postgres7","callbackProvided","then","_Promise","reject","catch","originalRedis","originalSend","RedisClient","internal_send_command","commandObj","cb_1","pubsubBound","address_1","address","startTime_1","__rest","getOwnPropertySymbols","winston3","originalWinston","AppInsightsTransport","meta","splat","levelKind","npm","levels","syslog","mapLevelToKind","Transport","patchedConfigure","lastLevel","add","origCreate","createLogger","origConfigure","configure","origRootConfigure","winston2","curLevels","originalLog","Logger","loggingFilter","filters","f","util","assert","async_hooks","DEBUG_CLS_HOOKED","currentUid","Namespace","active","_set","_contexts","Map","_indent","getNamespace","namespaces","destroyNamespace","namespace","ok","inspect","debug2","_rawDebug","createHook","asyncId","triggerId","resource","executionAsyncId","indentStr","repeat","showHidden","depth","colors","triggerAsyncId","triggerIdContext","enter","exit","delete","ERROR_SYMBOL","asyncHooksCurrentId","currentId","createContext","_ns_name","run","runAndReturn","runPromise","promise","thisSymbol","unwrappedContexts","thunk","fromException","asyncHook","invertedProviders","providers","msg","DEBUG","getFunctionName","addHooks","uid","handle","provider","parentUid","parentHandle","_state","stackChain","modifier","_modifiers","deattach","AsyncHook","_asyncHook","attach","frames","callSite","filename","asyncWrap","TIMERWRAP","Providers","patchs","ignoreUIDs","Set","State","counter","Hooks","initFns","preFns","postFns","destroyFns","init","hook","pre","has","post","didThrow","destroy","removeElement","item","_hooks","setupHooks","hooks","remove","removeHooks","NextTickWrap","state","oldNextTick","nextTick","listenerCount","PromiseWrap","oldThen","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","onRejected","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","setImmediate","clearTimeout","clearImmediate","defaultFormater","extend","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","captureStackTrace","callSites","_modify","chain","_formater","_previous","formater","restore","_backup","_roolback","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","getOwnPropertyDescriptor","mutated","lines","ee","FormatErrorString","line","frame","removeAsyncListener","addAsyncListener","contexts","storage","after","v6plus","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","socket","onread","onconnection","patchOnRead","ctx","_originalOnread","_normalizeArgs","arg0","_normalizeConnectArgs","Socket","onSocket","childProcess","wrapChildProcess","child","stdio","activatorFirst","onexit","ChildProcess","_fatalException","_originalNextTick","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","zlib","crypto","lchown","lchmod","ftruncate","Deflate","proto","getPrototypeOf","_transform","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","executor","ensureAslWrapper","inherits","wrapThen","overwrite","__asl_wrapper","propagateAslWrapper","nextResult","returnVal","errorVal","aslWrapper","last","wrapPromise","asyncCatcher","inAsyncTick","listenerStack","union","dest","added","destLength","addedLength","j","missing","errorValues","inErrorTick","handled","errorThrew","threw","AsyncListener","callbacks","createAsyncListener","registered","simpleWrap","super","_methodNames","Contracts_1","clients","subscriber","trackTrace","severity","Warning","Information","Generated_1","RemoteDependencyDataConstants","TYPE_HTTP","TYPE_AI","domainSupportsProperties","domain","deviceLocale","deviceModel","deviceOEMName","deviceType","locationIp","operationParentId","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","userAuthUserId","internalAgentVersion","internalNodeName","kind","Measurement","sampleRate","hasFullStack","parsedStack","metrics","TelemetryType","telemetryTypeToBaseType","baseTypeToTelemetryType","baseType","TelemetryTypeString","bunyanToAILevelMap","10","Verbose","20","30","40","50","60","Critical","AIlevel","winstonToAILevelMap","og","emerg","alert","crit","warning","notice","verbose","silly","unknown","_exceptionListenerHandle","reThrow","isAppCrashing","_rejectionListenerHandle","UNCAUGHT_EXCEPTION_HANDLER_NAME","UNHANDLED_REJECTION_HANDLER_NAME","_getUrlFromRequestOptions","baseTelemetry","dependencyId","urlObject","search","hash","dependencyName","toUpperCase","remoteDependencyType","remoteDependencyTarget","resultCode","dependencyTypeName","target","originalOptions_1","parsedQuery","dbName","databaseName","commandName","queryObj","sqlString","sql","connectionConfig","_connection","socketPath","q","conn","Tracestate","_getAbsoluteUrl","socketRemoteAddress","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","source","sourceCorrelationId","newTags","_getIp","_getId","encrypted","pathName","ipMatch","check","results","exec","ip","rawHeaders","parseId","setBackCompatFromThisTraceContext","userAgent","tracestateHeader","legacy_parentId","legacy_rootId","cookieValue","cookieParts","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","Boolean","vendorValid","keydeduper","parts_1","pair","strict","QuickPulseEnvelopeFactory","QuickPulseSender","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","_sender","collector","_addMetric","addDocument","envelope","telemetryEnvelopeToQuickPulseDocument","_goQuickPulse","enableCollectors","count","Value","Weight","createQuickPulseMetric","Name","_resetQuickPulseBuffer","k","createQuickPulseEnvelope","_post","_ping","currentTimeout","POST_INTERVAL","PING_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","ping","_quickPulseDone","shouldPOST","StreamId","documents","machineName","instance","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","Version","MachineName","Instance","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","createQuickPulseDocument","baseData","severityLevel","Message","exceptionDetails","exceptionMessage","exceptionType","assembly","typeName","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","responseCode","OperationName","Target","ResultCode","CommandName","OperationId","DependencyTypeName","documentType","__type","DocumentType","Properties","aggregateProperties","meas","QuickPulseConfig","_config","_consecutiveErrors","done","_submitData","postOrPing","_b","payload","quickPulseHost","byteLength","shouldPOSTData","MAX_QPS_FAILURES_BEFORE_WARN","_disabledMetrics","_metricsAvailable","NativeMetricsEmitters","_emitter","_trackNativeMetrics","disableAll","individualOptOuts","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","name_1","stdDev","sqrt","sumSquares","pow","total","loop","getLoopData","loopUsage","heap","_c","heapUsed","heapTotal","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","Channel","TelemetryProcessors","Sender","EnvelopeFactory","_telemetryProcessors","sender","track","triggerSend","telemetryType","createEnvelope","toISOString","accepted","runTelemetryProcessors","samplingTelemetryProcessor","quickPulseTelemetryProcessor","send","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","setDiskRetryMode","_stringify","_timeoutHandle","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","getSamplingHashCode","charCodeAt","abs","child_process","onSuccess","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","existsSync","ICACLS_PATH","withCredentials","gzip","buffer","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","aclProc","spawn","windowsHide","signal","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdout","_getACLIdentitySync","_getACLArguments","directory","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","lstat","stats","mkdir","isDirectory","_getShallowDirectorySize","readdir","files","totalSize","stat","fileStats","isFile","size","_getShallowDirectorySizeSync","readdirSync","statSync","tmpdir","TEMPDIR_PREFIX","getTime","fileFullPath","writeFile","mkdirSync","dirSize","writeFileSync","tempDir","exists","basename","firstFile","readFile","unlink","systemdrive","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","getTags","trace","remoteDependency","parseStack","requestData","metric","Aggregation","totalSizeInBytes","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","acceptedLeft","acceptedRight","howMany","matches","baseSize","folderResult","showOpenDialog","canSelectFiles","canSelectFolders","canSelectMany","folderUri","writeConfigFile","parser","vsCodeConfig","resolveConfigOptions","rangeFormattingOptions","configOptions","resolveConfig","vsOpts","fallbackToVSCodeConfig","arrowParens","bracketSpacing","endOfLine","htmlWhitespaceSensitivity","insertPragma","jsxBracketSameLine","jsxSingleQuote","printWidth","proseWrap","quoteProps","requirePragma","semi","singleQuote","tabWidth","trailingComma","useTabs","vueIndentScriptAndStyle","filepath","prettier","absolutePath","getIgnorePathForFile","ignorePath","getWorkspaceRelativePath","ESLINT_SUPPORTED_LANGUAGES","STYLE_PARSERS","language","getSupportLanguages","find","lang","extensions","vscodeLanguageIds","parsers","enabledLanguages","getPrettierInstance","getSupportInfo","outputChannel","createOutputChannel","logLevel","logMessage","logObject","appendLine","title","toLocaleTimeString","globalPaths","cache","resolveGlobalNodePath","pnpm","execSync","yarn","resolveGlobalYarnPath","resolvedModules","findPkgMem","mem","findPkg","cacheKey","prettierPath","packageManager","resolveGlobalModules","moduleInstance","requireLocalPkg","globalModuleResult","requireGlobalPkg","showNotifications","getFileInfo","warnOutdatedPrettierVersion","logError","pkgName","clearConfigCache","loadNodeModule","resolveErrorMatches","showErrorMessage","resolvedGlobalPackageManagerPath","pm","globalPathGet","moduleName","splitPath","finalPath","nodeModulesIndex","resDir","findUp","sync","devDependencies","cwd","basedir","locatePath","pathExists","stop","async","root","runMatcher","locateOptions","foundPath","promisify","pLocate","fsStat","fsLStat","typeMappings","checkType","matchType","allowSymlinks","statFn","path_","lstatSync","pLimit","EndError","testElement","element","tester","finder","iterable","concurrency","Infinity","preserveOrder","limit","items","checkLimit","pTry","isInteger","queue","activeCount","shift","generator","enqueue","defineProperties","pendingCount","clearQueue","arguments_","pAccess","access","accessSync","mimicFn","mapAgeCleaner","cacheStore","WeakMap","firstArgument","maxAge","memoized","cacheItem","clear","copyProperty","ignoreNonConfigurable","toDescriptor","fromDescriptor","canCopyProperty","wrappedToString","withName","fromBody","toStringDescriptor","Function","toStringName","Reflect","ownKeys","fromPrototype","changePrototype","newToString","changeToString","__awaiter","thisArg","_arguments","P","fulfilled","step","rejected","__importDefault","p_defer_1","processingKey","processingTimer","processingDeferred","cleanup","setupTimer","delay","entry","originalSet","isCore","caller","nodeModulesPaths","normalizeOptions","defaultIsFile","isFIFO","defaultIsDir","maybeUnwrapSymlink","preserveSymlinks","realpath","realPathErr","realPath","packageIterator","parent","onfile","pkg","loadAsDirectory","realD","moduleError","loadAsFile","thePackage","loadAsFilePackage","load","exts","loadPackage","onpkg","loadpkg","unwrapErr","pkgdir","pkgfile","ex","body","jsonErr","packageFilter","pkg_","pathFilter","rfile","relative","rel","onex","loadAsDirectoryPackage","fpkg","package","main","mainError","realStart","getPackageCandidates","processDirs","isdir","ondir","loadNodeModules","realN","isWindows","splitDeviceRe","splitTailRe","win32","pathString","device","tail","result2","allParts","base","ext","splitPathRe","posix","realpathSync","loadAsFileSync","loadAsDirectorySync","loadNodeModulesSync","internalRe","tokens","hasPre","rtl","COERCERTL","lastIndex","tracer","npmCommand","shell","handler","yarnCommand","extraLines","PRETTIER_CONFIG_FILES","languageSelector","rangeLanguageSelector","selectors","editProvider","PrettierEditProvider","provideEdits","rangeFormatterHandler","registerDocumentRangeFormattingEditProvider","formatterHandler","registerDocumentFormattingEditProvider","allLanguages","allRangeLanguages","rangeSupportedLanguages","globalLanguageSelector","globalRangeLanguageSelector","untitledLanguageSelector","untitledRangeLanguageSelector","fileLanguageSelector","fileRangeLanguageSelector","getText","TextEdit","fullDocumentRange","packageWatcher","createFileSystemWatcher","onDidChange","onDidCreate","onDidDelete","configurationWatcher","affectsConfiguration","workspaceWatcher","onDidChangeWorkspaceFolders","prettierConfigWatcher","vscodeConfig","updateStatusBar","Ignore","hasConfig","checkHasPrettierConfig","requireConfig","getIgnorePath","prettierInstance","fileInfo","withNodeModules","ignored","inferredParser","logWarning","dynamicParsers","getParsersFromLanguageId","prettierOptions","getPrettierOptions","configPath","editorconfig","useEditorConfig","prettierTslintModule","getModuleInstance","safeExecution","prettierTslintFormat","fallbackPrettierOptions","doesLanguageSupportESLint","prettierEslintModule","doesParserSupportStylelint","prettierStylelintModule","prettierStylelint","defaultText","returnValue","lastLineId","lineCount","lineAt","token","rangeEnd","offsetAt","rangeStart","writeFileAsync","folderPath","settings","outputPath","formatterOptions","templateSource"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 68);\n","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\nvar Logging = (function () {\r\n    function Logging() {\r\n    }\r\n    Logging.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (Logging.enableDebug) {\r\n            console.info(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.warn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!Logging.disableWarnings) {\r\n            console.warn(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.enableDebug = false;\r\n    Logging.disableWarnings = false;\r\n    Logging.TAG = \"ApplicationInsights:\";\r\n    return Logging;\r\n}());\r\nmodule.exports = Logging;\r\n//# sourceMappingURL=Logging.js.map","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { re, t } = require('../internal/re')\n\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      }\n    }\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier)\n        this.inc('pre', identifier)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier)\n        }\n        this.inc('pre', identifier)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre':\n        if (this.prerelease.length === 0) {\n          this.prerelease = [0]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            this.prerelease.push(0)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          if (this.prerelease[0] === identifier) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = [identifier, 0]\n            }\n          } else {\n            this.prerelease = [identifier, 0]\n          }\n        }\n        break\n\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.format()\n    this.raw = this.version\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","module.exports = require(\"path\");","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./Constants\"));\r\n__export(require(\"./Generated\"));\r\n__export(require(\"./TelemetryTypes\"));\r\n//# sourceMappingURL=index.js.map","module.exports = require(\"vscode\");","module.exports = require(\"fs\");","\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar url = require(\"url\");\r\nvar constants = require(\"constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\r\nvar Util = (function () {\r\n    function Util() {\r\n    }\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    Util.getCookie = function (name, cookie) {\r\n        var value = \"\";\r\n        if (name && name.length && typeof cookie === \"string\") {\r\n            var cookieName = name + \"=\";\r\n            var cookies = cookie.split(\";\");\r\n            for (var i = 0; i < cookies.length; i++) {\r\n                var cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    Util.trim = function (str) {\r\n        if (typeof str === \"string\") {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    };\r\n    /**\r\n     * Convert an array of int32 to Base64 (no '==' at the end).\r\n     * MSB first.\r\n     */\r\n    Util.int32ArrayToBase64 = function (array) {\r\n        var toChar = function (v, i) {\r\n            return String.fromCharCode((v >> i) & 0xFF);\r\n        };\r\n        var int32AsString = function (v) {\r\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\r\n        };\r\n        var x = array.map(int32AsString).join(\"\");\r\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\r\n        var s = b.toString(\"base64\");\r\n        return s.substr(0, s.indexOf(\"=\"));\r\n    };\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    Util.random32 = function () {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    };\r\n    /**\r\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\r\n     */\r\n    Util.randomu32 = function () {\r\n        return Util.random32() + 0x80000000;\r\n    };\r\n    /**\r\n     * generate W3C-compatible trace id\r\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\r\n     */\r\n    Util.w3cTraceId = function () {\r\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        var oct = \"\", tmp;\r\n        for (var a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                    hexValues[tmp >> 4 & 0xF] +\r\n                    hexValues[tmp >> 8 & 0xF] +\r\n                    hexValues[tmp >> 12 & 0xF] +\r\n                    hexValues[tmp >> 16 & 0xF] +\r\n                    hexValues[tmp >> 20 & 0xF] +\r\n                    hexValues[tmp >> 24 & 0xF] +\r\n                    hexValues[tmp >> 28 & 0xF];\r\n        }\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    };\r\n    Util.isValidW3CId = function (id) {\r\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    Util.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    Util.isError = function (obj) {\r\n        return obj instanceof Error;\r\n    };\r\n    Util.isPrimitive = function (input) {\r\n        var propType = typeof input;\r\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    Util.isDate = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    };\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    Util.msToTimeSpan = function (totalms) {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\r\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n        var daysText = days > 0 ? days + \".\" : \"\";\r\n        return daysText + hour + \":\" + min + \":\" + sec;\r\n    };\r\n    /**\r\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\r\n     * Simplify a generic Node Error into a simpler map for customDimensions\r\n     * Custom errors can still implement toJSON to override this functionality\r\n     */\r\n    Util.extractError = function (err) {\r\n        // Error is often subclassed so may have code OR id properties:\r\n        // https://nodejs.org/api/errors.html#errors_error_code\r\n        var looseError = err;\r\n        return {\r\n            message: err.message,\r\n            code: looseError.code || looseError.id || \"\",\r\n        };\r\n    };\r\n    /**\r\n     * Manually call toJSON if available to pre-convert the value.\r\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\r\n     * This avoids double escaping of quotes for Date objects, for example.\r\n     */\r\n    Util.extractObject = function (origProperty) {\r\n        if (origProperty instanceof Error) {\r\n            return Util.extractError(origProperty);\r\n        }\r\n        if (typeof origProperty.toJSON === \"function\") {\r\n            return origProperty.toJSON();\r\n        }\r\n        return origProperty;\r\n    };\r\n    /**\r\n     * Validate that an object is of type { [key: string]: string }\r\n     */\r\n    Util.validateStringMap = function (obj) {\r\n        if (typeof obj !== \"object\") {\r\n            Logging.info(\"Invalid properties dropped from payload\");\r\n            return;\r\n        }\r\n        var map = {};\r\n        for (var field in obj) {\r\n            var property = '';\r\n            var origProperty = obj[field];\r\n            var propType = typeof origProperty;\r\n            if (Util.isPrimitive(origProperty)) {\r\n                property = origProperty.toString();\r\n            }\r\n            else if (origProperty === null || propType === \"undefined\") {\r\n                property = \"\";\r\n            }\r\n            else if (propType === \"function\") {\r\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\r\n                continue;\r\n            }\r\n            else {\r\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\r\n                try {\r\n                    if (Util.isPrimitive(stringTarget)) {\r\n                        property = stringTarget;\r\n                    }\r\n                    else {\r\n                        property = JSON.stringify(stringTarget);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\r\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\r\n                }\r\n            }\r\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\r\n        }\r\n        return map;\r\n    };\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list\r\n     * and if it is safe to add correlation headers\r\n     */\r\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\r\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < excludedDomains.length; i++) {\r\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            if (regex.test(url.parse(requestUrl).hostname)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Util.getCorrelationContextTarget = function (response, key) {\r\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\r\n        if (contextHeaders) {\r\n            var keyValues = contextHeaders.split(\",\");\r\n            for (var i = 0; i < keyValues.length; ++i) {\r\n                var keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length == 2 && keyValue[0] == key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate request\r\n     *\r\n     * Proxify the request creation to handle proxy http\r\n     *\r\n     * @param {string} requestUrl url endpoint\r\n     * @param {Object} requestOptions Request option\r\n     * @param {Function} requestCallback callback on request\r\n     * @returns {http.ClientRequest} request object\r\n     */\r\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\r\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\r\n            requestUrl = 'https:' + requestUrl;\r\n        }\r\n        var requestUrlParsed = url.parse(requestUrl);\r\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\r\n        var proxyUrl = undefined;\r\n        if (requestUrlParsed.protocol === 'https:') {\r\n            proxyUrl = config.proxyHttpsUrl || undefined;\r\n        }\r\n        if (requestUrlParsed.protocol === 'http:') {\r\n            proxyUrl = config.proxyHttpUrl || undefined;\r\n        }\r\n        if (proxyUrl) {\r\n            if (proxyUrl.indexOf('//') === 0) {\r\n                proxyUrl = 'http:' + proxyUrl;\r\n            }\r\n            var proxyUrlParsed = url.parse(proxyUrl);\r\n            // https is not supported at the moment\r\n            if (proxyUrlParsed.protocol === 'https:') {\r\n                Logging.info(\"Proxies that use HTTPS are not supported\");\r\n                proxyUrl = undefined;\r\n            }\r\n            else {\r\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\r\n            }\r\n        }\r\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\r\n        if (isHttps && config.httpsAgent !== undefined) {\r\n            options.agent = config.httpsAgent;\r\n        }\r\n        else if (!isHttps && config.httpAgent !== undefined) {\r\n            options.agent = config.httpAgent;\r\n        }\r\n        else if (isHttps) {\r\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\r\n            options.agent = Util.tlsRestrictedAgent;\r\n        }\r\n        if (isHttps) {\r\n            return https.request(options, requestCallback);\r\n        }\r\n        else {\r\n            return http.request(options, requestCallback);\r\n        }\r\n    };\r\n    ;\r\n    /**\r\n     * Parse standard <string | string[] | number> request-context header\r\n     */\r\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\r\n        var header; // attempt to cast correlationHeader to string\r\n        if (typeof correlationHeader === \"string\") {\r\n            header = correlationHeader;\r\n        }\r\n        else if (correlationHeader instanceof Array) {\r\n            header = correlationHeader.join(\",\");\r\n        }\r\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\r\n            // best effort attempt: requires well-defined toString\r\n            try {\r\n                header = correlationHeader.toString();\r\n            }\r\n            catch (err) {\r\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\r\n            }\r\n        }\r\n        if (header) {\r\n            Util.addCorrelationIdHeaderFromString(client, request, header);\r\n        }\r\n        else {\r\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n        }\r\n    };\r\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\r\n        var components = correlationHeader.split(\",\");\r\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\r\n        if (!found) {\r\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n        }\r\n    };\r\n    Util.MAX_PROPERTY_LENGTH = 8192;\r\n    Util.tlsRestrictedAgent = new https.Agent({\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    return Util;\r\n}());\r\nmodule.exports = Util;\r\n//# sourceMappingURL=Util.js.map","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      }\n    }\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First, split based on boolean or ||\n    this.raw = range\n    this.set = range\n      .split(/\\s*\\|\\|\\s*/)\n      // map the range to a 2d array of comparators\n      .map(range => this.parseRange(range.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${range}`)\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => {\n        return comps.join(' ').trim()\n      })\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    const loose = this.options.loose\n    range = range.trim()\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace)\n    debug('hyphen replace', range)\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n    // normalize spaces\n    range = range.split(/\\s+/).join(' ')\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    const compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    return range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // in loose mode, throw out any that are not valid comparators\n      .filter(this.options.loose ? comp => !!comp.match(compRe) : () => true)\n      .map(comp => new Comparator(comp, this.options))\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\nmodule.exports = Range\n\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace\n} = require('../internal/re')\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nconst replaceTildes = (comp, options) =>\n  comp.trim().split(/\\s+/).map((comp) => {\n    return replaceTilde(comp, options)\n  }).join(' ')\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nconst replaceCarets = (comp, options) =>\n  comp.trim().split(/\\s+/).map((comp) => {\n    return replaceCaret(comp, options)\n  }).join(' ')\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0`\n      } else {\n        ret = `>=${M}.${m}.0 <${+M + 1}.0.0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          } <${M}.${m}.${+p + 1}`\n        } else {\n          ret = `>=${M}.${m}.${p\n          } <${M}.${+m + 1}.0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map((comp) => {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0${pr}`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0${pr}`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nconst hyphenReplace = ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0`\n  } else {\n    from = `>=${from}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else {\n    to = `<=${to}`\n  }\n\n  return (`${from} ${to}`).trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * The abstract common base of all domains.\r\n */\r\nvar Domain = (function () {\r\n    function Domain() {\r\n    }\r\n    return Domain;\r\n}());\r\nmodule.exports = Domain;\r\n//# sourceMappingURL=Domain.js.map","module.exports = require(\"os\");","module.exports = require(\"util\");","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar CorrelationIdManager = (function () {\r\n    function CorrelationIdManager() {\r\n    }\r\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\r\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\r\n        // If it 404s, the iKey is bad and we should give up\r\n        // If it fails otherwise, try again later\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\r\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\r\n            return;\r\n        }\r\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\r\n            return;\r\n        }\r\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\r\n        var fetchAppId = function () {\r\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                // This query has been cancelled.\r\n                return;\r\n            }\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                // Ensure this request is not captured by auto-collection.\r\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\r\n                disableAppInsightsAutoCollection: true\r\n            };\r\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\r\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\r\n                if (res.statusCode === 200) {\r\n                    // Success; extract the appId from the body\r\n                    var appId_1 = \"\";\r\n                    res.setEncoding(\"utf-8\");\r\n                    res.on('data', function (data) {\r\n                        appId_1 += data;\r\n                    });\r\n                    res.on('end', function () {\r\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\r\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\r\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\r\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\r\n                        }\r\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                    });\r\n                }\r\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\r\n                    // Not found, probably a bad key. Do not try again.\r\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\r\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                }\r\n                else {\r\n                    // Retry after timeout.\r\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\r\n                }\r\n            });\r\n            if (req) {\r\n                req.on('error', function (error) {\r\n                    // Unable to contact endpoint.\r\n                    // Do nothing for now.\r\n                    Logging.warn(CorrelationIdManager.TAG, error);\r\n                });\r\n                req.end();\r\n            }\r\n        };\r\n        setTimeout(fetchAppId, 0);\r\n    };\r\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\r\n        if (pendingLookups) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\r\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\r\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\r\n     * @param parentId\r\n     */\r\n    CorrelationIdManager.generateRequestId = function (parentId) {\r\n        if (parentId) {\r\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\r\n            if (parentId[parentId.length - 1] !== '.') {\r\n                parentId += '.';\r\n            }\r\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\r\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\r\n        }\r\n        else {\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n    };\r\n    /**\r\n     * Given a hierarchical identifier of the form |X.*\r\n     * return the root identifier X\r\n     * @param id\r\n     */\r\n    CorrelationIdManager.getRootId = function (id) {\r\n        var endIndex = id.indexOf('.');\r\n        if (endIndex < 0) {\r\n            endIndex = id.length;\r\n        }\r\n        var startIndex = id[0] === '|' ? 1 : 0;\r\n        return id.substring(startIndex, endIndex);\r\n    };\r\n    CorrelationIdManager.generateRootId = function () {\r\n        return '|' + Util.w3cTraceId() + '.';\r\n    };\r\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\r\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\r\n            return parentId + suffix + delimiter;\r\n        }\r\n        // Combined identifier would be too long, so we must truncate it.\r\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\r\n        // overflow delimiter '#'\r\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\r\n        if (parentId.length > trimPosition) {\r\n            for (; trimPosition > 1; --trimPosition) {\r\n                var c = parentId[trimPosition - 1];\r\n                if (c === '.' || c === '_') {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (trimPosition <= 1) {\r\n            // parentId is not a valid ID\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n        suffix = Util.randomu32().toString(16);\r\n        while (suffix.length < 8) {\r\n            suffix = '0' + suffix;\r\n        }\r\n        return parentId.substring(0, trimPosition) + suffix + '#';\r\n    };\r\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\r\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\r\n    CorrelationIdManager.w3cEnabled = false;\r\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\r\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\r\n    CorrelationIdManager.pendingLookups = {};\r\n    CorrelationIdManager.completedLookups = {};\r\n    CorrelationIdManager.requestIdMaxLength = 1024;\r\n    CorrelationIdManager.currentRootId = Util.randomu32();\r\n    return CorrelationIdManager;\r\n}());\r\nmodule.exports = CorrelationIdManager;\r\n//# sourceMappingURL=CorrelationIdManager.js.map","const { MAX_SAFE_COMPONENT_LENGTH } = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst createToken = (name, value, isGlobal) => {\n  const index = R++\n  debug(index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '[0-9]+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*')\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', '[0-9A-Za-z-]+')\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n","const {MAX_LENGTH} = require('../internal/constants')\nconst { re, t } = require('../internal/re')\nconst SemVer = require('../classes/semver')\n\nconst parse = (version, options) => {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  const r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nmodule.exports = parse\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Logging = require(\"../Library/Logging\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar CorrelationContextManager = (function () {\r\n    function CorrelationContextManager() {\r\n    }\r\n    /**\r\n     *  Provides the current Context.\r\n     *  The context is the most recent one entered into for the current\r\n     *  logical chain of execution, including across asynchronous calls.\r\n     */\r\n    CorrelationContextManager.getCurrentContext = function () {\r\n        if (!CorrelationContextManager.enabled) {\r\n            return null;\r\n        }\r\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\r\n        if (context === undefined) {\r\n            return null;\r\n        }\r\n        return context;\r\n    };\r\n    /**\r\n     *  A helper to generate objects conforming to the CorrelationContext interface\r\n     */\r\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\r\n        parentId = parentId || operationId;\r\n        if (this.enabled) {\r\n            return {\r\n                operation: {\r\n                    name: operationName,\r\n                    id: operationId,\r\n                    parentId: parentId,\r\n                    traceparent: traceparent,\r\n                    tracestate: tracestate\r\n                },\r\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     *  Runs a function inside a given Context.\r\n     *  All logical children of the execution path that entered this Context\r\n     *  will receive this Context object on calls to GetCurrentContext.\r\n     */\r\n    CorrelationContextManager.runWithContext = function (context, fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\r\n        }\r\n        else {\r\n            return fn();\r\n        }\r\n        var _a;\r\n    };\r\n    /**\r\n     * Wrapper for cls-hooked bindEmitter method\r\n     */\r\n    CorrelationContextManager.wrapEmitter = function (emitter) {\r\n        if (CorrelationContextManager.enabled) {\r\n            CorrelationContextManager.session.bindEmitter(emitter);\r\n        }\r\n    };\r\n    /**\r\n     *  Patches a callback to restore the correct Context when getCurrentContext\r\n     *  is run within it. This is necessary if automatic correlation fails to work\r\n     *  with user-included libraries.\r\n     *\r\n     *  The supplied callback will be given the same context that was present for\r\n     *  the call to wrapCallback.  */\r\n    CorrelationContextManager.wrapCallback = function (fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            return CorrelationContextManager.session.bind(fn);\r\n        }\r\n        return fn;\r\n    };\r\n    /**\r\n     *  Enables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.enable = function (forceClsHooked) {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        if (!this.isNodeVersionCompatible()) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        if (!CorrelationContextManager.hasEverEnabled) {\r\n            this.forceClsHooked = forceClsHooked;\r\n            this.hasEverEnabled = true;\r\n            if (typeof this.cls === \"undefined\") {\r\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\r\n                    this.cls = require('cls-hooked');\r\n                }\r\n                else {\r\n                    this.cls = require('continuation-local-storage');\r\n                }\r\n            }\r\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\r\n            DiagChannel.registerContextPreservation(function (cb) {\r\n                return CorrelationContextManager.session.bind(cb);\r\n            });\r\n        }\r\n        this.enabled = true;\r\n    };\r\n    /**\r\n     *  Disables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.disable = function () {\r\n        this.enabled = false;\r\n    };\r\n    /**\r\n     * Reset the namespace\r\n     */\r\n    CorrelationContextManager.reset = function () {\r\n        if (CorrelationContextManager.hasEverEnabled) {\r\n            CorrelationContextManager.session = null;\r\n            CorrelationContextManager.session = this.cls.createNamespace('AI-CLS-Session');\r\n        }\r\n    };\r\n    /**\r\n     *  Reports if CorrelationContextManager is able to run in this environment\r\n     */\r\n    CorrelationContextManager.isNodeVersionCompatible = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\r\n    };\r\n    /**\r\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\r\n     * use async-listener (plain -cls)\r\n     */\r\n    CorrelationContextManager.shouldUseClsHooked = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\r\n    };\r\n    /**\r\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\r\n     * @internal Used in tests only\r\n     */\r\n    CorrelationContextManager.canUseClsHooked = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\r\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\r\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\r\n        return !(greater800 && less820) && greater470;\r\n    };\r\n    CorrelationContextManager.enabled = false;\r\n    CorrelationContextManager.hasEverEnabled = false;\r\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\r\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\r\n    return CorrelationContextManager;\r\n}());\r\nexports.CorrelationContextManager = CorrelationContextManager;\r\nvar CustomPropertiesImpl = (function () {\r\n    function CustomPropertiesImpl(header) {\r\n        this.props = [];\r\n        this.addHeaderData(header);\r\n    }\r\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\r\n        var keyvals = header ? header.split(\", \") : [];\r\n        this.props = keyvals.map(function (keyval) {\r\n            var parts = keyval.split(\"=\");\r\n            return { key: parts[0], value: parts[1] };\r\n        }).concat(this.props);\r\n    };\r\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\r\n        return this.props.map(function (keyval) {\r\n            return keyval.key + \"=\" + keyval.value;\r\n        }).join(\", \");\r\n    };\r\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                return keyval.value;\r\n            }\r\n        }\r\n        return;\r\n    };\r\n    // TODO: Strictly according to the spec, properties which are recieved from\r\n    // an incoming request should be left untouched, while we may add our own new\r\n    // properties. The logic here will need to change to track that.\r\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\r\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\r\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\r\n            return;\r\n        }\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                keyval.value = val;\r\n                return;\r\n            }\r\n        }\r\n        this.props.push({ key: prop, value: val });\r\n    };\r\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\r\n    return CustomPropertiesImpl;\r\n}());\r\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\r\nmodule.exports = {\r\n    /**\r\n     * Request-Context header\r\n     */\r\n    requestContextHeader: \"request-context\",\r\n    /**\r\n     * Source instrumentation header that is added by an application while making http\r\n     * requests and retrieved by the other application when processing incoming requests.\r\n     */\r\n    requestContextSourceKey: \"appId\",\r\n    /**\r\n     * Target instrumentation header that is added to the response and retrieved by the\r\n     * calling application when processing incoming responses.\r\n     */\r\n    requestContextTargetKey: \"appId\",\r\n    /**\r\n     * Request-Id header\r\n     */\r\n    requestIdHeader: \"request-id\",\r\n    /**\r\n     * Legacy Header containing the id of the immidiate caller\r\n     */\r\n    parentIdHeader: \"x-ms-request-id\",\r\n    /**\r\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\r\n     * accross transactions\r\n     */\r\n    rootIdHeader: \"x-ms-request-root-id\",\r\n    /**\r\n     * Correlation-Context header\r\n     *\r\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\r\n     */\r\n    correlationContextHeader: \"correlation-context\",\r\n    /**\r\n     * W3C distributed tracing protocol header\r\n     */\r\n    traceparentHeader: \"traceparent\",\r\n    /**\r\n     * W3C distributed tracing protocol state header\r\n     */\r\n    traceStateHeader: \"tracestate\"\r\n};\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","module.exports = require(\"http\");","module.exports = require(\"child_process\");","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectHttpDependencies = (function () {\r\n    function AutoCollectHttpDependencies(client) {\r\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\r\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpDependencies.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._initialize();\r\n        }\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpDependencies.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var originalGet = http.get;\r\n        var originalRequest = http.request;\r\n        var originalHttpsRequest = https.request;\r\n        var clientRequestPatch = function (request, options) {\r\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\r\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\r\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\r\n            if (request && options && shouldCollect) {\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\r\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n            }\r\n        };\r\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\r\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\r\n        // Patch both and leave a flag to not double-count on versions that just call through\r\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\r\n        http.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        https.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        // Node 8 calls http.request from http.get using a local reference!\r\n        // We have to patch .get manually in this case and can't just assume request is enough\r\n        // We have to replace the entire method in this case. We can't call the original.\r\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\r\n        http.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n        https.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks an outgoing request. Because it may set headers this method must be called before\r\n     * writing content to or ending the request.\r\n     */\r\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\r\n        if (!telemetry.options || !telemetry.request || !client) {\r\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\r\n            return;\r\n        }\r\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\r\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var uniqueRequestId;\r\n        var uniqueTraceparent;\r\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\r\n            currentContext.operation.traceparent.updateSpanId();\r\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\r\n        }\r\n        else if (CorrelationIdManager.w3cEnabled) {\r\n            // Start an operation now so that we can include the w3c headers in the outgoing request\r\n            var traceparent = new Traceparent();\r\n            uniqueTraceparent = traceparent.toString();\r\n            uniqueRequestId = traceparent.getBackCompatRequestId();\r\n        }\r\n        else {\r\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\r\n        }\r\n        // Add the source correlationId to the request headers, if a value was not already provided.\r\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\r\n        // are not included in the v0.10 type declarations currently used. So check if the\r\n        // methods exist before invoking them.\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\r\n            if (client.config && client.config.correlationId) {\r\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\r\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\r\n                Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\r\n                if (currentContext && currentContext.operation) {\r\n                    try {\r\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\r\n                        // Also set legacy headers\r\n                        telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\r\n                        telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\r\n                        // Set W3C headers, if available\r\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\r\n                        }\r\n                        else if (CorrelationIdManager.w3cEnabled) {\r\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\r\n                            var traceparent = new Traceparent().toString();\r\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\r\n                        }\r\n                        if (currentContext.operation.tracestate) {\r\n                            var tracestate = currentContext.operation.tracestate.toString();\r\n                            if (tracestate) {\r\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\r\n                            }\r\n                        }\r\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\r\n                        if (correlationContextHeader) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Collect dependency telemetry about the request when it finishes.\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on('response', function (response) {\r\n                requestParser.onResponse(response);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on('error', function (e) {\r\n                requestParser.onError(e);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.dispose = function () {\r\n        AutoCollectHttpDependencies.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\r\n    AutoCollectHttpDependencies.requestNumber = 1;\r\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpDependencies;\r\n}());\r\nmodule.exports = AutoCollectHttpDependencies;\r\n//# sourceMappingURL=HttpDependencies.js.map","module.exports = require(\"https\");","module.exports = require(\"url\");","module.exports = require(\"prettier\");","import * as os from \"os\";\nimport * as path from \"path\";\n// tslint:disable-next-line: no-implicit-dependencies\nimport { Uri, workspace } from \"vscode\";\nimport { PrettierVSCodeConfig } from \"./types\";\n\nexport function getWorkspaceRelativePath(\n  filePath: string,\n  pathToResolve: string\n) {\n  // In case the user wants to use ~/.prettierrc on Mac\n  if (\n    process.platform === \"darwin\" &&\n    pathToResolve.indexOf(\"~\") === 0 &&\n    os.homedir()\n  ) {\n    return pathToResolve.replace(/^~(?=$|\\/|\\\\)/, os.homedir());\n  }\n\n  if (workspace.workspaceFolders) {\n    const folder = workspace.getWorkspaceFolder(Uri.file(filePath));\n    return folder\n      ? path.isAbsolute(pathToResolve)\n        ? pathToResolve\n        : path.join(folder.uri.fsPath, pathToResolve)\n      : undefined;\n  }\n}\n\nexport function getConfig(uri?: Uri): PrettierVSCodeConfig {\n  return workspace.getConfiguration(\"prettier\", uri) as any;\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\nmodule.exports = {\n  SEMVER_SPEC_VERSION,\n  MAX_LENGTH,\n  MAX_SAFE_INTEGER,\n  MAX_SAFE_COMPONENT_LENGTH\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\r\nif (exports.IsInitialized) {\r\n    var publishers = require(\"diagnostic-channel-publishers\");\r\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\r\n    var unpatchedModules = individualOptOuts.split(\",\");\r\n    var modules = {\r\n        bunyan: publishers.bunyan,\r\n        console: publishers.console,\r\n        mongodb: publishers.mongodb,\r\n        mongodbCore: publishers.mongodbCore,\r\n        mysql: publishers.mysql,\r\n        redis: publishers.redis,\r\n        pg: publishers.pg,\r\n        pgPool: publishers.pgPool,\r\n        winston: publishers.winston\r\n    };\r\n    for (var mod in modules) {\r\n        if (unpatchedModules.indexOf(mod) === -1) {\r\n            modules[mod].enable();\r\n        }\r\n    }\r\n}\r\nfunction registerContextPreservation(cb) {\r\n    if (!exports.IsInitialized) {\r\n        return;\r\n    }\r\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\r\n}\r\nexports.registerContextPreservation = registerContextPreservation;\r\n//# sourceMappingURL=initialization.js.map","module.exports = require(\"assert\");","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AutoCollectPerformance = (function () {\r\n    /**\r\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\r\n     */\r\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\r\n        if (!AutoCollectPerformance.INSTANCE) {\r\n            AutoCollectPerformance.INSTANCE = this;\r\n        }\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n        this._collectionInterval = collectionInterval;\r\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\r\n    }\r\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._lastCpus = os.cpus();\r\n                this._lastRequests = {\r\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n                    time: +new Date\r\n                };\r\n                this._lastDependencies = {\r\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\r\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\r\n                    time: +new Date\r\n                };\r\n                this._lastExceptions = {\r\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\r\n                    time: +new Date\r\n                };\r\n                if (typeof process.cpuUsage === 'function') {\r\n                    this._lastAppCpuUsage = process.cpuUsage();\r\n                }\r\n                this._lastHrtime = process.hrtime();\r\n                this._collectionInterval = collectionInterval || this._collectionInterval;\r\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPerformance.countRequest = function (request, response) {\r\n        var _this = this;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        var start = +new Date;\r\n        if (!request || !response) {\r\n            Logging.warn(\"AutoCollectPerformance.countRequest was called with invalid parameters: \", !!request, !!response);\r\n            return;\r\n        }\r\n        // response listeners\r\n        if (typeof response.once === \"function\") {\r\n            response.once(\"finish\", function () {\r\n                var end = +new Date;\r\n                AutoCollectPerformance._intervalRequestExecutionTime += _this._lastRequestExecutionTime = end - start;\r\n                AutoCollectPerformance._totalRequestCount++;\r\n                if (response.statusCode >= 400) {\r\n                    AutoCollectPerformance._totalFailedRequestCount++;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    AutoCollectPerformance.countException = function () {\r\n        AutoCollectPerformance._totalExceptionCount++;\r\n    };\r\n    AutoCollectPerformance.countDependency = function (duration, success) {\r\n        var durationMs;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        if (typeof duration === 'string') {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === 'number') {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\r\n        if (success === false) {\r\n            AutoCollectPerformance._totalFailedDependencyCount++;\r\n        }\r\n        AutoCollectPerformance._totalDependencyCount++;\r\n    };\r\n    AutoCollectPerformance.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPerformance.isEnabled = function () {\r\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPerformance.prototype.trackPerformance = function () {\r\n        this._trackCpu();\r\n        this._trackMemory();\r\n        this._trackNetwork();\r\n        this._trackDependencyRate();\r\n        this._trackExceptionRate();\r\n    };\r\n    AutoCollectPerformance.prototype._trackCpu = function () {\r\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\r\n        // to find the delta since the last measurement\r\n        var cpus = os.cpus();\r\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\r\n            var totalUser = 0;\r\n            var totalSys = 0;\r\n            var totalNice = 0;\r\n            var totalIdle = 0;\r\n            var totalIrq = 0;\r\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\r\n                var cpu = cpus[i];\r\n                var lastCpu = this._lastCpus[i];\r\n                var name = \"% cpu(\" + i + \") \";\r\n                var model = cpu.model;\r\n                var speed = cpu.speed;\r\n                var times = cpu.times;\r\n                var lastTimes = lastCpu.times;\r\n                // user cpu time (or) % CPU time spent in user space\r\n                var user = (times.user - lastTimes.user) || 0;\r\n                totalUser += user;\r\n                // system cpu time (or) % CPU time spent in kernel space\r\n                var sys = (times.sys - lastTimes.sys) || 0;\r\n                totalSys += sys;\r\n                // user nice cpu time (or) % CPU time spent on low priority processes\r\n                var nice = (times.nice - lastTimes.nice) || 0;\r\n                totalNice += nice;\r\n                // idle cpu time (or) % CPU time spent idle\r\n                var idle = (times.idle - lastTimes.idle) || 0;\r\n                totalIdle += idle;\r\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\r\n                var irq = (times.irq - lastTimes.irq) || 0;\r\n                totalIrq += irq;\r\n            }\r\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\r\n            var appCpuPercent = undefined;\r\n            if (typeof process.cpuUsage === 'function') {\r\n                var appCpuUsage = process.cpuUsage();\r\n                var hrtime = process.hrtime();\r\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\r\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\r\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\r\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\r\n                }\r\n                // Set previous\r\n                this._lastAppCpuUsage = appCpuUsage;\r\n                this._lastHrtime = hrtime;\r\n            }\r\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\r\n        }\r\n        this._lastCpus = cpus;\r\n    };\r\n    AutoCollectPerformance.prototype._trackMemory = function () {\r\n        var freeMem = os.freemem();\r\n        var usedMem = process.memoryUsage().rss;\r\n        var committedMemory = os.totalmem() - freeMem;\r\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\r\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\r\n        // Only supported by quickpulse service\r\n        if (this._enableLiveMetricsCounters) {\r\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype._trackNetwork = function () {\r\n        // track total request counters\r\n        var lastRequests = this._lastRequests;\r\n        var requests = {\r\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n            time: +new Date\r\n        };\r\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\r\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\r\n        var elapsedMs = requests.time - lastRequests.time;\r\n        var elapsedSeconds = elapsedMs / 1000;\r\n        var averageRequestExecutionTime = (AutoCollectPerformance._intervalRequestExecutionTime / intervalRequests) || 0; // default to 0 in case no requests in this interval\r\n        AutoCollectPerformance._intervalRequestExecutionTime = 0; // reset\r\n        if (elapsedMs > 0) {\r\n            var requestsPerSec = intervalRequests / elapsedSeconds;\r\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\r\n            // Only send duration to live metrics if it has been updated!\r\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\r\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\r\n            }\r\n            // Only supported by quickpulse service\r\n            if (this._enableLiveMetricsCounters) {\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\r\n            }\r\n        }\r\n        this._lastRequests = requests;\r\n    };\r\n    // Static counter is accumulated externally. Report the rate to client here\r\n    // Note: This is currently only used with QuickPulse client\r\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\r\n        if (this._enableLiveMetricsCounters) {\r\n            var lastDependencies = this._lastDependencies;\r\n            var dependencies = {\r\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\r\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\r\n                time: +new Date\r\n            };\r\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\r\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\r\n            var elapsedMs = dependencies.time - lastDependencies.time;\r\n            var elapsedSeconds = elapsedMs / 1000;\r\n            var averageDependencyExecutionTime = (AutoCollectPerformance._intervalDependencyExecutionTime / intervalDependencies) || 0;\r\n            AutoCollectPerformance._intervalDependencyExecutionTime = 0; // reset\r\n            if (elapsedMs > 0) {\r\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\r\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\r\n                // redundant check for livemetrics, but kept for consistency w/ requests\r\n                // Only send duration to live metrics if it has been updated!\r\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\r\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\r\n                }\r\n            }\r\n            this._lastDependencies = dependencies;\r\n        }\r\n    };\r\n    // Static counter is accumulated externally. Report the rate to client here\r\n    // Note: This is currently only used with QuickPulse client\r\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\r\n        if (this._enableLiveMetricsCounters) {\r\n            var lastExceptions = this._lastExceptions;\r\n            var exceptions = {\r\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\r\n                time: +new Date\r\n            };\r\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\r\n            var elapsedMs = exceptions.time - lastExceptions.time;\r\n            var elapsedSeconds = elapsedMs / 1000;\r\n            if (elapsedMs > 0) {\r\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\r\n            }\r\n            this._lastExceptions = exceptions;\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype.dispose = function () {\r\n        AutoCollectPerformance.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectPerformance._totalRequestCount = 0;\r\n    AutoCollectPerformance._totalFailedRequestCount = 0;\r\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\r\n    AutoCollectPerformance._totalDependencyCount = 0;\r\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\r\n    AutoCollectPerformance._lastDependencyExecutionTime = 0;\r\n    AutoCollectPerformance._totalExceptionCount = 0;\r\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\r\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\r\n    return AutoCollectPerformance;\r\n}());\r\nmodule.exports = AutoCollectPerformance;\r\n//# sourceMappingURL=Performance.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar QuickPulseCounter;\r\n(function (QuickPulseCounter) {\r\n    // Memory\r\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\r\n    // CPU\r\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\r\n    // Request\r\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\r\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\r\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\r\n    // Dependency\r\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\r\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\r\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\r\n    // Exception\r\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\r\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\r\nvar PerformanceCounter;\r\n(function (PerformanceCounter) {\r\n    // Memory\r\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\r\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\r\n    // CPU\r\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\r\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\r\n    // Requests\r\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\r\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\r\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\r\n;\r\n/**\r\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\r\n */\r\nexports.PerformanceToQuickPulseCounter = (_a = {},\r\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\r\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\r\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\r\n    // Remap quick pulse only counters\r\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\r\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\r\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\r\n    _a);\r\nexports.QuickPulseDocumentType = {\r\n    Event: \"Event\",\r\n    Exception: \"Exception\",\r\n    Trace: \"Trace\",\r\n    Metric: \"Metric\",\r\n    Request: \"Request\",\r\n    Dependency: \"RemoteDependency\"\r\n};\r\nexports.QuickPulseType = {\r\n    Event: \"EventTelemetryDocument\",\r\n    Exception: \"ExceptionTelemetryDocument\",\r\n    Trace: \"TraceTelemetryDocument\",\r\n    Metric: \"MetricTelemetryDocument\",\r\n    Request: \"RequestTelemetryDocument\",\r\n    Dependency: \"DependencyTelemetryDocument\"\r\n};\r\nexports.TelemetryTypeStringToQuickPulseType = {\r\n    EventData: exports.QuickPulseType.Event,\r\n    ExceptionData: exports.QuickPulseType.Exception,\r\n    MessageData: exports.QuickPulseType.Trace,\r\n    MetricData: exports.QuickPulseType.Metric,\r\n    RequestData: exports.QuickPulseType.Request,\r\n    RemoteDependencyData: exports.QuickPulseType.Dependency\r\n};\r\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\r\n    EventData: exports.QuickPulseDocumentType.Event,\r\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\r\n    MessageData: exports.QuickPulseDocumentType.Trace,\r\n    MetricData: exports.QuickPulseDocumentType.Metric,\r\n    RequestData: exports.QuickPulseDocumentType.Request,\r\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency\r\n};\r\nvar _a;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\nvar Config = (function () {\r\n    function Config(instrumentationKey) {\r\n        var _this = this;\r\n        this.endpointBase = \"https://dc.services.visualstudio.com\";\r\n        this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();\r\n        this.endpointUrl = this.endpointBase + \"/v2/track\";\r\n        this.maxBatchSize = 250;\r\n        this.maxBatchIntervalMs = 15000;\r\n        this.disableAppInsights = false;\r\n        this.samplingPercentage = 100;\r\n        this.correlationIdRetryIntervalMs = 30 * 1000;\r\n        this.correlationHeaderExcludedDomains = [\r\n            \"*.core.windows.net\",\r\n            \"*.core.chinacloudapi.cn\",\r\n            \"*.core.cloudapi.de\",\r\n            \"*.core.usgovcloudapi.net\"\r\n        ];\r\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\r\n        this.profileQueryEndpoint = process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\r\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\r\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\r\n        this.httpAgent = undefined;\r\n        this.httpsAgent = undefined;\r\n        this._quickPulseHost = process.env[Config.ENV_quickPulseHost] || \"rt.services.visualstudio.com\";\r\n    }\r\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\r\n        get: function () {\r\n            return this._profileQueryEndpoint;\r\n        },\r\n        set: function (endpoint) {\r\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\r\n            this._profileQueryEndpoint = endpoint;\r\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\r\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"quickPulseHost\", {\r\n        get: function () {\r\n            return this._quickPulseHost;\r\n        },\r\n        set: function (host) {\r\n            this._quickPulseHost = host;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Config._getInstrumentationKey = function () {\r\n        // check for both the documented env variable and the azure-prefixed variable\r\n        var iKey = process.env[Config.ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\r\n            || process.env[Config.legacy_ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\r\n        if (!iKey || iKey == \"\") {\r\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\r\n        }\r\n        return iKey;\r\n    };\r\n    // Azure adds this prefix to all environment variables\r\n    Config.ENV_azurePrefix = \"APPSETTING_\";\r\n    // This key is provided in the readme\r\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\r\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\r\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\r\n    // Native Metrics Opt Outs\r\n    Config.ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\r\n    Config.ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\r\n    Config.ENV_http_proxy = \"http_proxy\";\r\n    Config.ENV_https_proxy = \"https_proxy\";\r\n    return Config;\r\n}());\r\nmodule.exports = Config;\r\n//# sourceMappingURL=Config.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Logging = require(\"./Logging\");\r\nvar Context = (function () {\r\n    function Context(packageJsonPath) {\r\n        this.keys = new Contracts.ContextTagKeys();\r\n        this.tags = {};\r\n        this._loadApplicationContext();\r\n        this._loadDeviceContext();\r\n        this._loadInternalContext();\r\n    }\r\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\r\n        // note: this should return the host package.json\r\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\r\n        if (!Context.appVersion[packageJsonPath]) {\r\n            Context.appVersion[packageJsonPath] = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.appVersion[packageJsonPath] = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\r\n    };\r\n    Context.prototype._loadDeviceContext = function () {\r\n        this.tags[this.keys.deviceId] = \"\";\r\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\r\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\r\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\r\n        // not yet supported tags\r\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\r\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\r\n    };\r\n    Context.prototype._loadInternalContext = function () {\r\n        // note: this should return the sdk package.json\r\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\r\n        if (!Context.sdkVersion) {\r\n            Context.sdkVersion = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.sdkVersion = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\r\n    };\r\n    Context.DefaultRoleName = \"Web\";\r\n    Context.appVersion = {};\r\n    Context.sdkVersion = null;\r\n    return Context;\r\n}());\r\nmodule.exports = Context;\r\n//# sourceMappingURL=Context.js.map","var core = require('./core');\n\nmodule.exports = function isCore(x) {\n    return Object.prototype.hasOwnProperty.call(core, x);\n};\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers\n}\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n  constructor (comp, options) {\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      }\n    }\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (!options || typeof options !== 'object') {\n      options = {\n        loose: !!options,\n        includePrerelease: false\n      }\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    const sameDirectionIncreasing =\n      (this.operator === '>=' || this.operator === '>') &&\n      (comp.operator === '>=' || comp.operator === '>')\n    const sameDirectionDecreasing =\n      (this.operator === '<=' || this.operator === '<') &&\n      (comp.operator === '<=' || comp.operator === '<')\n    const sameSemVer = this.semver.version === comp.semver.version\n    const differentDirectionsInclusive =\n      (this.operator === '>=' || this.operator === '<=') &&\n      (comp.operator === '>=' || comp.operator === '<=')\n    const oppositeDirectionsLessThan =\n      cmp(this.semver, '<', comp.semver, options) &&\n      (this.operator === '>=' || this.operator === '>') &&\n        (comp.operator === '<=' || comp.operator === '<')\n    const oppositeDirectionsGreaterThan =\n      cmp(this.semver, '>', comp.semver, options) &&\n      (this.operator === '<=' || this.operator === '<') &&\n        (comp.operator === '>=' || comp.operator === '>')\n\n    return (\n      sameDirectionIncreasing ||\n      sameDirectionDecreasing ||\n      (sameSemVer && differentDirectionsInclusive) ||\n      oppositeDirectionsLessThan ||\n      oppositeDirectionsGreaterThan\n    )\n  }\n}\n\nmodule.exports = Comparator\n\nconst {re, t} = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst {ANY} = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","export const OUTDATED_PRETTIER_VERSION_MESSAGE =\n  \"Your project is configured to use an outdated version of prettier that cannot be used by this extension. Upgrade to the latest version of prettier.\";\nexport const VIEW_LOGS_ACTION_TEXT = \"Show Log\";\nexport const FAILED_TO_LOAD_MODULE_MESSAGE =\n  \"Failed to load module. If you have prettier or plugins referenced in package.json, ensure you have run `npm install`\";\nexport const INVALID_PRETTIER_CONFIG =\n  \"Invalid prettier configuration file detected. See log for details.\";\n","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","module.exports = require(\"module\");","module.exports = require(\"timers\");","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","module.exports = require(\"zlib\");","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvailabilityData = require(\"./AvailabilityData\");\r\nexports.Base = require(\"./Base\");\r\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\r\nexports.Data = require(\"./Data\");\r\nexports.DataPoint = require(\"./DataPoint\");\r\nexports.DataPointType = require(\"./DataPointType\");\r\nexports.Domain = require(\"./Domain\");\r\nexports.Envelope = require(\"./Envelope\");\r\nexports.EventData = require(\"./EventData\");\r\nexports.ExceptionData = require(\"./ExceptionData\");\r\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\r\nexports.MessageData = require(\"./MessageData\");\r\nexports.MetricData = require(\"./MetricData\");\r\nexports.PageViewData = require(\"./PageViewData\");\r\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\r\nexports.RequestData = require(\"./RequestData\");\r\nexports.SeverityLevel = require(\"./SeverityLevel\");\r\nexports.StackFrame = require(\"./StackFrame\");\r\n//# sourceMappingURL=index.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Data struct to contain only C section with custom fields.\r\n */\r\nvar Base = (function () {\r\n    function Base() {\r\n    }\r\n    return Base;\r\n}());\r\nmodule.exports = Base;\r\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Type of the metric data measurement.\r\n */\r\nvar DataPointType;\r\n(function (DataPointType) {\r\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\r\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\r\n})(DataPointType || (DataPointType = {}));\r\nmodule.exports = DataPointType;\r\n//# sourceMappingURL=DataPointType.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\r\n */\r\nvar EventData = (function (_super) {\r\n    __extends(EventData, _super);\r\n    function EventData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return EventData;\r\n}(Domain));\r\nmodule.exports = EventData;\r\n//# sourceMappingURL=EventData.js.map","\"use strict\";\r\n/**\r\n * Base class for helpers that read data from HTTP requst/response objects and convert them\r\n * into the telemetry contract objects.\r\n */\r\nvar RequestParser = (function () {\r\n    function RequestParser() {\r\n    }\r\n    /**\r\n     * Gets a url parsed out from request options\r\n     */\r\n    RequestParser.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n    RequestParser.prototype.RequestParser = function () {\r\n        this.startTime = +new Date();\r\n    };\r\n    RequestParser.prototype._setStatus = function (status, error) {\r\n        var endTime = +new Date();\r\n        this.duration = endTime - this.startTime;\r\n        this.statusCode = status;\r\n        var properties = this.properties || {};\r\n        if (error) {\r\n            if (typeof error === \"string\") {\r\n                properties[\"error\"] = error;\r\n            }\r\n            else if (error instanceof Error) {\r\n                properties[\"error\"] = error.message;\r\n            }\r\n            else if (typeof error === \"object\") {\r\n                for (var key in error) {\r\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\r\n                }\r\n            }\r\n        }\r\n        this.properties = properties;\r\n    };\r\n    RequestParser.prototype._isSuccess = function () {\r\n        return (0 < this.statusCode) && (this.statusCode < 400);\r\n    };\r\n    return RequestParser;\r\n}());\r\nmodule.exports = RequestParser;\r\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\n/**\r\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\r\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\r\n * https://www.w3.org/TR/trace-context/#traceparent-field\r\n */\r\nvar Traceparent = (function () {\r\n    function Traceparent(traceparent, parentId) {\r\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\r\n        this.version = Traceparent.DEFAULT_VERSION;\r\n        if (traceparent && typeof traceparent === \"string\") {\r\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\r\n            if (traceparent.split(\",\").length > 1) {\r\n                this.traceId = Util.w3cTraceId();\r\n                this.spanId = Util.w3cTraceId().substr(0, 16);\r\n            }\r\n            else {\r\n                var traceparentArr = traceparent.trim().split(\"-\");\r\n                var len = traceparentArr.length;\r\n                if (len >= 4) {\r\n                    this.version = traceparentArr[0];\r\n                    this.traceId = traceparentArr[1];\r\n                    this.spanId = traceparentArr[2];\r\n                    this.traceFlag = traceparentArr[3];\r\n                }\r\n                else {\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                // Version validation\r\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                if (this.version === \"00\" && len !== 4) {\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                if (this.version === \"ff\") {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                }\r\n                // TraceFlag validation\r\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\r\n                    this.traceFlag = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Validate TraceId, regenerate new traceid if invalid\r\n                if (!Traceparent.isValidTraceId(this.traceId)) {\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Validate Span Id, discard entire traceparent if invalid\r\n                if (!Traceparent.isValidSpanId(this.spanId)) {\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Save backCompat parentId\r\n                this.parentId = this.getBackCompatRequestId();\r\n            }\r\n        }\r\n        else if (parentId) {\r\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\r\n            this.parentId = parentId.slice(); // copy\r\n            var operationId = CorrelationIdManager.getRootId(parentId);\r\n            if (!Traceparent.isValidTraceId(operationId)) {\r\n                this.legacyRootId = operationId;\r\n                operationId = Util.w3cTraceId();\r\n            }\r\n            if (parentId.indexOf(\"|\") !== -1) {\r\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\r\n            }\r\n            this.traceId = operationId;\r\n            this.spanId = parentId;\r\n        }\r\n        else {\r\n            // Fallback default constructor\r\n            // if request does not contain any correlation headers, see case p2\r\n            this.traceId = Util.w3cTraceId();\r\n            this.spanId = Util.w3cTraceId().substr(0, 16);\r\n        }\r\n    }\r\n    Traceparent.isValidTraceId = function (id) {\r\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\r\n    };\r\n    Traceparent.isValidSpanId = function (id) {\r\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\r\n    };\r\n    Traceparent.prototype.getBackCompatRequestId = function () {\r\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\r\n    };\r\n    Traceparent.prototype.toString = function () {\r\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\r\n    };\r\n    Traceparent.prototype.updateSpanId = function () {\r\n        this.spanId = Util.w3cTraceId().substr(0, 16);\r\n    };\r\n    Traceparent.DEFAULT_TRACE_FLAG = \"00\";\r\n    Traceparent.DEFAULT_VERSION = \"00\";\r\n    return Traceparent;\r\n}());\r\nmodule.exports = Traceparent;\r\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar AutoCollectPerformance = require(\"./Performance\");\r\nvar AutoCollectHttpRequests = (function () {\r\n    function AutoCollectHttpRequests(client) {\r\n        if (!!AutoCollectHttpRequests.INSTANCE) {\r\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpRequests.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        // Autocorrelation requires automatic monitoring of incoming server requests\r\n        // Disabling autocollection but enabling autocorrelation will still enable\r\n        // request monitoring but will not produce request events\r\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\r\n            this.useAutoCorrelation(this._isAutoCorrelating);\r\n            this._initialize();\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\r\n        if (isEnabled && !this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\r\n        }\r\n        else if (!isEnabled && this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        }\r\n        this._isAutoCorrelating = isEnabled;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\r\n        return this._isAutoCorrelating;\r\n    };\r\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\r\n        if (!this._isAutoCorrelating) {\r\n            return;\r\n        }\r\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\r\n    };\r\n    AutoCollectHttpRequests.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var wrapOnRequestHandler = function (onRequest) {\r\n            if (!onRequest) {\r\n                return undefined;\r\n            }\r\n            if (typeof onRequest !== 'function') {\r\n                throw new Error('onRequest handler must be a function');\r\n            }\r\n            return function (request, response) {\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\r\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\r\n                if (request && shouldCollect) {\r\n                    // Set up correlation context\r\n                    var requestParser_1 = new HttpRequestParser(request);\r\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\r\n                    // Note: Check for if correlation is enabled happens within this method.\r\n                    // If not enabled, function will directly call the callback.\r\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n                        if (_this._isEnabled) {\r\n                            // Mark as auto collected\r\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\r\n                            // Auto collect request\r\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\r\n                        }\r\n                        // Add this request to the performance counter\r\n                        // Note: Check for if perf counters are enabled happens within this method.\r\n                        // TODO: Refactor common bits between trackRequest and countRequest so they can\r\n                        // be used together, even when perf counters are on, and request tracking is off\r\n                        AutoCollectPerformance.countRequest(request, response);\r\n                        if (typeof onRequest === \"function\") {\r\n                            onRequest(request, response);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    if (typeof onRequest === \"function\") {\r\n                        onRequest(request, response);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        // The `http.createServer` function will instantiate a new http.Server object.\r\n        // Inside the Server's constructor, it is using addListener to register the\r\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\r\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\r\n        //    the http.createServer call. Or\r\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\r\n        //    fresh server instance. This seems more stable for possible future changes as\r\n        //    it also covers the case where the Server might not use addListener to manage\r\n        //    the callback internally.\r\n        //    And also as long as the constructor uses addListener to add the handle, it is\r\n        //    ok to patch the addListener after construction only. Because if we would patch\r\n        //    the prototype one and the createServer method, we would wrap the handler twice\r\n        //    in case of the constructor call.\r\n        var wrapServerEventHandler = function (server) {\r\n            var originalAddListener = server.addListener.bind(server);\r\n            server.addListener = function (eventType, eventHandler) {\r\n                switch (eventType) {\r\n                    case 'request':\r\n                    case 'checkContinue':\r\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\r\n                    default:\r\n                        return originalAddListener(eventType, eventHandler);\r\n                }\r\n            };\r\n            // on is an alias to addListener only\r\n            server.on = server.addListener;\r\n        };\r\n        var originalHttpServer = http.createServer;\r\n        http.createServer = function (onRequest) {\r\n            // todo: get a pointer to the server so the IP address can be read from server.address\r\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n        var originalHttpsServer = https.createServer;\r\n        https.createServer = function (options, onRequest) {\r\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\r\n     */\r\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\r\n        // Overwrite correlation context with request parser results\r\n        if (correlationContext) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\r\n    };\r\n    /**\r\n     * Tracks a request by listening to the response 'finish' event\r\n     */\r\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\r\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        }\r\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\r\n        if (correlationContext && !_requestParser) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        // response listeners\r\n        if (telemetry.response.once) {\r\n            telemetry.response.once(\"finish\", function () {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\r\n            });\r\n        }\r\n        // track a failed request if an error is emitted\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"error\", function (error) {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add the target correlationId to the response headers, if not already provided.\r\n     */\r\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\r\n        if (client.config && client.config.correlationId &&\r\n            response.getHeader && response.setHeader && !response.headersSent) {\r\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\r\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\r\n        if (error) {\r\n            requestParser.onError(error, ellapsedMilliseconds);\r\n        }\r\n        else {\r\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\r\n        }\r\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\r\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\r\n        if (telemetry.tagOverrides) {\r\n            for (var key in telemetry.tagOverrides) {\r\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\r\n            }\r\n        }\r\n        var legacyRootId = requestParser.getLegacyRootId();\r\n        if (legacyRootId) {\r\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\r\n        }\r\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\r\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\r\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\r\n        client.trackRequest(requestTelemetry);\r\n    };\r\n    AutoCollectHttpRequests.prototype.dispose = function () {\r\n        AutoCollectHttpRequests.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n        CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        this._isAutoCorrelating = false;\r\n    };\r\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpRequests;\r\n}());\r\nmodule.exports = AutoCollectHttpRequests;\r\n//# sourceMappingURL=HttpRequests.js.map","module.exports = function () {\n    // see https://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\n    var origPrepareStackTrace = Error.prepareStackTrace;\n    Error.prepareStackTrace = function (_, stack) { return stack; };\n    var stack = (new Error()).stack;\n    Error.prepareStackTrace = origPrepareStackTrace;\n    return stack[2].getFileName();\n};\n","var path = require('path');\nvar parse = path.parse || require('path-parse');\n\nvar getNodeModulesDirs = function getNodeModulesDirs(absoluteStart, modules) {\n    var prefix = '/';\n    if ((/^([A-Za-z]:)/).test(absoluteStart)) {\n        prefix = '';\n    } else if ((/^\\\\\\\\/).test(absoluteStart)) {\n        prefix = '\\\\\\\\';\n    }\n\n    var paths = [absoluteStart];\n    var parsed = parse(absoluteStart);\n    while (parsed.dir !== paths[paths.length - 1]) {\n        paths.push(parsed.dir);\n        parsed = parse(parsed.dir);\n    }\n\n    return paths.reduce(function (dirs, aPath) {\n        return dirs.concat(modules.map(function (moduleDir) {\n            return path.resolve(prefix, aPath, moduleDir);\n        }));\n    }, []);\n};\n\nmodule.exports = function nodeModulesPaths(start, opts, request) {\n    var modules = opts && opts.moduleDirectory\n        ? [].concat(opts.moduleDirectory)\n        : ['node_modules'];\n\n    if (opts && typeof opts.paths === 'function') {\n        return opts.paths(\n            request,\n            start,\n            function () { return getNodeModulesDirs(start, modules); },\n            opts\n        );\n    }\n\n    var dirs = getNodeModulesDirs(start, modules);\n    return opts && opts.paths ? dirs.concat(opts.paths) : dirs;\n};\n","module.exports = function (x, opts) {\n    /**\n     * This file is purposefully a passthrough. It's expected that third-party\n     * environments will override it at runtime in order to inject special logic\n     * into `resolve` (by manipulating the options). One such example is the PnP\n     * code path in Yarn.\n     */\n\n    return opts || {};\n};\n","var current = (process.versions && process.versions.node && process.versions.node.split('.')) || [];\n\nfunction specifierIncluded(specifier) {\n    var parts = specifier.split(' ');\n    var op = parts.length > 1 ? parts[0] : '=';\n    var versionParts = (parts.length > 1 ? parts[1] : parts[0]).split('.');\n\n    for (var i = 0; i < 3; ++i) {\n        var cur = Number(current[i] || 0);\n        var ver = Number(versionParts[i] || 0);\n        if (cur === ver) {\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        }\n        if (op === '<') {\n            return cur < ver;\n        } else if (op === '>=') {\n            return cur >= ver;\n        } else {\n            return false;\n        }\n    }\n    return op === '>=';\n}\n\nfunction matchesRange(range) {\n    var specifiers = range.split(/ ?&& ?/);\n    if (specifiers.length === 0) { return false; }\n    for (var i = 0; i < specifiers.length; ++i) {\n        if (!specifierIncluded(specifiers[i])) { return false; }\n    }\n    return true;\n}\n\nfunction versionIncluded(specifierValue) {\n    if (typeof specifierValue === 'boolean') { return specifierValue; }\n    if (specifierValue && typeof specifierValue === 'object') {\n        for (var i = 0; i < specifierValue.length; ++i) {\n            if (matchesRange(specifierValue[i])) { return true; }\n        }\n        return false;\n    }\n    return matchesRange(specifierValue);\n}\n\nvar data = require('./core.json');\n\nvar core = {};\nfor (var mod in data) { // eslint-disable-line no-restricted-syntax\n    if (Object.prototype.hasOwnProperty.call(data, mod)) {\n        core[mod] = versionIncluded(data[mod]);\n    }\n}\nmodule.exports = core;\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","import {\n  Disposable,\n  languages,\n  StatusBarAlignment,\n  StatusBarItem,\n  TextEditor,\n  window,\n  // tslint:disable-next-line: no-implicit-dependencies\n} from \"vscode\";\nimport { LanguageResolver } from \"./LanguageResolver\";\nimport { LoggingService } from \"./LoggingService\";\nimport { PrettierVSCodeConfig } from \"./types\";\nimport { getConfig } from \"./util\";\n\nexport enum FormattingResult {\n  Success = \"check\",\n  Ignore = \"x\",\n  Error = \"alert\",\n}\n\nexport class StatusBarService {\n  private statusBarItem: StatusBarItem;\n  constructor(\n    private languageResolver: LanguageResolver,\n    private loggingService: LoggingService\n  ) {\n    // Setup the statusBarItem\n    this.statusBarItem = window.createStatusBarItem(\n      StatusBarAlignment.Right,\n      -1\n    );\n    this.statusBarItem.text = \"Prettier\";\n    this.statusBarItem.command = \"prettier.openOutput\";\n\n    this.toggleStatusBarItem(window.activeTextEditor);\n  }\n  public registerDisposables(): Disposable[] {\n    return [\n      // Keep track whether to show/hide the statusbar\n      window.onDidChangeActiveTextEditor((editor) => {\n        this.toggleStatusBarItem(editor);\n      }),\n    ];\n  }\n\n  /**\n   * Update the statusBarItem message and show the statusBarItem\n   *\n   * @param icon The the icon to use\n   */\n  public updateStatusBar(result: FormattingResult): void {\n    this.statusBarItem.text = `Prettier: $(${result.toString()})`;\n    this.statusBarItem.show();\n  }\n\n  private toggleStatusBarItem(editor: TextEditor | undefined): void {\n    if (editor !== undefined) {\n      // The function will be triggered every time the active \"editor\" instance changes\n      // It also triggers when we focus on the output panel or on the debug panel\n      // Both are seen as an \"editor\".\n      // The following check will ignore such panels\n      if (\n        [\"debug\", \"output\"].some((part) => editor.document.uri.scheme === part)\n      ) {\n        return;\n      }\n\n      this.loggingService.setOutputLevel(\"NONE\"); // No logs here, they are annoying.\n\n      const filePath = editor.document.isUntitled\n        ? undefined\n        : editor.document.fileName;\n      const score = languages.match(\n        this.languageResolver.allEnabledLanguages(filePath),\n        editor.document\n      );\n      const disabledLanguages: PrettierVSCodeConfig[\"disableLanguages\"] = getConfig(\n        editor.document.uri\n      ).disableLanguages;\n\n      if (\n        score > 0 &&\n        !disabledLanguages.includes(editor.document.languageId)\n      ) {\n        this.statusBarItem.show();\n      } else {\n        this.statusBarItem.hide();\n      }\n    } else {\n      this.statusBarItem.hide();\n    }\n\n    this.loggingService.setOutputLevel(\"INFO\"); // Resume logging\n  }\n}\n","import {\n  commands,\n  ExtensionContext,\n  // tslint:disable-next-line: no-implicit-dependencies\n} from \"vscode\";\nimport TelemetryReporter from \"vscode-extension-telemetry\";\nimport { createConfigFile } from \"./commands\";\nimport { ConfigResolver } from \"./ConfigResolver\";\nimport { IgnorerResolver } from \"./IgnorerResolver\";\nimport { LanguageResolver } from \"./LanguageResolver\";\nimport { LoggingService } from \"./LoggingService\";\nimport { ModuleResolver } from \"./ModuleResolver\";\nimport { NotificationService } from \"./NotificationService\";\nimport PrettierEditService from \"./PrettierEditService\";\nimport { StatusBarService } from \"./StatusBarService\";\nimport { TemplateService } from \"./TemplateService\";\n\n// the application insights key (also known as instrumentation key)\nconst telemetryKey = \"93c48152-e880-42c1-8652-30ad62ce8b49\";\nconst extensionName = process.env.EXTENSION_NAME || \"esbenp.prettier-vscode\";\nconst extensionVersion = process.env.EXTENSION_VERSION || \"0.0.0\";\n\n// telemetry reporter\nlet reporter: TelemetryReporter;\n\nexport function activate(context: ExtensionContext) {\n  const hrStart = process.hrtime();\n\n  const loggingService = new LoggingService();\n\n  loggingService.logInfo(`Extension Name: ${extensionName}.`);\n  loggingService.logInfo(`Extension Version: ${extensionVersion}.`);\n\n  // create telemetry reporter on extension activation\n  reporter = new TelemetryReporter(\n    extensionName,\n    extensionVersion,\n    telemetryKey\n  );\n\n  const templateService = new TemplateService(loggingService);\n  const createConfigFileFunc = createConfigFile(templateService);\n  const createConfigFileCommand = commands.registerCommand(\n    \"prettier.createConfigFile\",\n    createConfigFileFunc\n  );\n  const openOutputCommand = commands.registerCommand(\n    \"prettier.openOutput\",\n    () => {\n      loggingService.show();\n    }\n  );\n\n  const ignoreResolver = new IgnorerResolver(loggingService);\n  const configResolver = new ConfigResolver(loggingService);\n  const notificationService = new NotificationService(loggingService);\n\n  const moduleResolver = new ModuleResolver(\n    loggingService,\n    notificationService\n  );\n\n  const languageResolver = new LanguageResolver(moduleResolver);\n\n  const statusBarService = new StatusBarService(\n    languageResolver,\n    loggingService\n  );\n\n  const editService = new PrettierEditService(\n    moduleResolver,\n    languageResolver,\n    ignoreResolver,\n    configResolver,\n    loggingService,\n    notificationService,\n    statusBarService\n  );\n  editService.registerFormatter();\n\n  context.subscriptions.push(\n    editService,\n    reporter,\n    createConfigFileCommand,\n    openOutputCommand,\n    ...editService.registerDisposables(),\n    ...statusBarService.registerDisposables()\n  );\n\n  const hrEnd = process.hrtime(hrStart);\n  reporter.sendTelemetryEvent(\"extensionActivated\", undefined, {\n    activationTime: hrEnd[1] / 1000000,\n  });\n}\n\nexport function deactivate() {\n  // This will ensure all pending events get flushed\n  reporter.dispose();\n}\n","/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar vscode = require(\"vscode\");\r\nvar appInsights = require(\"applicationinsights\");\r\nvar TelemetryReporter = /** @class */ (function () {\r\n    // tslint:disable-next-line\r\n    function TelemetryReporter(extensionId, extensionVersion, key) {\r\n        var _this = this;\r\n        this.extensionId = extensionId;\r\n        this.extensionVersion = extensionVersion;\r\n        this.userOptIn = false;\r\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\r\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\r\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\r\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\r\n        }\r\n        this.updateUserOptIn(key);\r\n        this.configListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\r\n    }\r\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\r\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\r\n        if (this.userOptIn !== config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true)) {\r\n            this.userOptIn = config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true);\r\n            if (this.userOptIn) {\r\n                this.createAppInsightsClient(key);\r\n            }\r\n            else {\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\r\n        //check if another instance is already initialized\r\n        if (appInsights.defaultClient) {\r\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\r\n            // no other way to enable offline mode\r\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\r\n        }\r\n        else {\r\n            appInsights.setup(key)\r\n                .setAutoCollectRequests(false)\r\n                .setAutoCollectPerformance(false)\r\n                .setAutoCollectExceptions(false)\r\n                .setAutoCollectDependencies(false)\r\n                .setAutoDependencyCorrelation(false)\r\n                .setAutoCollectConsole(false)\r\n                .setUseDiskRetryCaching(true)\r\n                .start();\r\n            this.appInsightsClient = appInsights.defaultClient;\r\n        }\r\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\r\n        if (vscode && vscode.env) {\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\r\n        }\r\n        //check if it's an Asimov key to change the endpoint\r\n        if (key && key.indexOf('AIF-') === 0) {\r\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\r\n        }\r\n    };\r\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    TelemetryReporter.prototype.getCommonProperties = function () {\r\n        var commonProperties = Object.create(null);\r\n        commonProperties['common.os'] = os.platform();\r\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\r\n        commonProperties['common.extname'] = this.extensionId;\r\n        commonProperties['common.extversion'] = this.extensionVersion;\r\n        if (vscode && vscode.env) {\r\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\r\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\r\n            commonProperties['common.vscodeversion'] = vscode.version;\r\n        }\r\n        return commonProperties;\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: properties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryException = function (error, properties, measurements) {\r\n        if (this.userOptIn && error && this.appInsightsClient) {\r\n            this.appInsightsClient.trackException({\r\n                exception: error,\r\n                properties: properties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + error.name + \" \" + error.message + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.configListener.dispose();\r\n        var flushEventsToLogger = new Promise(function (resolve) {\r\n            if (!_this.logStream) {\r\n                return resolve(void 0);\r\n            }\r\n            _this.logStream.on('finish', resolve);\r\n            _this.logStream.end();\r\n        });\r\n        var flushEventsToAI = new Promise(function (resolve) {\r\n            if (_this.appInsightsClient) {\r\n                _this.appInsightsClient.flush({\r\n                    callback: function () {\r\n                        // all data flushed\r\n                        _this.appInsightsClient = undefined;\r\n                        resolve(void 0);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(void 0);\r\n            }\r\n        });\r\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\r\n    };\r\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\r\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\r\n    return TelemetryReporter;\r\n}());\r\nexports.default = TelemetryReporter;\r\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\r\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\r\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\r\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\r\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\r\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\r\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\r\nvar Logging = require(\"./Library/Logging\");\r\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\r\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\r\n// We export these imports so that SDK users may use these classes directly.\r\n// They're exposed using \"export import\" so that types are passed along as expected\r\nexports.TelemetryClient = require(\"./Library/NodeClient\");\r\nexports.Contracts = require(\"./Declarations/Contracts\");\r\nvar DistributedTracingModes;\r\n(function (DistributedTracingModes) {\r\n    /**\r\n     * (Default) Send Application Insights correlation headers\r\n     */\r\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\r\n    /**\r\n     * Send both W3C Trace Context headers and back-compatibility Application Insights headers\r\n     */\r\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\r\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\r\n// Default autocollection configuration\r\nvar _isConsole = true;\r\nvar _isConsoleLog = false;\r\nvar _isExceptions = true;\r\nvar _isPerformance = true;\r\nvar _isRequests = true;\r\nvar _isDependencies = true;\r\nvar _isDiskRetry = true;\r\nvar _isCorrelating = true;\r\nvar _forceClsHooked;\r\nvar _isSendingLiveMetrics = false; // Off by default\r\nvar _isNativePerformance = true;\r\nvar _disabledExtendedMetrics;\r\nvar _diskRetryInterval = undefined;\r\nvar _diskRetryMaxBytes = undefined;\r\nvar _console;\r\nvar _exceptions;\r\nvar _performance;\r\nvar _nativePerformance;\r\nvar _serverRequests;\r\nvar _clientRequests;\r\nvar _isStarted = false;\r\nvar _performanceLiveMetrics;\r\n/**\r\n * Initializes the default client. Should be called after setting\r\n * configuration options.\r\n *\r\n * @param instrumentationKey the instrumentation key to use. Optional, if\r\n * this is not specified, the value will be read from the environment\r\n * variable APPINSIGHTS_INSTRUMENTATIONKEY.\r\n * @returns {Configuration} the configuration class to initialize\r\n * and start the SDK.\r\n */\r\nfunction setup(instrumentationKey) {\r\n    if (!exports.defaultClient) {\r\n        exports.defaultClient = new exports.TelemetryClient(instrumentationKey);\r\n        _console = new AutoCollectConsole(exports.defaultClient);\r\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\r\n        _performance = new AutoCollectPerformance(exports.defaultClient);\r\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\r\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\r\n        if (!_nativePerformance) {\r\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\r\n        }\r\n    }\r\n    else {\r\n        Logging.info(\"The default client is already setup\");\r\n    }\r\n    if (exports.defaultClient && exports.defaultClient.channel) {\r\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n    }\r\n    return Configuration;\r\n}\r\nexports.setup = setup;\r\n/**\r\n * Starts automatic collection of telemetry. Prior to calling start no\r\n * telemetry will be *automatically* collected, though manual collection\r\n * is enabled.\r\n * @returns {ApplicationInsights} this class\r\n */\r\nfunction start() {\r\n    if (!!exports.defaultClient) {\r\n        _isStarted = true;\r\n        _console.enable(_isConsole, _isConsoleLog);\r\n        _exceptions.enable(_isExceptions);\r\n        _performance.enable(_isPerformance);\r\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\r\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\r\n        _serverRequests.enable(_isRequests);\r\n        _clientRequests.enable(_isDependencies);\r\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\r\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\r\n        }\r\n    }\r\n    else {\r\n        Logging.warn(\"Start cannot be called before setup\");\r\n    }\r\n    return Configuration;\r\n}\r\nexports.start = start;\r\n/**\r\n * Returns an object that is shared across all code handling a given request.\r\n * This can be used similarly to thread-local storage in other languages.\r\n * Properties set on this object will be available to telemetry processors.\r\n *\r\n * Do not store sensitive information here.\r\n * Custom properties set on this object can be exposed in a future SDK\r\n * release via outgoing HTTP headers.\r\n * This is to allow for correlating data cross-component.\r\n *\r\n * This method will return null if automatic dependency correlation is disabled.\r\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\r\n */\r\nfunction getCorrelationContext() {\r\n    if (_isCorrelating) {\r\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\r\n    }\r\n    return null;\r\n}\r\nexports.getCorrelationContext = getCorrelationContext;\r\n/**\r\n * Returns a function that will get the same correlation context within its\r\n * function body as the code executing this function.\r\n * Use this method if automatic dependency correlation is not propagating\r\n * correctly to an asynchronous callback.\r\n */\r\nfunction wrapWithCorrelationContext(fn) {\r\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\r\n}\r\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\r\n/**\r\n * The active configuration for global SDK behaviors, such as autocollection.\r\n */\r\nvar Configuration = (function () {\r\n    function Configuration() {\r\n    }\r\n    /**\r\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\r\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\r\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\r\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\r\n     * services. Default=AI\r\n    */\r\n    Configuration.setDistributedTracingMode = function (value) {\r\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\r\n     * @param value if true logger activity will be sent to Application Insights\r\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\r\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\r\n        _isConsole = value;\r\n        _isConsoleLog = collectConsoleLog;\r\n        if (_isStarted) {\r\n            _console.enable(value, collectConsoleLog);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of exception tracking (enabled by default)\r\n     * @param value if true uncaught exceptions will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectExceptions = function (value) {\r\n        _isExceptions = value;\r\n        if (_isStarted) {\r\n            _exceptions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of performance tracking (enabled by default)\r\n     * @param value if true performance counters will be collected every second and sent to Application Insights\r\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\r\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\r\n        _isPerformance = value;\r\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);\r\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\r\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\r\n        if (_isStarted) {\r\n            _performance.enable(value);\r\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true requests will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectRequests = function (value) {\r\n        _isRequests = value;\r\n        if (_isStarted) {\r\n            _serverRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of dependency tracking (enabled by default)\r\n     * @param value if true dependencies will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectDependencies = function (value) {\r\n        _isDependencies = value;\r\n        if (_isStarted) {\r\n            _clientRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of automatic dependency correlation (enabled by default)\r\n     * @param value if true dependencies will be correlated with requests\r\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\r\n        _isCorrelating = value;\r\n        _forceClsHooked = useAsyncHooks;\r\n        if (_isStarted) {\r\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\r\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        _isDiskRetry = value;\r\n        _diskRetryInterval = resendInterval;\r\n        _diskRetryMaxBytes = maxBytesOnDisk;\r\n        if (exports.defaultClient && exports.defaultClient.channel) {\r\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables debug and warning logging for AppInsights itself.\r\n     * @param enableDebugLogging if true, enables debug logging\r\n     * @param enableWarningLogging if true, enables warning logging\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\r\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\r\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\r\n        Logging.enableDebug = enableDebugLogging;\r\n        Logging.disableWarnings = !enableWarningLogging;\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables communication with Application Insights Live Metrics.\r\n     * @param enable if true, enables communication with the live metrics service\r\n     */\r\n    Configuration.setSendLiveMetrics = function (enable) {\r\n        if (enable === void 0) { enable = false; }\r\n        if (!exports.defaultClient) {\r\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\r\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\r\n            return Configuration;\r\n        }\r\n        if (!exports.liveMetricsClient) {\r\n            // No qps client exists. Create one and prepare it to be enabled at .start()\r\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config.instrumentationKey);\r\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\r\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\r\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via quickPulseTelemetryProcessor\r\n            _isSendingLiveMetrics = enable;\r\n        }\r\n        else {\r\n            // qps client already exists; enable/disable it\r\n            exports.liveMetricsClient.enable(enable);\r\n        }\r\n        return Configuration;\r\n    };\r\n    // Convenience shortcut to ApplicationInsights.start\r\n    Configuration.start = start;\r\n    return Configuration;\r\n}());\r\nexports.Configuration = Configuration;\r\n/**\r\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\r\n*/\r\nfunction dispose() {\r\n    exports.defaultClient = null;\r\n    _isStarted = false;\r\n    if (_console) {\r\n        _console.dispose();\r\n    }\r\n    if (_exceptions) {\r\n        _exceptions.dispose();\r\n    }\r\n    if (_performance) {\r\n        _performance.dispose();\r\n    }\r\n    if (_nativePerformance) {\r\n        _nativePerformance.dispose();\r\n    }\r\n    if (_serverRequests) {\r\n        _serverRequests.dispose();\r\n    }\r\n    if (_clientRequests) {\r\n        _clientRequests.dispose();\r\n    }\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bunyan = require(\"./bunyan.pub\");\nexports.bunyan = bunyan;\nvar consolePub = require(\"./console.pub\");\nexports.console = consolePub;\nvar mongodbCore = require(\"./mongodb-core.pub\");\nexports.mongodbCore = mongodbCore;\nvar mongodb = require(\"./mongodb.pub\");\nexports.mongodb = mongodb;\nvar mysql = require(\"./mysql.pub\");\nexports.mysql = mysql;\nvar pgPool = require(\"./pg-pool.pub\");\nexports.pgPool = pgPool;\nvar pg = require(\"./pg.pub\");\nexports.pg = pg;\nvar redis = require(\"./redis.pub\");\nexports.redis = redis;\nvar winston = require(\"./winston.pub\");\nexports.winston = winston;\nfunction enable() {\n    bunyan.enable();\n    consolePub.enable();\n    mongodbCore.enable();\n    mongodb.enable();\n    mysql.enable();\n    pg.enable();\n    pgPool.enable();\n    redis.enable();\n    winston.enable();\n}\nexports.enable = enable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar bunyanPatchFunction = function (originalBunyan) {\n    var originalEmit = originalBunyan.prototype._emit;\n    originalBunyan.prototype._emit = function (rec, noemit) {\n        var ret = originalEmit.apply(this, arguments);\n        if (!noemit) {\n            var str = ret;\n            if (!str) {\n                str = originalEmit.call(this, rec, true);\n            }\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\n        }\n        return ret;\n    };\n    return originalBunyan;\n};\nexports.bunyan = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: bunyanPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\n}\nexports.enable = enable;\n//# sourceMappingURL=bunyan.pub.js.map","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar stream_1 = require(\"stream\");\nvar consolePatchFunction = function (originalConsole) {\n    var aiLoggingOutStream = new stream_1.Writable();\n    var aiLoggingErrStream = new stream_1.Writable();\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\n    // We create a version which publishes to the channel and also to stdout/stderr\n    aiLoggingOutStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\n        return true;\n    };\n    aiLoggingErrStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\n        return true;\n    };\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\n    var _loop_1 = function (method) {\n        var originalMethod = originalConsole[method];\n        if (originalMethod) {\n            originalConsole[method] = function () {\n                if (aiLoggingConsole[method]) {\n                    try {\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\n                    }\n                    catch (e) {\n                        // Ignore errors; allow the original method to throw if necessary\n                    }\n                }\n                return originalMethod.apply(originalConsole, arguments);\n            };\n        }\n    };\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\n        var method = consoleMethods_1[_i];\n        _loop_1(method);\n    }\n    return originalConsole;\n};\nexports.console = {\n    versionSpecifier: \">= 4.0.0\",\n    patch: consolePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\n    // Force patching of console\n    /* tslint:disable-next-line:no-var-requires */\n    require(\"console\");\n}\nexports.enable = enable;\n//# sourceMappingURL=console.pub.js.map","module.exports = require(\"stream\");","module.exports = require(\"console\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbcorePatchFunction = function (originalMongoCore) {\n    var originalConnect = originalMongoCore.Server.prototype.connect;\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.pool.write;\n        this.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.pool.logout;\n        this.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongoCore;\n};\nexports.mongoCore = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: mongodbcorePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbPatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument({\n        operationIdGenerator: {\n            next: function () {\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n            },\n        },\n    });\n    var eventMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n    });\n    return originalMongo;\n};\nvar mongodb3PatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\nvar mongodbcorePatchFunction = function (originalMongo) {\n    var originalConnect = originalMongo.Server.prototype.connect;\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.coreTopology.s.pool.write;\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.coreTopology.s.pool.logout;\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongo;\n};\nvar mongodb330PatchFunction = function (originalMongo) {\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\nexports.mongo2 = {\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\n    patch: mongodbPatchFunction,\n};\nexports.mongo3 = {\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\n    patch: mongodb3PatchFunction,\n};\nexports.mongo330 = {\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\n    patch: mongodb330PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar path = require(\"path\");\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\n    // The `name` passed in here is for debugging purposes,\n    // to help distinguish which object is being patched.\n    var patchObjectFunction = function (obj, name) {\n        return function (func, cbWrapper) {\n            var originalFunc = obj[func];\n            if (originalFunc) {\n                obj[func] = function mysqlContextPreserver() {\n                    // Find the callback, if there is one\n                    var cbidx = arguments.length - 1;\n                    for (var i = arguments.length - 1; i >= 0; --i) {\n                        if (typeof arguments[i] === \"function\") {\n                            cbidx = i;\n                            break;\n                        }\n                        else if (typeof arguments[i] !== \"undefined\") {\n                            break;\n                        }\n                    }\n                    var cb = arguments[cbidx];\n                    var resultContainer = { result: null, startTime: null };\n                    if (typeof cb === \"function\") {\n                        // Preserve context on the callback.\n                        // If this is one of the functions that we want to track,\n                        // then wrap the callback with the tracking wrapper\n                        if (cbWrapper) {\n                            resultContainer.startTime = process.hrtime();\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\n                        }\n                        else {\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\n                        }\n                    }\n                    var result = originalFunc.apply(this, arguments);\n                    resultContainer.result = result;\n                    return result;\n                };\n            }\n        };\n    };\n    var patchClassMemberFunction = function (classObject, name) {\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\n    };\n    var connectionCallbackFunctions = [\n        \"connect\", \"changeUser\",\n        \"ping\", \"statistics\", \"end\",\n    ];\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\n    // Connection.createQuery is a static method\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\n        return function (err) {\n            var hrDuration = process.hrtime(resultContainer.startTime);\n            /* tslint:disable-next-line:no-bitwise */\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration });\n            cb.apply(this, arguments);\n        };\n    });\n    var poolCallbackFunctions = [\n        \"_enqueueCallback\",\n    ];\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\n    return originalMysql;\n};\nexports.mysql = {\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\n    patch: mysqlPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 81;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 82;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nfunction postgresPool1PatchFunction(originalPgPool) {\n    var originalConnect = originalPgPool.prototype.connect;\n    originalPgPool.prototype.connect = function connect(callback) {\n        if (callback) {\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\n        }\n        return originalConnect.apply(this, arguments);\n    };\n    return originalPgPool;\n}\nexports.postgresPool1 = {\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\n    patch: postgresPool1PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar events_1 = require(\"events\");\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                // emulate weird internal behavior in pg@6\n                // on success, the callback is called *before* query events are emitted\n                // on failure, the callback is called *instead of* the query emitting events\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\n                // since we are always inserting ourselves as a callback, we have to restore the original\n                // behavior if the user didn't provide one themselves\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // this function takes too many variations of arguments.\n        // this patches any provided callback or creates a new callback if one wasn't provided.\n        // since the callback is always called (if provided) in addition to always having a Promisified\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callback = patchCallback(callback);\n                }\n                else {\n                    data.query.text = config;\n                    // pg v6 will, for some reason, accept both\n                    // client.query(\"...\", undefined, () => {...})\n                    // **and**\n                    // client.query(\"...\", () => {...});\n                    // Internally, precedence is given to the callback argument\n                    if (callback) {\n                        callback = patchCallback(callback);\n                    }\n                    else {\n                        values = patchCallback(values);\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    values = patchCallback(values);\n                }\n                else {\n                    config.callback = patchCallback(config.callback);\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        return queryResult;\n    };\n    return originalPg;\n}\nfunction postgres7PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var _this = this;\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // Only try to wrap the callback if it is a function. We want to keep the same\n        // behavior of returning a promise only if no callback is provided. Wrapping\n        // a nonfunction makes it a function and pg will interpret it as a callback\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callbackProvided = typeof callback === \"function\";\n                    callback = callback ? patchCallback(callback) : callback;\n                }\n                else {\n                    data.query.text = config;\n                    if (callback) {\n                        callbackProvided = typeof callback === \"function\";\n                        callback = callbackProvided ? patchCallback(callback) : callback;\n                    }\n                    else {\n                        callbackProvided = typeof values === \"function\";\n                        values = callbackProvided ? patchCallback(values) : values;\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callbackProvided = typeof callback === \"function\";\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    callbackProvided = typeof values === \"function\";\n                    values = callbackProvided ? patchCallback(values) : values;\n                }\n                else {\n                    callbackProvided = typeof config.callback === \"function\";\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        if (!callbackProvided) {\n            // no callback, so create a pass along promise\n            return queryResult\n                // pass resolved promise after publishing the event\n                .then(function (result) {\n                patchCallback()(undefined, result);\n                return new _this._Promise(function (resolve, reject) {\n                    resolve(result);\n                });\n            })\n                // pass along rejected promise after publishing the error\n                .catch(function (error) {\n                patchCallback()(error, undefined);\n                return new _this._Promise(function (resolve, reject) {\n                    reject(error);\n                });\n            });\n        }\n        return queryResult;\n    };\n    return originalPg;\n}\nexports.postgres6 = {\n    versionSpecifier: \"6.*\",\n    patch: postgres6PatchFunction,\n};\nexports.postgres7 = {\n    versionSpecifier: \"7.*\",\n    patch: postgres7PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres7);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg.pub.js.map","module.exports = require(\"events\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar redisPatchFunction = function (originalRedis) {\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\n    // Note: This is mixing together both context tracking and dependency tracking\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\n        if (commandObj) {\n            var cb_1 = commandObj.callback;\n            if (!cb_1 || !cb_1.pubsubBound) {\n                var address_1 = this.address;\n                var startTime_1 = process.hrtime();\n                // Note: augmenting the callback on internal_send_command is correct for context\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\n                // which higher levels expect in some cases\n                // However, the only other option is to intercept every individual command.\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\n                    var hrDuration = process.hrtime(startTime_1);\n                    /* tslint:disable-next-line:no-bitwise */\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result });\n                    if (typeof cb_1 === \"function\") {\n                        cb_1.apply(this, arguments);\n                    }\n                });\n                commandObj.callback.pubsubBound = true;\n            }\n        }\n        return originalSend.call(this, commandObj);\n    };\n    return originalRedis;\n};\nexports.redis = {\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\n    patch: redisPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\n// register a \"filter\" with each logger that publishes the data about to be logged\nvar winston2PatchFunction = function (originalWinston) {\n    var originalLog = originalWinston.Logger.prototype.log;\n    var curLevels;\n    var loggingFilter = function (level, message, meta) {\n        var levelKind;\n        if (curLevels === originalWinston.config.npm.levels) {\n            levelKind = \"npm\";\n        }\n        else if (curLevels === originalWinston.config.syslog.levels) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\n        return message;\n    };\n    // whenever someone logs, ensure our filter comes last\n    originalWinston.Logger.prototype.log = function log() {\n        curLevels = this.levels;\n        if (!this.filters || this.filters.length === 0) {\n            this.filters = [loggingFilter];\n        }\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\n            this.filters.push(loggingFilter);\n        }\n        return originalLog.apply(this, arguments);\n    };\n    return originalWinston;\n};\nvar winston3PatchFunction = function (originalWinston) {\n    var mapLevelToKind = function (winston, level) {\n        var levelKind;\n        if (winston.config.npm.levels[level] != null) {\n            levelKind = \"npm\";\n        }\n        else if (winston.config.syslog.levels[level] != null) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        return levelKind;\n    };\n    var AppInsightsTransport = /** @class */ (function (_super) {\n        __extends(AppInsightsTransport, _super);\n        function AppInsightsTransport(winston, opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.winston = winston;\n            return _this;\n        }\n        AppInsightsTransport.prototype.log = function (info, callback) {\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\n            var levelKind = mapLevelToKind(this.winston, level);\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\n            for (var key in splat) {\n                if (splat.hasOwnProperty(key)) {\n                    meta[key] = splat[key];\n                }\n            }\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\n            callback();\n        };\n        return AppInsightsTransport;\n    }(originalWinston.Transport));\n    // Patch this function\n    function patchedConfigure() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n    }\n    var origCreate = originalWinston.createLogger;\n    originalWinston.createLogger = function patchedCreate() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        // Add custom app insights transport to the end\n        // Remark: Configure is not available until after createLogger()\n        // and the Logger prototype is not exported in winston 3.x, so\n        // patch both createLogger and configure. Could also call configure\n        // again after createLogger, but that would cause configure to be called\n        // twice per create.\n        var result = origCreate.apply(this, arguments);\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n        var origConfigure = result.configure;\n        result.configure = function () {\n            origConfigure.apply(this, arguments);\n            patchedConfigure.apply(this, arguments);\n        };\n        return result;\n    };\n    var origRootConfigure = originalWinston.createLogger;\n    originalWinston.configure = function () {\n        origRootConfigure.apply(this, arguments);\n        patchedConfigure.apply(this, arguments);\n    };\n    originalWinston.add(new AppInsightsTransport(originalWinston));\n    return originalWinston;\n};\nexports.winston3 = {\n    versionSpecifier: \"3.x\",\n    patch: winston3PatchFunction,\n};\nexports.winston2 = {\n    versionSpecifier: \"2.x\",\n    patch: winston2PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\n}\nexports.enable = enable;\n//# sourceMappingURL=winston.pub.js.map","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","module.exports = require(\"async_hooks\");","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","module.exports = require(\"net\");","module.exports = require(\"dns\");","module.exports = require(\"crypto\");","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","\"use strict\";\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectConsole = (function () {\r\n    function AutoCollectConsole(client) {\r\n        if (!!AutoCollectConsole.INSTANCE) {\r\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\r\n        }\r\n        this._client = client;\r\n        AutoCollectConsole.INSTANCE = this;\r\n    }\r\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\r\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectConsole.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectConsole.prototype.dispose = function () {\r\n        AutoCollectConsole.INSTANCE = null;\r\n        this.enable(false, false);\r\n    };\r\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\r\n    return AutoCollectConsole;\r\n}());\r\nmodule.exports = AutoCollectConsole;\r\n//# sourceMappingURL=Console.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        // Message can have a trailing newline\r\n        var message = event.data.message;\r\n        if (message.lastIndexOf(\"\\n\") == message.length - 1) {\r\n            message = message.substring(0, message.length - 1);\r\n        }\r\n        client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Generated_1 = require(\"./Generated\");\r\nvar RemoteDependencyDataConstants = (function () {\r\n    function RemoteDependencyDataConstants() {\r\n    }\r\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\r\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\r\n    return RemoteDependencyDataConstants;\r\n}());\r\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\r\nfunction domainSupportsProperties(domain) {\r\n    return \"properties\" in domain ||\r\n        domain instanceof Generated_1.EventData ||\r\n        domain instanceof Generated_1.ExceptionData ||\r\n        domain instanceof Generated_1.MessageData ||\r\n        domain instanceof Generated_1.MetricData ||\r\n        domain instanceof Generated_1.PageViewData ||\r\n        domain instanceof Generated_1.RemoteDependencyData ||\r\n        domain instanceof Generated_1.RequestData;\r\n}\r\nexports.domainSupportsProperties = domainSupportsProperties;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of AvailabilityData represent the result of executing an availability test.\r\n */\r\nvar AvailabilityData = (function (_super) {\r\n    __extends(AvailabilityData, _super);\r\n    function AvailabilityData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return AvailabilityData;\r\n}(Domain));\r\nmodule.exports = AvailabilityData;\r\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nvar ContextTagKeys = (function () {\r\n    function ContextTagKeys() {\r\n        this.applicationVersion = \"ai.application.ver\";\r\n        this.deviceId = \"ai.device.id\";\r\n        this.deviceLocale = \"ai.device.locale\";\r\n        this.deviceModel = \"ai.device.model\";\r\n        this.deviceOEMName = \"ai.device.oemName\";\r\n        this.deviceOSVersion = \"ai.device.osVersion\";\r\n        this.deviceType = \"ai.device.type\";\r\n        this.locationIp = \"ai.location.ip\";\r\n        this.operationId = \"ai.operation.id\";\r\n        this.operationName = \"ai.operation.name\";\r\n        this.operationParentId = \"ai.operation.parentId\";\r\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\r\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\r\n        this.sessionId = \"ai.session.id\";\r\n        this.sessionIsFirst = \"ai.session.isFirst\";\r\n        this.userAccountId = \"ai.user.accountId\";\r\n        this.userId = \"ai.user.id\";\r\n        this.userAuthUserId = \"ai.user.authUserId\";\r\n        this.cloudRole = \"ai.cloud.role\";\r\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\r\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\r\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\r\n        this.internalNodeName = \"ai.internal.nodeName\";\r\n    }\r\n    return ContextTagKeys;\r\n}());\r\nmodule.exports = ContextTagKeys;\r\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Base = require(\"./Base\");\r\n\"use strict\";\r\n/**\r\n * Data struct to contain both B and C sections.\r\n */\r\nvar Data = (function (_super) {\r\n    __extends(Data, _super);\r\n    function Data() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return Data;\r\n}(Base));\r\nmodule.exports = Data;\r\n//# sourceMappingURL=Data.js.map","\"use strict\";\r\n// THIS FILE WAS AUTOGENERATED\r\nvar DataPointType = require(\"./DataPointType\");\r\n\"use strict\";\r\n/**\r\n * Metric data single measurement.\r\n */\r\nvar DataPoint = (function () {\r\n    function DataPoint() {\r\n        this.kind = DataPointType.Measurement;\r\n    }\r\n    return DataPoint;\r\n}());\r\nmodule.exports = DataPoint;\r\n//# sourceMappingURL=DataPoint.js.map","\"use strict\";\r\n/**\r\n * System variables for a telemetry item.\r\n */\r\nvar Envelope = (function () {\r\n    function Envelope() {\r\n        this.ver = 1;\r\n        this.sampleRate = 100.0;\r\n        this.tags = {};\r\n    }\r\n    return Envelope;\r\n}());\r\nmodule.exports = Envelope;\r\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\r\n */\r\nvar ExceptionData = (function (_super) {\r\n    __extends(ExceptionData, _super);\r\n    function ExceptionData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.exceptions = [];\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return ExceptionData;\r\n}(Domain));\r\nmodule.exports = ExceptionData;\r\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\r\n/**\r\n * Exception details of the exception in a chain.\r\n */\r\nvar ExceptionDetails = (function () {\r\n    function ExceptionDetails() {\r\n        this.hasFullStack = true;\r\n        this.parsedStack = [];\r\n    }\r\n    return ExceptionDetails;\r\n}());\r\nmodule.exports = ExceptionDetails;\r\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\r\n */\r\nvar MessageData = (function (_super) {\r\n    __extends(MessageData, _super);\r\n    function MessageData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MessageData;\r\n}(Domain));\r\nmodule.exports = MessageData;\r\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\r\n */\r\nvar MetricData = (function (_super) {\r\n    __extends(MetricData, _super);\r\n    function MetricData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.metrics = [];\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MetricData;\r\n}(Domain));\r\nmodule.exports = MetricData;\r\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar EventData = require(\"./EventData\");\r\n\"use strict\";\r\n/**\r\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\r\n */\r\nvar PageViewData = (function (_super) {\r\n    __extends(PageViewData, _super);\r\n    function PageViewData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return PageViewData;\r\n}(EventData));\r\nmodule.exports = PageViewData;\r\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\r\n */\r\nvar RemoteDependencyData = (function (_super) {\r\n    __extends(RemoteDependencyData, _super);\r\n    function RemoteDependencyData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.success = true;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RemoteDependencyData;\r\n}(Domain));\r\nmodule.exports = RemoteDependencyData;\r\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\r\n */\r\nvar RequestData = (function (_super) {\r\n    __extends(RequestData, _super);\r\n    function RequestData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RequestData;\r\n}(Domain));\r\nmodule.exports = RequestData;\r\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nvar SeverityLevel;\r\n(function (SeverityLevel) {\r\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\r\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\r\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\r\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\r\n})(SeverityLevel || (SeverityLevel = {}));\r\nmodule.exports = SeverityLevel;\r\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Stack frame information.\r\n */\r\nvar StackFrame = (function () {\r\n    function StackFrame() {\r\n    }\r\n    return StackFrame;\r\n}());\r\nmodule.exports = StackFrame;\r\n//# sourceMappingURL=StackFrame.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./TelemetryType\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\r\n * @param type Type to convert to BaseData string\r\n */\r\nfunction telemetryTypeToBaseType(type) {\r\n    switch (type) {\r\n        case TelemetryType.Event:\r\n            return \"EventData\";\r\n        case TelemetryType.Exception:\r\n            return \"ExceptionData\";\r\n        case TelemetryType.Trace:\r\n            return \"MessageData\";\r\n        case TelemetryType.Metric:\r\n            return \"MetricData\";\r\n        case TelemetryType.Request:\r\n            return \"RequestData\";\r\n        case TelemetryType.Dependency:\r\n            return \"RemoteDependencyData\";\r\n    }\r\n    return undefined;\r\n}\r\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\r\n/**\r\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\r\n * @param baseType BaseData string to convert to TelemetryType\r\n */\r\nfunction baseTypeToTelemetryType(baseType) {\r\n    switch (baseType) {\r\n        case \"EventData\":\r\n            return TelemetryType.Event;\r\n        case \"ExceptionData\":\r\n            return TelemetryType.Exception;\r\n        case \"MessageData\":\r\n            return TelemetryType.Trace;\r\n        case \"MetricData\":\r\n            return TelemetryType.Metric;\r\n        case \"RequestData\":\r\n            return TelemetryType.Request;\r\n        case \"RemoteDependencyData\":\r\n            return TelemetryType.Dependency;\r\n    }\r\n    return undefined;\r\n}\r\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\r\nexports.TelemetryTypeString = {\r\n    Event: \"EventData\",\r\n    Exception: \"ExceptionData\",\r\n    Trace: \"MessageData\",\r\n    Metric: \"MetricData\",\r\n    Request: \"RequestData\",\r\n    Dependency: \"RemoteDependencyData\"\r\n};\r\n/**\r\n * Telemetry types supported by this SDK\r\n */\r\nvar TelemetryType;\r\n(function (TelemetryType) {\r\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\r\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\r\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\r\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\r\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\r\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\r\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\r\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\r\nvar bunyanToAILevelMap = {\r\n    10: Contracts_1.SeverityLevel.Verbose,\r\n    20: Contracts_1.SeverityLevel.Verbose,\r\n    30: Contracts_1.SeverityLevel.Information,\r\n    40: Contracts_1.SeverityLevel.Warning,\r\n    50: Contracts_1.SeverityLevel.Error,\r\n    60: Contracts_1.SeverityLevel.Critical,\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = bunyanToAILevelMap[event.data.level];\r\n        client.trackTrace({ message: event.data.result, severity: AIlevel });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar winstonToAILevelMap = {\r\n    syslog: function (og) {\r\n        var map = {\r\n            emerg: Contracts_1.SeverityLevel.Critical,\r\n            alert: Contracts_1.SeverityLevel.Critical,\r\n            crit: Contracts_1.SeverityLevel.Critical,\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warning: Contracts_1.SeverityLevel.Warning,\r\n            notice: Contracts_1.SeverityLevel.Information,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            debug: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    npm: function (og) {\r\n        var map = {\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warn: Contracts_1.SeverityLevel.Warning,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            verbose: Contracts_1.SeverityLevel.Verbose,\r\n            debug: Contracts_1.SeverityLevel.Verbose,\r\n            silly: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    unknown: function (og) {\r\n        return Contracts_1.SeverityLevel.Information;\r\n    }\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\r\n        client.trackTrace({\r\n            message: event.data.message,\r\n            severity: AIlevel,\r\n            properties: event.data.meta\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\r\nvar AutoCollectExceptions = (function () {\r\n    function AutoCollectExceptions(client) {\r\n        if (!!AutoCollectExceptions.INSTANCE) {\r\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectExceptions.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    Object.defineProperty(AutoCollectExceptions, \"UNCAUGHT_EXCEPTION_HANDLER_NAME\", {\r\n        get: function () { return \"uncaughtException\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AutoCollectExceptions, \"UNHANDLED_REJECTION_HANDLER_NAME\", {\r\n        get: function () { return \"unhandledRejection\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AutoCollectExceptions.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        if (isEnabled) {\r\n            this._isInitialized = true;\r\n            var self = this;\r\n            if (!this._exceptionListenerHandle) {\r\n                var handle = function (reThrow, error) {\r\n                    _this._client.trackException({ exception: error });\r\n                    _this._client.flush({ isAppCrashing: true });\r\n                    if (reThrow) {\r\n                        var THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION = error;\r\n                        throw THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION; // Error originated somewhere else in your app\r\n                    }\r\n                };\r\n                this._exceptionListenerHandle = handle.bind(this, true);\r\n                this._rejectionListenerHandle = handle.bind(this, false);\r\n                process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n            }\r\n        }\r\n        else {\r\n            if (this._exceptionListenerHandle) {\r\n                process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                this._exceptionListenerHandle = undefined;\r\n                this._rejectionListenerHandle = undefined;\r\n                delete this._exceptionListenerHandle;\r\n                delete this._rejectionListenerHandle;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectExceptions.prototype.dispose = function () {\r\n        AutoCollectExceptions.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectExceptions.INSTANCE = null;\r\n    return AutoCollectExceptions;\r\n}());\r\nmodule.exports = AutoCollectExceptions;\r\n//# sourceMappingURL=Exceptions.js.map","module.exports = require(\"constants\");","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpDependencyParser = (function (_super) {\r\n    __extends(HttpDependencyParser, _super);\r\n    function HttpDependencyParser(requestOptions, request) {\r\n        var _this = _super.call(this) || this;\r\n        if (request && request.method && requestOptions) {\r\n            // The ClientRequest.method property isn't documented, but is always there.\r\n            _this.method = request.method;\r\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\r\n            _this.startTime = +new Date();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Called when the ClientRequest emits an error event.\r\n     */\r\n    HttpDependencyParser.prototype.onError = function (error) {\r\n        this._setStatus(undefined, error);\r\n    };\r\n    /**\r\n     * Called when the ClientRequest emits a response event.\r\n     */\r\n    HttpDependencyParser.prototype.onResponse = function (response) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\r\n    };\r\n    /**\r\n     * Gets a dependency data contract object for a completed ClientRequest.\r\n     */\r\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\r\n        var urlObject = url.parse(this.url);\r\n        urlObject.search = undefined;\r\n        urlObject.hash = undefined;\r\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\r\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        var remoteDependencyTarget = urlObject.hostname;\r\n        if (this.correlationId) {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\r\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\r\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\r\n            }\r\n        }\r\n        else {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        }\r\n        var dependencyTelemetry = {\r\n            id: dependencyId,\r\n            name: dependencyName,\r\n            data: this.url,\r\n            duration: this.duration,\r\n            success: this._isSuccess(),\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            properties: this.properties || {},\r\n            dependencyTypeName: remoteDependencyType,\r\n            target: remoteDependencyTarget\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!dependencyTelemetry[key]) {\r\n                    dependencyTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return dependencyTelemetry;\r\n    };\r\n    /**\r\n     * Builds a URL from request options, using the same logic as http.request(). This is\r\n     * necessary because a ClientRequest object does not expose a url property.\r\n     */\r\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\r\n        if (typeof options === 'string') {\r\n            options = url.parse(options);\r\n        }\r\n        else {\r\n            // Avoid modifying the original options object.\r\n            var originalOptions_1 = options;\r\n            options = {};\r\n            if (originalOptions_1) {\r\n                Object.keys(originalOptions_1).forEach(function (key) {\r\n                    options[key] = originalOptions_1[key];\r\n                });\r\n            }\r\n        }\r\n        // Oddly, url.format ignores path and only uses pathname and search,\r\n        // so create them from the path, if path was specified\r\n        if (options.path) {\r\n            var parsedQuery = url.parse(options.path);\r\n            options.pathname = parsedQuery.pathname;\r\n            options.search = parsedQuery.search;\r\n        }\r\n        // Simiarly, url.format ignores hostname and port if host is specified,\r\n        // even if host doesn't have the port, but http.request does not work\r\n        // this way. It will use the port if one is not specified in host,\r\n        // effectively treating host as hostname, but will use the port specified\r\n        // in host if it exists.\r\n        if (options.host && options.port) {\r\n            // Force a protocol so it will parse the host as the host, not path.\r\n            // It is discarded and not used, so it doesn't matter if it doesn't match\r\n            var parsedHost = url.parse(\"http://\" + options.host);\r\n            if (!parsedHost.port && options.port) {\r\n                options.hostname = options.host;\r\n                delete options.host;\r\n            }\r\n        }\r\n        // Mix in default values used by http.request and others\r\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\r\n        options.hostname = options.hostname || 'localhost';\r\n        return url.format(options);\r\n    };\r\n    return HttpDependencyParser;\r\n}(RequestParser));\r\nmodule.exports = HttpDependencyParser;\r\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: event.data.event.commandName,\r\n            name: event.data.event.commandName,\r\n            duration: event.data.event.duration,\r\n            success: event.data.succeeded,\r\n            /* TODO: transmit result code from mongo */\r\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\r\n            dependencyTypeName: 'mongodb'\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var queryObj = event.data.query || {};\r\n        var sqlString = queryObj.sql || \"Unknown query\";\r\n        var success = !event.data.err;\r\n        var connection = queryObj._connection || {};\r\n        var connectionConfig = connection.config || {};\r\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: sqlString,\r\n            name: sqlString,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            /* TODO: transmit result code from mysql */\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"mysql\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        if (event.data.commandObj.command === \"info\") {\r\n            // We don't want to report 'info', it's irrelevant\r\n            return;\r\n        }\r\n        client.trackDependency({\r\n            target: event.data.address,\r\n            name: event.data.commandObj.command,\r\n            data: event.data.commandObj.command,\r\n            duration: event.data.duration,\r\n            success: !event.data.err,\r\n            /* TODO: transmit result code from redis */\r\n            resultCode: event.data.err ? \"1\" : \"0\",\r\n            dependencyTypeName: \"redis\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var q = event.data.query;\r\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\r\n        var success = !event.data.error;\r\n        var conn = event.data.database.host + \":\" + event.data.database.port;\r\n        client.trackDependency({\r\n            target: conn,\r\n            data: sql,\r\n            name: sql,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"postgres\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\nvar Tracestate = require(\"../Library/Tracestate\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpRequestParser = (function (_super) {\r\n    __extends(HttpRequestParser, _super);\r\n    function HttpRequestParser(request, requestId) {\r\n        var _this = _super.call(this) || this;\r\n        if (request) {\r\n            _this.method = request.method;\r\n            _this.url = _this._getAbsoluteUrl(request);\r\n            _this.startTime = +new Date();\r\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\r\n            _this.parseHeaders(request, requestId);\r\n            if (request.connection) {\r\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\r\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\r\n        this._setStatus(undefined, error);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\r\n        var requestTelemetry = {\r\n            id: this.requestId,\r\n            name: this.method + \" \" + url.parse(this.url).pathname,\r\n            url: this.url,\r\n            /*\r\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\r\n            for reference\r\n            */\r\n            source: this.sourceCorrelationId,\r\n            duration: this.duration,\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            success: this._isSuccess(),\r\n            properties: this.properties\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!requestTelemetry[key]) {\r\n                    requestTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return requestTelemetry;\r\n    };\r\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\r\n        // create a copy of the context for requests since client info will be used here\r\n        var newTags = {};\r\n        for (var key in tags) {\r\n            newTags[key] = tags[key];\r\n        }\r\n        // don't override tags if they are already set\r\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\r\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\r\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\r\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\r\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\r\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\r\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\r\n        return newTags;\r\n    };\r\n    HttpRequestParser.prototype.getOperationId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\r\n    };\r\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\r\n    };\r\n    HttpRequestParser.prototype.getOperationName = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\r\n    };\r\n    HttpRequestParser.prototype.getRequestId = function () {\r\n        return this.requestId;\r\n    };\r\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\r\n        return this.correlationContextHeader;\r\n    };\r\n    HttpRequestParser.prototype.getTraceparent = function () {\r\n        return this.traceparent;\r\n    };\r\n    HttpRequestParser.prototype.getTracestate = function () {\r\n        return this.tracestate;\r\n    };\r\n    HttpRequestParser.prototype.getLegacyRootId = function () {\r\n        return this.legacyRootId;\r\n    };\r\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\r\n        if (!request.headers) {\r\n            return request.url;\r\n        }\r\n        var encrypted = request.connection ? request.connection.encrypted : null;\r\n        var requestUrl = url.parse(request.url);\r\n        var pathName = requestUrl.pathname;\r\n        var search = requestUrl.search;\r\n        var absoluteUrl = url.format({\r\n            protocol: encrypted ? \"https\" : \"http\",\r\n            host: request.headers.host,\r\n            pathname: pathName,\r\n            search: search\r\n        });\r\n        return absoluteUrl;\r\n    };\r\n    HttpRequestParser.prototype._getIp = function () {\r\n        // regex to match ipv4 without port\r\n        // Note: including the port would cause the payload to be rejected by the data collector\r\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n        var check = function (str) {\r\n            var results = ipMatch.exec(str);\r\n            if (results) {\r\n                return results[0];\r\n            }\r\n        };\r\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\r\n            || check(this.rawHeaders[\"x-client-ip\"])\r\n            || check(this.rawHeaders[\"x-real-ip\"])\r\n            || check(this.connectionRemoteAddress)\r\n            || check(this.socketRemoteAddress)\r\n            || check(this.legacySocketRemoteAddress);\r\n        // node v12 returns this if the address is \"localhost\"\r\n        if (!ip\r\n            && this.connectionRemoteAddress\r\n            && this.connectionRemoteAddress.substr\r\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\r\n            ip = \"127.0.0.1\";\r\n        }\r\n        return ip;\r\n    };\r\n    HttpRequestParser.prototype._getId = function (name) {\r\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\r\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\r\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\r\n        return value;\r\n    };\r\n    /**\r\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\r\n     */\r\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\r\n        // Set operationId\r\n        this.operationId = this.traceparent.traceId;\r\n        if (this.traceparent.legacyRootId) {\r\n            this.legacyRootId = this.traceparent.legacyRootId;\r\n        }\r\n        // Set parentId with existing spanId\r\n        this.parentId = this.traceparent.parentId;\r\n        // Update the spanId and set the current requestId\r\n        this.traceparent.updateSpanId();\r\n        this.requestId = this.traceparent.getBackCompatRequestId();\r\n    };\r\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\r\n        this.rawHeaders = request.headers || request.rawHeaders;\r\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\r\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\r\n        if (request.headers) {\r\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader]; // w3c header\r\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader]; // w3c header\r\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader]; // default AI header\r\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader]; // legacy AI header\r\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader]; // legacy AI header\r\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\r\n                // Parse W3C Trace Context headers\r\n                this.traceparent = new Traceparent(traceparentHeader); // new traceparent is always created from this\r\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader); // discard tracestate if no traceparent is present\r\n                this.setBackCompatFromThisTraceContext();\r\n            }\r\n            else if (requestIdHeader) {\r\n                // Parse AI headers\r\n                if (CorrelationIdManager.w3cEnabled) {\r\n                    this.traceparent = new Traceparent(null, requestIdHeader);\r\n                    this.setBackCompatFromThisTraceContext();\r\n                }\r\n                else {\r\n                    this.parentId = requestIdHeader;\r\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\r\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n                }\r\n            }\r\n            else {\r\n                // Legacy fallback\r\n                if (CorrelationIdManager.w3cEnabled) {\r\n                    this.traceparent = new Traceparent();\r\n                    this.traceparent.parentId = legacy_parentId;\r\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\r\n                    this.setBackCompatFromThisTraceContext();\r\n                }\r\n                else {\r\n                    this.parentId = legacy_parentId;\r\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\r\n                    this.correlationContextHeader = null;\r\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n                }\r\n            }\r\n            if (requestId) {\r\n                // For the scenarios that don't guarantee an AI-created context,\r\n                // override the requestId with the provided one.\r\n                this.requestId = requestId;\r\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n            }\r\n        }\r\n    };\r\n    HttpRequestParser.parseId = function (cookieValue) {\r\n        var cookieParts = cookieValue.split(\"|\");\r\n        if (cookieParts.length > 0) {\r\n            return cookieParts[0];\r\n        }\r\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\r\n    };\r\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\r\n    return HttpRequestParser;\r\n}(RequestParser));\r\nmodule.exports = HttpRequestParser;\r\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\r\n/**\r\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\r\n * is documented at https://www.w3.org/TR/trace-context/#header-value\r\n * @class Tracestate\r\n */\r\nvar Tracestate = (function () {\r\n    // if true, performs strict tracestate header checking, else just passes it along\r\n    function Tracestate(id) {\r\n        this.fieldmap = [];\r\n        if (!id) {\r\n            return;\r\n        }\r\n        this.fieldmap = this.parseHeader(id);\r\n    }\r\n    Tracestate.prototype.toString = function () {\r\n        var fieldarr = this.fieldmap;\r\n        if (!fieldarr || fieldarr.length == 0) {\r\n            return null;\r\n        }\r\n        return fieldarr.join(\", \");\r\n    };\r\n    Tracestate.validateKeyChars = function (key) {\r\n        var keyParts = key.split(\"@\");\r\n        if (keyParts.length == 2) {\r\n            // Parse for tenant@vendor format\r\n            var tenant = keyParts[0].trim();\r\n            var vendor = keyParts[1].trim();\r\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\r\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\r\n            return tenantValid && vendorValid;\r\n        }\r\n        else if (keyParts.length == 1) {\r\n            // Parse for standard key format\r\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\r\n        }\r\n        return false;\r\n    };\r\n    Tracestate.prototype.parseHeader = function (id) {\r\n        var res = [];\r\n        var keydeduper = {};\r\n        var parts = id.split(\",\");\r\n        if (parts.length > 32)\r\n            return null;\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var rawPart = parts_1[_i];\r\n            var part = rawPart.trim(); // trim out whitespace\r\n            if (part.length === 0) {\r\n                continue; // Discard empty pairs, but keep the rest of this tracestate\r\n            }\r\n            var pair = part.split(\"=\");\r\n            // pair should contain exactly one \"=\"\r\n            if (pair.length !== 2) {\r\n                return null; // invalid pair: discard entire tracestate\r\n            }\r\n            // Validate length and charset of this key\r\n            if (!Tracestate.validateKeyChars(pair[0])) {\r\n                return null;\r\n            }\r\n            // Assert uniqueness of this key\r\n            if (keydeduper[pair[0]]) {\r\n                return null; // duplicate key: discard entire tracestate\r\n            }\r\n            else {\r\n                keydeduper[pair[0]] = true;\r\n            }\r\n            // All checks passed -- add this part\r\n            res.push(part);\r\n        }\r\n        return res;\r\n    };\r\n    Tracestate.strict = true;\r\n    return Tracestate;\r\n}());\r\nmodule.exports = Tracestate;\r\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Config = require(\"./Config\");\r\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\r\nvar QuickPulseSender = require(\"./QuickPulseSender\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Context = require(\"./Context\");\r\n/** State Container for sending to the QuickPulse Service */\r\nvar QuickPulseStateManager = (function () {\r\n    function QuickPulseStateManager(iKey, context) {\r\n        this._isCollectingData = false;\r\n        this._lastSuccessTime = Date.now();\r\n        this._lastSendSucceeded = true;\r\n        this._metrics = {};\r\n        this._documents = [];\r\n        this._collectors = [];\r\n        this.config = new Config(iKey);\r\n        this.context = context || new Context();\r\n        this._sender = new QuickPulseSender(this.config);\r\n        this._isEnabled = false;\r\n    }\r\n    /**\r\n     *\r\n     * @param collector\r\n     */\r\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\r\n        this._collectors.push(collector);\r\n    };\r\n    /**\r\n     * Override of TelemetryClient.trackMetric\r\n     */\r\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\r\n        this._addMetric(telemetry);\r\n    };\r\n    /**\r\n     * Add a document to the current buffer\r\n     * @param envelope\r\n     */\r\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\r\n        if (document) {\r\n            this._documents.push(document);\r\n        }\r\n    };\r\n    /**\r\n     * Enable or disable communication with QuickPulseService\r\n     * @param isEnabled\r\n     */\r\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\r\n        if (isEnabled && !this._isEnabled) {\r\n            this._isEnabled = true;\r\n            this._goQuickPulse();\r\n        }\r\n        else if (!isEnabled && this._isEnabled) {\r\n            this._isEnabled = false;\r\n            clearTimeout(this._handle);\r\n            this._handle = undefined;\r\n        }\r\n    };\r\n    /**\r\n     * Enable or disable all collectors in this instance\r\n     * @param enable\r\n     */\r\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\r\n        this._collectors.forEach(function (collector) {\r\n            collector.enable(enable);\r\n        });\r\n    };\r\n    /**\r\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\r\n     * @param telemetry\r\n     */\r\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\r\n        var value = telemetry.value;\r\n        var count = telemetry.count || 1;\r\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\r\n        if (name) {\r\n            if (this._metrics[name]) {\r\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\r\n                this._metrics[name].Weight += count;\r\n            }\r\n            else {\r\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\r\n                this._metrics[name].Name = name;\r\n                this._metrics[name].Weight = 1;\r\n            }\r\n        }\r\n    };\r\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\r\n        delete this._metrics;\r\n        this._metrics = {};\r\n        this._documents.length = 0;\r\n    };\r\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\r\n        var _this = this;\r\n        // Create envelope from Documents and Metrics\r\n        var metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\r\n        var envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\r\n        // Clear this document, metric buffer\r\n        this._resetQuickPulseBuffer();\r\n        // Send it to QuickPulseService, if collecting\r\n        if (this._isCollectingData) {\r\n            this._post(envelope);\r\n        }\r\n        else {\r\n            this._ping(envelope);\r\n        }\r\n        var currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : QuickPulseStateManager.PING_INTERVAL;\r\n        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\r\n            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\r\n            this._isCollectingData = false;\r\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\r\n        }\r\n        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\r\n            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\r\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\r\n        }\r\n        this._lastSendSucceeded = null;\r\n        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\r\n        this._handle.unref(); // Don't block apps from terminating\r\n    };\r\n    QuickPulseStateManager.prototype._ping = function (envelope) {\r\n        this._sender.ping(envelope, this._quickPulseDone.bind(this));\r\n    };\r\n    QuickPulseStateManager.prototype._post = function (envelope) {\r\n        this._sender.post(envelope, this._quickPulseDone.bind(this));\r\n    };\r\n    /**\r\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\r\n     */\r\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res) {\r\n        if (shouldPOST != undefined) {\r\n            if (this._isCollectingData !== shouldPOST) {\r\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\r\n                this.enableCollectors(shouldPOST);\r\n            }\r\n            this._isCollectingData = shouldPOST;\r\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\r\n                this._lastSuccessTime = Date.now();\r\n                this._lastSendSucceeded = true;\r\n            }\r\n            else {\r\n                this._lastSendSucceeded = false;\r\n            }\r\n        }\r\n        else {\r\n            // Received an error, keep the state as is\r\n            this._lastSendSucceeded = false;\r\n        }\r\n    };\r\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\r\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\r\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\r\n    QuickPulseStateManager.PING_INTERVAL = 5000;\r\n    QuickPulseStateManager.POST_INTERVAL = 1000;\r\n    return QuickPulseStateManager;\r\n}());\r\nmodule.exports = QuickPulseStateManager;\r\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar os = require(\"os\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar StreamId = Util.w3cTraceId(); // Create a guid\r\nvar QuickPulseEnvelopeFactory = (function () {\r\n    function QuickPulseEnvelopeFactory() {\r\n    }\r\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\r\n        var machineName = (os && typeof os.hostname === \"function\"\r\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\r\n        var instance = (context.tags\r\n            && context.keys\r\n            && context.keys.cloudRoleInstance\r\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\r\n        var envelope = {\r\n            Documents: documents.length > 0 ? documents : null,\r\n            InstrumentationKey: config.instrumentationKey || \"\",\r\n            Metrics: metrics.length > 0 ? metrics : null,\r\n            InvariantVersion: 1,\r\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\r\n            Version: context.tags[context.keys.internalSdkVersion],\r\n            StreamId: StreamId,\r\n            MachineName: machineName,\r\n            Instance: instance\r\n        };\r\n        return envelope;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\r\n        var data;\r\n        data = {\r\n            Name: telemetry.name,\r\n            Value: telemetry.value,\r\n            Weight: telemetry.count || 1\r\n        };\r\n        return data;\r\n    };\r\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\r\n        switch (envelope.data.baseType) {\r\n            case Contracts.TelemetryTypeString.Event:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Exception:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Trace:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Dependency:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Request:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\r\n        }\r\n        return null;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var name = envelope.data.baseData.name;\r\n        var eventDocument = __assign({}, document, { Name: name });\r\n        return eventDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\r\n        var traceDocument = __assign({}, document, { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\r\n        return traceDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var exceptionDetails = envelope.data.baseData.exceptions;\r\n        var exception = '';\r\n        var exceptionMessage = '';\r\n        var exceptionType = '';\r\n        // Try to fill exception information from first error only\r\n        if (exceptionDetails && exceptionDetails.length > 0) {\r\n            // Try to grab the stack from parsedStack or stack\r\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\r\n                exceptionDetails[0].parsedStack.forEach(function (err) {\r\n                    exception += err.assembly + \"\\n\";\r\n                });\r\n            }\r\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\r\n                exception = exceptionDetails[0].stack;\r\n            }\r\n            exceptionMessage = exceptionDetails[0].message;\r\n            exceptionType = exceptionDetails[0].typeName;\r\n        }\r\n        var exceptionDocument = __assign({}, document, { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\r\n        return exceptionDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var baseData = envelope.data.baseData;\r\n        var requestDocument = __assign({}, document, { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\r\n         });\r\n        return requestDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var baseData = envelope.data.baseData;\r\n        var dependencyDocument = __assign({}, document, { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\r\n        return dependencyDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\r\n        var documentType;\r\n        var __type;\r\n        var operationId, properties;\r\n        if (envelope.data.baseType) {\r\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\r\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\r\n        }\r\n        else {\r\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\r\n            // valid baseType values\r\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\r\n        }\r\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\r\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\r\n        var document = {\r\n            DocumentType: documentType,\r\n            __type: __type,\r\n            OperationId: operationId,\r\n            Version: \"1.0\",\r\n            Properties: properties\r\n        };\r\n        return document;\r\n    };\r\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\r\n        var properties = [];\r\n        // Collect measurements\r\n        var meas = (envelope.data.baseData).measurements || {};\r\n        for (var key in meas) {\r\n            if (meas.hasOwnProperty(key)) {\r\n                var value = meas[key];\r\n                var property = { key: key, value: value };\r\n                properties.push(property);\r\n            }\r\n        }\r\n        // Collect properties\r\n        var props = (envelope.data.baseData).properties || {};\r\n        for (var key in props) {\r\n            if (props.hasOwnProperty(key)) {\r\n                var value = props[key];\r\n                var property = { key: key, value: value };\r\n                properties.push(property);\r\n            }\r\n        }\r\n        return properties;\r\n    };\r\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\r\n    return QuickPulseEnvelopeFactory;\r\n}());\r\nmodule.exports = QuickPulseEnvelopeFactory;\r\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\r\nvar https = require(\"https\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\nvar QuickPulseConfig = {\r\n    method: \"POST\",\r\n    time: \"x-ms-qps-transmission-time\",\r\n    subscribed: \"x-ms-qps-subscribed\"\r\n};\r\nvar QuickPulseSender = (function () {\r\n    function QuickPulseSender(config) {\r\n        this._config = config;\r\n        this._consecutiveErrors = 0;\r\n    }\r\n    QuickPulseSender.prototype.ping = function (envelope, done) {\r\n        this._submitData(envelope, done, \"ping\");\r\n    };\r\n    QuickPulseSender.prototype.post = function (envelope, done) {\r\n        // Important: When POSTing data, envelope must be an array\r\n        this._submitData([envelope], done, \"post\");\r\n    };\r\n    QuickPulseSender.prototype._submitData = function (envelope, done, postOrPing) {\r\n        var _this = this;\r\n        var payload = JSON.stringify(envelope);\r\n        var options = (_a = {},\r\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\r\n            _a.host = this._config.quickPulseHost,\r\n            _a.method = QuickPulseConfig.method,\r\n            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\r\n            _a.headers = (_b = {\r\n                    'Expect': '100-continue'\r\n                },\r\n                _b[QuickPulseConfig.time] = 10000 * Date.now(),\r\n                _b['Content-Type'] = 'application\\/json',\r\n                _b['Content-Length'] = Buffer.byteLength(payload),\r\n                _b),\r\n            _a);\r\n        var req = https.request(options, function (res) {\r\n            var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\r\n            _this._consecutiveErrors = 0;\r\n            done(shouldPOSTData, res);\r\n        });\r\n        req.on(\"error\", function (error) {\r\n            // Unable to contact qps endpoint.\r\n            // Do nothing for now.\r\n            _this._consecutiveErrors++;\r\n            // LOG every error, but WARN instead when X number of consecutive errors occur\r\n            var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\r\n            if (_this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\r\n                notice = \"Live Metrics endpoint could not be reached \" + _this._consecutiveErrors + \" consecutive times. Most recent error:\";\r\n                Logging.warn(QuickPulseSender.TAG, notice, error);\r\n            }\r\n            else {\r\n                // Potentially transient error, do not change the ping/post state yet.\r\n                Logging.info(QuickPulseSender.TAG, notice, error);\r\n            }\r\n            done();\r\n        });\r\n        req.write(payload);\r\n        req.end();\r\n        var _a, _b;\r\n    };\r\n    QuickPulseSender.TAG = \"QuickPulseSender\";\r\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\r\n    return QuickPulseSender;\r\n}());\r\nmodule.exports = QuickPulseSender;\r\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Config = require(\"../Library/Config\");\r\nvar Context = require(\"../Library/Context\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar AutoCollectNativePerformance = (function () {\r\n    function AutoCollectNativePerformance(client) {\r\n        this._disabledMetrics = {};\r\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\r\n        // just disable old native instance and reset JS member variables\r\n        if (AutoCollectNativePerformance.INSTANCE) {\r\n            AutoCollectNativePerformance.INSTANCE.dispose();\r\n        }\r\n        AutoCollectNativePerformance.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    /**\r\n     *  Reports if NativePerformance is able to run in this environment\r\n     */\r\n    AutoCollectNativePerformance.isNodeVersionCompatible = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) >= 6;\r\n    };\r\n    /**\r\n     * Start instance of native metrics agent.\r\n     *\r\n     * @param {boolean} isEnabled\r\n     * @param {number} [collectionInterval=60000]\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\r\n        var _this = this;\r\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (!AutoCollectNativePerformance.isNodeVersionCompatible()) {\r\n            return;\r\n        }\r\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\r\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\r\n            try {\r\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\r\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\r\n                AutoCollectNativePerformance._metricsAvailable = true;\r\n                Logging.info(\"Native metrics module successfully loaded!\");\r\n            }\r\n            catch (err) {\r\n                // Package not available. Never try again\r\n                AutoCollectNativePerformance._metricsAvailable = false;\r\n                return;\r\n            }\r\n        }\r\n        this._isEnabled = isEnabled;\r\n        this._disabledMetrics = disabledMetrics;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        // Enable the emitter if we were able to construct one\r\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\r\n            // enable self\r\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\r\n            this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\r\n            this._handle.unref();\r\n        }\r\n        else if (AutoCollectNativePerformance._emitter) {\r\n            // disable self\r\n            AutoCollectNativePerformance._emitter.enable(false);\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Cleanup this instance of AutoCollectNativePerformance\r\n     *\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype.dispose = function () {\r\n        this.enable(false);\r\n    };\r\n    /**\r\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\r\n     *\r\n     * @private\r\n     * @static\r\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\r\n     * @returns {(boolean | IDisabledExtendedMetrics)}\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics) {\r\n        var disableAll = process.env[Config.ENV_nativeMetricsDisableAll];\r\n        var individualOptOuts = process.env[Config.ENV_nativeMetricsDisablers];\r\n        // case 1: disable all env var set, RETURN with isEnabled=false\r\n        if (disableAll) {\r\n            return { isEnabled: false, disabledMetrics: {} };\r\n        }\r\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\r\n        if (individualOptOuts) {\r\n            var optOutsArr = individualOptOuts.split(\",\");\r\n            var disabledMetrics = {};\r\n            if (optOutsArr.length > 0) {\r\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\r\n                    var opt = optOutsArr_1[_i];\r\n                    disabledMetrics[opt] = true;\r\n                }\r\n            }\r\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\r\n            if (typeof collectExtendedMetrics === \"object\") {\r\n                return { isEnabled: true, disabledMetrics: __assign({}, collectExtendedMetrics, disabledMetrics) };\r\n            }\r\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\r\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\r\n        }\r\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\r\n        if (typeof collectExtendedMetrics === \"boolean\") {\r\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\r\n        }\r\n        else {\r\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\r\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\r\n        }\r\n    };\r\n    /**\r\n     * Trigger an iteration of native metrics collection\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\r\n        var shouldSendAll = true;\r\n        if (typeof this._isEnabled !== \"object\") {\r\n            shouldSendAll = this._isEnabled;\r\n        }\r\n        if (shouldSendAll) {\r\n            this._trackGarbageCollection();\r\n            this._trackEventLoop();\r\n            this._trackHeapUsage();\r\n        }\r\n    };\r\n    /**\r\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\r\n     * collection that occurred during this collection interval.\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\r\n        if (this._disabledMetrics.gc) {\r\n            return;\r\n        }\r\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\r\n        for (var gc in gcData) {\r\n            var metrics = gcData[gc].metrics;\r\n            var name_1 = gc + \" Garbage Collection Duration\";\r\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\r\n            this._client.trackMetric({\r\n                name: name_1,\r\n                value: metrics.total,\r\n                count: metrics.count,\r\n                max: metrics.max,\r\n                min: metrics.min,\r\n                stdDev: stdDev,\r\n                tagOverrides: (_a = {},\r\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                    _a)\r\n            });\r\n        }\r\n        var _a;\r\n    };\r\n    /**\r\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\r\n     * time spent in event loop for this interval.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\r\n        if (this._disabledMetrics.loop) {\r\n            return;\r\n        }\r\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\r\n        var metrics = loopData.loopUsage;\r\n        if (metrics.count == 0) {\r\n            return;\r\n        }\r\n        var name = \"Event Loop CPU Time\";\r\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\r\n        this._client.trackMetric({\r\n            name: name,\r\n            value: metrics.total,\r\n            count: metrics.count,\r\n            min: metrics.min,\r\n            max: metrics.max,\r\n            stdDev: stdDev,\r\n            tagOverrides: (_a = {},\r\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _a)\r\n        });\r\n        var _a;\r\n    };\r\n    /**\r\n     * Track heap memory usage metrics as a custom metric.\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\r\n        if (this._disabledMetrics.heap) {\r\n            return;\r\n        }\r\n        var memoryUsage = process.memoryUsage();\r\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\r\n        this._client.trackMetric({\r\n            name: \"Memory Usage (Heap)\",\r\n            value: heapUsed,\r\n            count: 1,\r\n            tagOverrides: (_a = {},\r\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _a)\r\n        });\r\n        this._client.trackMetric({\r\n            name: \"Memory Total (Heap)\",\r\n            value: heapTotal,\r\n            count: 1,\r\n            tagOverrides: (_b = {},\r\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _b)\r\n        });\r\n        this._client.trackMetric({\r\n            name: \"Memory Usage (Non-Heap)\",\r\n            value: rss - heapTotal,\r\n            count: 1,\r\n            tagOverrides: (_c = {},\r\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _c)\r\n        });\r\n        var _a, _b, _c;\r\n    };\r\n    return AutoCollectNativePerformance;\r\n}());\r\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\r\n//# sourceMappingURL=NativePerformance.js.map","module.exports = require(\"applicationinsights-native-metrics\");","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar TelemetryClient = require(\"./TelemetryClient\");\r\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\r\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\r\n * in addition to Node-specific helper functions.\r\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\r\n * In most cases, `appInsights.defaultClient` should be used instead.\r\n */\r\nvar NodeClient = (function (_super) {\r\n    __extends(NodeClient, _super);\r\n    function NodeClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\r\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\r\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\r\n     * @param telemetry Object encapsulating incoming request, response and duration information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\r\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\r\n            ServerRequestTracking.trackRequestSync(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\r\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\r\n     * @param telemetry Object encapsulating incoming request and response information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\r\n        if (telemetry.duration || telemetry.error) {\r\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\r\n        }\r\n        if (telemetry && telemetry.request && telemetry.response) {\r\n            ServerRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\r\n     * the specified headers and will log the telemetry when outgoing request is complete\r\n     * @param telemetry Object encapsulating outgoing request information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\r\n        if (telemetry && telemetry.request) {\r\n            ClientRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\r\n        }\r\n    };\r\n    return NodeClient;\r\n}(TelemetryClient));\r\nmodule.exports = NodeClient;\r\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\r\nvar url = require(\"url\");\r\nvar Config = require(\"./Config\");\r\nvar Context = require(\"./Context\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Channel = require(\"./Channel\");\r\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Sender = require(\"./Sender\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\r\n/**\r\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\r\n * and manually trigger immediate sending (flushing)\r\n */\r\nvar TelemetryClient = (function () {\r\n    /**\r\n     * Constructs a new client of the client\r\n     * @param iKey the instrumentation key to use (read from environment variable if not specified)\r\n     */\r\n    function TelemetryClient(iKey) {\r\n        this._telemetryProcessors = [];\r\n        var config = new Config(iKey);\r\n        this.config = config;\r\n        this.context = new Context();\r\n        this.commonProperties = {};\r\n        var sender = new Sender(this.config);\r\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\r\n    }\r\n    /**\r\n     * Log a trace message\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Trace);\r\n    };\r\n    /**\r\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\r\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\r\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Metric);\r\n    };\r\n    /**\r\n     * Log an exception\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackException = function (telemetry) {\r\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\r\n            telemetry.exception = new Error(telemetry.exception.toString());\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Exception);\r\n    };\r\n    /**\r\n     * Log a user action or other occurrence.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Event);\r\n    };\r\n    /**\r\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\r\n     * that aren't automatically captured or if you've disabled automatic request collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Request);\r\n    };\r\n    /**\r\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\r\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking option\r\n     * */\r\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\r\n        if (telemetry && !telemetry.target && telemetry.data) {\r\n            // url.parse().host returns null for non-urls,\r\n            // making this essentially a no-op in those cases\r\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\r\n            telemetry.target = url.parse(telemetry.data).host;\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\r\n    };\r\n    /**\r\n     * Immediately send all queued telemetry.\r\n     * @param options Flush options, including indicator whether app is crashing and callback\r\n     */\r\n    TelemetryClient.prototype.flush = function (options) {\r\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\r\n    };\r\n    /**\r\n     * Generic track method for all telemetry types\r\n     * @param data the telemetry to send\r\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\r\n     */\r\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\r\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\r\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\r\n            // Set time on the envelope if it was set on the telemetry item\r\n            if (telemetry.time) {\r\n                envelope.time = telemetry.time.toISOString();\r\n            }\r\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\r\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\r\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\r\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\r\n            TelemetryProcessors.quickPulseTelemetryProcessor(envelope, this.quickPulseClient);\r\n            if (accepted) {\r\n                this.channel.send(envelope);\r\n            }\r\n        }\r\n        else {\r\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\r\n     * before telemetry item is pushed for sending and in the order they were added.\r\n     *\r\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\r\n     */\r\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\r\n        this._telemetryProcessors.push(telemetryProcessor);\r\n    };\r\n    /*\r\n     * Removes all telemetry processors\r\n     */\r\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\r\n        this._telemetryProcessors = [];\r\n    };\r\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\r\n        var accepted = true;\r\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\r\n        if (telemetryProcessorsCount === 0) {\r\n            return accepted;\r\n        }\r\n        contextObjects = contextObjects || {};\r\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\r\n            try {\r\n                var processor = this._telemetryProcessors[i];\r\n                if (processor) {\r\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\r\n                        accepted = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                accepted = true;\r\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\r\n            }\r\n        }\r\n        return accepted;\r\n    };\r\n    return TelemetryClient;\r\n}());\r\nmodule.exports = TelemetryClient;\r\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Channel = (function () {\r\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\r\n        this._buffer = [];\r\n        this._lastSend = 0;\r\n        this._isDisabled = isDisabled;\r\n        this._getBatchSize = getBatchSize;\r\n        this._getBatchIntervalMs = getBatchIntervalMs;\r\n        this._sender = sender;\r\n    }\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\r\n    };\r\n    /**\r\n     * Add a telemetry item to the send buffer\r\n     */\r\n    Channel.prototype.send = function (envelope) {\r\n        var _this = this;\r\n        // if master off switch is set, don't send any data\r\n        if (this._isDisabled()) {\r\n            // Do not send/save data\r\n            return;\r\n        }\r\n        // validate input\r\n        if (!envelope) {\r\n            Logging.warn(\"Cannot send null/undefined telemetry\");\r\n            return;\r\n        }\r\n        // check if the incoming payload is too large, truncate if necessary\r\n        var payload = this._stringify(envelope);\r\n        if (typeof payload !== \"string\") {\r\n            return;\r\n        }\r\n        // enqueue the payload\r\n        this._buffer.push(payload);\r\n        // flush if we would exceed the max-size limit by adding this item\r\n        if (this._buffer.length >= this._getBatchSize()) {\r\n            this.triggerSend(false);\r\n            return;\r\n        }\r\n        // ensure an invocation timeout is set if anything is in the buffer\r\n        if (!this._timeoutHandle && this._buffer.length > 0) {\r\n            this._timeoutHandle = setTimeout(function () {\r\n                _this._timeoutHandle = null;\r\n                _this.triggerSend(false);\r\n            }, this._getBatchIntervalMs());\r\n        }\r\n    };\r\n    /**\r\n     * Immediately send buffered data\r\n     */\r\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\r\n        var bufferIsEmpty = this._buffer.length < 1;\r\n        if (!bufferIsEmpty) {\r\n            // compose an array of payloads\r\n            var batch = this._buffer.join(\"\\n\");\r\n            // invoke send\r\n            if (isNodeCrashing) {\r\n                this._sender.saveOnCrash(batch);\r\n                if (typeof callback === \"function\") {\r\n                    callback(\"data saved on crash\");\r\n                }\r\n            }\r\n            else {\r\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\r\n            }\r\n        }\r\n        // update lastSend time to enable throttling\r\n        this._lastSend = +new Date;\r\n        // clear buffer\r\n        this._buffer.length = 0;\r\n        clearTimeout(this._timeoutHandle);\r\n        this._timeoutHandle = null;\r\n        if (bufferIsEmpty && typeof callback === \"function\") {\r\n            callback(\"no data to send\");\r\n        }\r\n    };\r\n    Channel.prototype._stringify = function (envelope) {\r\n        try {\r\n            return JSON.stringify(envelope);\r\n        }\r\n        catch (error) {\r\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\r\n        }\r\n    };\r\n    return Channel;\r\n}());\r\nmodule.exports = Channel;\r\n//# sourceMappingURL=Channel.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./SamplingTelemetryProcessor\"));\r\n__export(require(\"./QuickPulseTelemetryProcessor\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\n/**\r\n *  A telemetry processor that handles sampling.\r\n */\r\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\r\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\r\n    var isSampledIn = false;\r\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n        return true;\r\n    }\r\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\r\n        // Exclude MetricData telemetry from sampling\r\n        return true;\r\n    }\r\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\r\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\r\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\r\n    }\r\n    else {\r\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\r\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\r\n    }\r\n    return isSampledIn;\r\n}\r\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\r\n/** Ported from AI .NET SDK */\r\nfunction getSamplingHashCode(input) {\r\n    var csharpMin = -2147483648;\r\n    var csharpMax = 2147483647;\r\n    var hash = 5381;\r\n    if (!input) {\r\n        return 0;\r\n    }\r\n    while (input.length < 8) {\r\n        input = input + input;\r\n    }\r\n    for (var i = 0; i < input.length; i++) {\r\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\r\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\r\n    }\r\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\r\n    return (hash / csharpMax) * 100;\r\n}\r\nexports.getSamplingHashCode = getSamplingHashCode;\r\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\r\nfunction quickPulseTelemetryProcessor(envelope, client) {\r\n    if (client) {\r\n        client.addDocument(envelope);\r\n        // Increment rate counters\r\n        switch (envelope.data.baseType) {\r\n            case \"ExceptionData\":\r\n                AutoCollectPerformance.countException();\r\n                break;\r\n            case \"RequestData\":\r\n                // These are already autocounted by HttpRequest.\r\n                // Note: Not currently counting manual trackRequest calls\r\n                // here to avoid affecting existing autocollection metrics\r\n                break;\r\n            case \"RemoteDependencyData\":\r\n                var baseData = envelope.data.baseData;\r\n                AutoCollectPerformance.countDependency(baseData.duration, baseData.success);\r\n                break;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.quickPulseTelemetryProcessor = quickPulseTelemetryProcessor;\r\n//# sourceMappingURL=QuickPulseTelemetryProcessor.js.map","\"use strict\";\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar zlib = require(\"zlib\");\r\nvar child_process = require(\"child_process\");\r\nvar Logging = require(\"./Logging\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Util = require(\"./Util\");\r\nvar Sender = (function () {\r\n    function Sender(config, onSuccess, onError) {\r\n        this._config = config;\r\n        this._onSuccess = onSuccess;\r\n        this._onError = onError;\r\n        this._enableDiskRetryMode = false;\r\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\r\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\r\n        this._numConsecutiveFailures = 0;\r\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            // Node's chmod levels do not appropriately restrict file access on Windows\r\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\r\n            // access to the temporary directory used for disk retry mode.\r\n            if (Sender.USE_ICACLS) {\r\n                // This should be async - but it's currently safer to have this synchronous\r\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\r\n                try {\r\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\r\n                }\r\n                catch (e) { }\r\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\r\n                }\r\n            }\r\n            else {\r\n                // chmod works everywhere else\r\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n    * Enable or disable offline mode\r\n    */\r\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\r\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\r\n            this._resendInterval = Math.floor(resendInterval);\r\n        }\r\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\r\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\r\n        }\r\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            this._enableDiskRetryMode = false;\r\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\r\n        }\r\n    };\r\n    Sender.prototype.send = function (payload, callback) {\r\n        var _this = this;\r\n        var endpointUrl = this._config.endpointUrl;\r\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\r\n        var options = {\r\n            method: \"POST\",\r\n            withCredentials: false,\r\n            headers: {\r\n                \"Content-Type\": \"application/x-json-stream\"\r\n            }\r\n        };\r\n        zlib.gzip(payload, function (err, buffer) {\r\n            var dataToSend = buffer;\r\n            if (err) {\r\n                Logging.warn(err);\r\n                dataToSend = payload; // something went wrong so send without gzip\r\n                options.headers[\"Content-Length\"] = payload.length.toString();\r\n            }\r\n            else {\r\n                options.headers[\"Content-Encoding\"] = \"gzip\";\r\n                options.headers[\"Content-Length\"] = buffer.length;\r\n            }\r\n            Logging.info(Sender.TAG, options);\r\n            // Ensure this request is not captured by auto-collection.\r\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\r\n            var requestCallback = function (res) {\r\n                res.setEncoding(\"utf-8\");\r\n                //returns empty if the data is accepted\r\n                var responseString = \"\";\r\n                res.on(\"data\", function (data) {\r\n                    responseString += data;\r\n                });\r\n                res.on(\"end\", function () {\r\n                    _this._numConsecutiveFailures = 0;\r\n                    Logging.info(Sender.TAG, responseString);\r\n                    if (typeof _this._onSuccess === \"function\") {\r\n                        _this._onSuccess(responseString);\r\n                    }\r\n                    if (typeof callback === \"function\") {\r\n                        callback(responseString);\r\n                    }\r\n                    if (_this._enableDiskRetryMode) {\r\n                        // try to send any cached events if the user is back online\r\n                        if (res.statusCode === 200) {\r\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval).unref();\r\n                            // store to disk in case of burst throttling\r\n                        }\r\n                        else if (res.statusCode === 408 ||\r\n                            res.statusCode === 429 ||\r\n                            res.statusCode === 439 ||\r\n                            res.statusCode === 500 ||\r\n                            res.statusCode === 503) {\r\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\r\n                            _this._storeToDisk(payload);\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\r\n            req.on(\"error\", function (error) {\r\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\r\n                _this._numConsecutiveFailures++;\r\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\r\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\r\n                // Continue informing on each failure if verbose logging is being used\r\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\r\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\r\n                    if (_this._enableDiskRetryMode) {\r\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\r\n                    }\r\n                    Logging.warn(Sender.TAG, notice, error);\r\n                }\r\n                else {\r\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\r\n                    Logging.info(Sender.TAG, notice, error);\r\n                }\r\n                _this._onErrorHelper(error);\r\n                if (typeof callback === \"function\") {\r\n                    var errorMessage = \"error sending telemetry\";\r\n                    if (error && (typeof error.toString === \"function\")) {\r\n                        errorMessage = error.toString();\r\n                    }\r\n                    callback(errorMessage);\r\n                }\r\n                if (_this._enableDiskRetryMode) {\r\n                    _this._storeToDisk(payload);\r\n                }\r\n            });\r\n            req.write(dataToSend);\r\n            req.end();\r\n        });\r\n    };\r\n    Sender.prototype.saveOnCrash = function (payload) {\r\n        if (this._enableDiskRetryMode) {\r\n            this._storeToDiskSync(payload);\r\n        }\r\n    };\r\n    Sender.prototype._runICACLS = function (args, callback) {\r\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n        aclProc.on(\"error\", function (e) { return callback(e); });\r\n        aclProc.on(\"close\", function (code, signal) {\r\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\r\n        });\r\n    };\r\n    Sender.prototype._runICACLSSync = function (args) {\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n            if (aclProc.error) {\r\n                throw aclProc.error;\r\n            }\r\n            else if (aclProc.status !== 0) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLIdentity = function (callback) {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return callback(null, Sender.ACL_IDENTITY);\r\n        }\r\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n            windowsHide: true,\r\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n        });\r\n        var data = \"\";\r\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\r\n        psProc.on(\"error\", function (e) { return callback(e, null); });\r\n        psProc.on(\"close\", function (code, signal) {\r\n            Sender.ACL_IDENTITY = data && data.trim();\r\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\r\n        });\r\n    };\r\n    Sender.prototype._getACLIdentitySync = function () {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n            });\r\n            if (psProc.error) {\r\n                throw psProc.error;\r\n            }\r\n            else if (psProc.status !== 0) {\r\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\r\n            }\r\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLArguments = function (directory, identity) {\r\n        return [directory,\r\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\r\n            \"/grant\", identity + \":(OI)(CI)F\",\r\n            \"/inheritance:r\"]; // Remove all inherited permissions\r\n    };\r\n    Sender.prototype._applyACLRules = function (directory, callback) {\r\n        var _this = this;\r\n        if (!Sender.USE_ICACLS) {\r\n            return callback(null);\r\n        }\r\n        // For performance, only run ACL rules if we haven't already during this session\r\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\r\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\r\n            // This is better than the alternative of potentially infinitely spawned processes\r\n            Sender.ACLED_DIRECTORIES[directory] = false;\r\n            // Restrict this directory to only current user and administrator access\r\n            this._getACLIdentity(function (err, identity) {\r\n                if (err) {\r\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\r\n                    return callback(err);\r\n                }\r\n                else {\r\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\r\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\r\n                        return callback(err);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\r\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\r\n        }\r\n    };\r\n    Sender.prototype._applyACLRulesSync = function (directory) {\r\n        if (Sender.USE_ICACLS) {\r\n            // For performance, only run ACL rules if we haven't already during this session\r\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\r\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\r\n                return;\r\n            }\r\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n            }\r\n        }\r\n    };\r\n    Sender.prototype._confirmDirExists = function (directory, callback) {\r\n        var _this = this;\r\n        fs.lstat(directory, function (err, stats) {\r\n            if (err && err.code === 'ENOENT') {\r\n                fs.mkdir(directory, function (err) {\r\n                    if (err && err.code !== 'EEXIST') {\r\n                        callback(err);\r\n                    }\r\n                    else {\r\n                        _this._applyACLRules(directory, callback);\r\n                    }\r\n                });\r\n            }\r\n            else if (!err && stats.isDirectory()) {\r\n                _this._applyACLRules(directory, callback);\r\n            }\r\n            else {\r\n                callback(err || new Error(\"Path existed but was not a directory\"));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\r\n        // Get the directory listing\r\n        fs.readdir(directory, function (err, files) {\r\n            if (err) {\r\n                return callback(err, -1);\r\n            }\r\n            var error = null;\r\n            var totalSize = 0;\r\n            var count = 0;\r\n            if (files.length === 0) {\r\n                callback(null, 0);\r\n                return;\r\n            }\r\n            // Query all file sizes\r\n            for (var i = 0; i < files.length; i++) {\r\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\r\n                    count++;\r\n                    if (err) {\r\n                        error = err;\r\n                    }\r\n                    else {\r\n                        if (fileStats.isFile()) {\r\n                            totalSize += fileStats.size;\r\n                        }\r\n                    }\r\n                    if (count === files.length) {\r\n                        // Did we get an error?\r\n                        if (error) {\r\n                            callback(error, -1);\r\n                        }\r\n                        else {\r\n                            callback(error, totalSize);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\r\n        var files = fs.readdirSync(directory);\r\n        var totalSize = 0;\r\n        for (var i = 0; i < files.length; i++) {\r\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\r\n        }\r\n        return totalSize;\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk in the temp directory\r\n     */\r\n    Sender.prototype._storeToDisk = function (payload) {\r\n        var _this = this;\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        // This will create the dir if it does not exist\r\n        // Default permissions on *nix are directory listing from other users but no file creations\r\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n        this._confirmDirExists(directory, function (error) {\r\n            if (error) {\r\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\r\n                _this._onErrorHelper(error);\r\n                return;\r\n            }\r\n            _this._getShallowDirectorySize(directory, function (err, size) {\r\n                if (err || size < 0) {\r\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\r\n                    _this._onErrorHelper(err);\r\n                    return;\r\n                }\r\n                else if (size > _this._maxBytesOnDisk) {\r\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\r\n                    return;\r\n                }\r\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n                //would require an external dependency\r\n                var fileName = new Date().getTime() + \".ai.json\";\r\n                var fileFullPath = path.join(directory, fileName);\r\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\r\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\r\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\r\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk using sync file operations\r\n     * this is used when storing data before crashes\r\n     */\r\n    Sender.prototype._storeToDiskSync = function (payload) {\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        try {\r\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n            if (!fs.existsSync(directory)) {\r\n                fs.mkdirSync(directory);\r\n            }\r\n            // Make sure permissions are valid\r\n            this._applyACLRulesSync(directory);\r\n            var dirSize = this._getShallowDirectorySizeSync(directory);\r\n            if (dirSize > this._maxBytesOnDisk) {\r\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\r\n                return;\r\n            }\r\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n            //would require an external dependency\r\n            var fileName = new Date().getTime() + \".ai.json\";\r\n            var fileFullPath = path.join(directory, fileName);\r\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\r\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\r\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\r\n        }\r\n        catch (error) {\r\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\r\n            this._onErrorHelper(error);\r\n        }\r\n    };\r\n    /**\r\n     * Check for temp telemetry files\r\n     * reads the first file if exist, deletes it and tries to send its load\r\n     */\r\n    Sender.prototype._sendFirstFileOnDisk = function () {\r\n        var _this = this;\r\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        fs.exists(tempDir, function (exists) {\r\n            if (exists) {\r\n                fs.readdir(tempDir, function (error, files) {\r\n                    if (!error) {\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (files.length > 0) {\r\n                            var firstFile = files[0];\r\n                            var filePath = path.join(tempDir, firstFile);\r\n                            fs.readFile(filePath, function (error, payload) {\r\n                                if (!error) {\r\n                                    // delete the file first to prevent double sending\r\n                                    fs.unlink(filePath, function (error) {\r\n                                        if (!error) {\r\n                                            _this.send(payload);\r\n                                        }\r\n                                        else {\r\n                                            _this._onErrorHelper(error);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    _this._onErrorHelper(error);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _this._onErrorHelper(error);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Sender.prototype._onErrorHelper = function (error) {\r\n        if (typeof this._onError === \"function\") {\r\n            this._onError(error);\r\n        }\r\n    };\r\n    Sender.TAG = \"Sender\";\r\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\r\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\r\n    Sender.ACLED_DIRECTORIES = {};\r\n    Sender.ACL_IDENTITY = null;\r\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\r\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\r\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\r\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\r\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\r\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\r\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\r\n    return Sender;\r\n}());\r\nmodule.exports = Sender;\r\n//# sourceMappingURL=Sender.js.map","\"use strict\";\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"./Util\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\n/**\r\n * Manages the logic of creating envelopes from Telemetry objects\r\n */\r\nvar EnvelopeFactory = (function () {\r\n    function EnvelopeFactory() {\r\n    }\r\n    /**\r\n     * Creates envelope ready to be sent by Channel\r\n     * @param telemetry Telemetry data\r\n     * @param telemetryType Type of telemetry\r\n     * @param commonProperties Bag of custom common properties to be added to the envelope\r\n     * @param context Client context\r\n     * @param config Client configuration\r\n     */\r\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\r\n        var data = null;\r\n        switch (telemetryType) {\r\n            case Contracts.TelemetryType.Trace:\r\n                data = EnvelopeFactory.createTraceData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Dependency:\r\n                data = EnvelopeFactory.createDependencyData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Event:\r\n                data = EnvelopeFactory.createEventData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Exception:\r\n                data = EnvelopeFactory.createExceptionData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Request:\r\n                data = EnvelopeFactory.createRequestData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Metric:\r\n                data = EnvelopeFactory.createMetricData(telemetry);\r\n                break;\r\n        }\r\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\r\n            if (data && data.baseData) {\r\n                // if no properties are specified just add the common ones\r\n                if (!data.baseData.properties) {\r\n                    data.baseData.properties = commonProperties;\r\n                }\r\n                else {\r\n                    // otherwise, check each of the common ones\r\n                    for (var name in commonProperties) {\r\n                        // only override if the property `name` has not been set on this item\r\n                        if (!data.baseData.properties[name]) {\r\n                            data.baseData.properties[name] = commonProperties[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // sanitize properties\r\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\r\n        }\r\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\r\n        var envelope = new Contracts.Envelope();\r\n        envelope.data = data;\r\n        envelope.iKey = iKey;\r\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\r\n        envelope.name =\r\n            \"Microsoft.ApplicationInsights.\" +\r\n                iKey.replace(/-/g, \"\") +\r\n                \".\" +\r\n                data.baseType.substr(0, data.baseType.length - 4);\r\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\r\n        envelope.time = (new Date()).toISOString();\r\n        envelope.ver = 1;\r\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\r\n        // Exclude metrics from sampling by default\r\n        if (telemetryType === Contracts.TelemetryType.Metric) {\r\n            envelope.sampleRate = 100;\r\n        }\r\n        return envelope;\r\n    };\r\n    EnvelopeFactory.createTraceData = function (telemetry) {\r\n        var trace = new Contracts.MessageData();\r\n        trace.message = telemetry.message;\r\n        trace.properties = telemetry.properties;\r\n        if (!isNaN(telemetry.severity)) {\r\n            trace.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            trace.severityLevel = Contracts.SeverityLevel.Information;\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\r\n        data.baseData = trace;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createDependencyData = function (telemetry) {\r\n        var remoteDependency = new Contracts.RemoteDependencyData();\r\n        remoteDependency.name = telemetry.name;\r\n        remoteDependency.data = telemetry.data;\r\n        remoteDependency.target = telemetry.target;\r\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\r\n        remoteDependency.success = telemetry.success;\r\n        remoteDependency.type = telemetry.dependencyTypeName;\r\n        remoteDependency.properties = telemetry.properties;\r\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        if (telemetry.id) {\r\n            remoteDependency.id = telemetry.id;\r\n        }\r\n        else {\r\n            remoteDependency.id = Util.w3cTraceId();\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\r\n        data.baseData = remoteDependency;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createEventData = function (telemetry) {\r\n        var event = new Contracts.EventData();\r\n        event.name = telemetry.name;\r\n        event.properties = telemetry.properties;\r\n        event.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\r\n        data.baseData = event;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createExceptionData = function (telemetry) {\r\n        var exception = new Contracts.ExceptionData();\r\n        exception.properties = telemetry.properties;\r\n        exception.severityLevel = Contracts.SeverityLevel.Error;\r\n        exception.measurements = telemetry.measurements;\r\n        exception.exceptions = [];\r\n        var stack = telemetry.exception[\"stack\"];\r\n        var exceptionDetails = new Contracts.ExceptionDetails();\r\n        exceptionDetails.message = telemetry.exception.message;\r\n        exceptionDetails.typeName = telemetry.exception.name;\r\n        exceptionDetails.parsedStack = this.parseStack(stack);\r\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\r\n        exception.exceptions.push(exceptionDetails);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\r\n        data.baseData = exception;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createRequestData = function (telemetry) {\r\n        var requestData = new Contracts.RequestData();\r\n        if (telemetry.id) {\r\n            requestData.id = telemetry.id;\r\n        }\r\n        else {\r\n            requestData.id = Util.w3cTraceId();\r\n        }\r\n        requestData.name = telemetry.name;\r\n        requestData.url = telemetry.url;\r\n        requestData.source = telemetry.source;\r\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        requestData.success = telemetry.success;\r\n        requestData.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\r\n        data.baseData = requestData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createMetricData = function (telemetry) {\r\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\r\n        metrics.metrics = [];\r\n        var metric = new Contracts.DataPoint();\r\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\r\n        metric.kind = Contracts.DataPointType.Aggregation;\r\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\r\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\r\n        metric.name = telemetry.name;\r\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\r\n        metric.value = telemetry.value;\r\n        metrics.metrics.push(metric);\r\n        metrics.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\r\n        data.baseData = metrics;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        // Make a copy of context tags so we don't alter the actual object\r\n        // Also perform tag overriding\r\n        var newTags = {};\r\n        if (context && context.tags) {\r\n            for (var key in context.tags) {\r\n                newTags[key] = context.tags[key];\r\n            }\r\n        }\r\n        if (tagOverrides) {\r\n            for (var key in tagOverrides) {\r\n                newTags[key] = tagOverrides[key];\r\n            }\r\n        }\r\n        // Fill in internally-populated values if not already set\r\n        if (correlationContext) {\r\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\r\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\r\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\r\n        }\r\n        return newTags;\r\n    };\r\n    EnvelopeFactory.parseStack = function (stack) {\r\n        var parsedStack = undefined;\r\n        if (typeof stack === \"string\") {\r\n            var frames = stack.split(\"\\n\");\r\n            parsedStack = [];\r\n            var level = 0;\r\n            var totalSizeInBytes = 0;\r\n            for (var i = 0; i <= frames.length; i++) {\r\n                var frame = frames[i];\r\n                if (_StackFrame.regex.test(frame)) {\r\n                    var parsedFrame = new _StackFrame(frames[i], level++);\r\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\r\n                    parsedStack.push(parsedFrame);\r\n                }\r\n            }\r\n            // DP Constraint - exception parsed stack must be < 32KB\r\n            // remove frames from the middle to meet the threshold\r\n            var exceptionParsedStackThreshold = 32 * 1024;\r\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\r\n                var left = 0;\r\n                var right = parsedStack.length - 1;\r\n                var size = 0;\r\n                var acceptedLeft = left;\r\n                var acceptedRight = right;\r\n                while (left < right) {\r\n                    // check size\r\n                    var lSize = parsedStack[left].sizeInBytes;\r\n                    var rSize = parsedStack[right].sizeInBytes;\r\n                    size += lSize + rSize;\r\n                    if (size > exceptionParsedStackThreshold) {\r\n                        // remove extra frames from the middle\r\n                        var howMany = acceptedRight - acceptedLeft + 1;\r\n                        parsedStack.splice(acceptedLeft, howMany);\r\n                        break;\r\n                    }\r\n                    // update pointers\r\n                    acceptedLeft = left;\r\n                    acceptedRight = right;\r\n                    left++;\r\n                    right--;\r\n                }\r\n            }\r\n        }\r\n        return parsedStack;\r\n    };\r\n    return EnvelopeFactory;\r\n}());\r\nvar _StackFrame = (function () {\r\n    function _StackFrame(frame, level) {\r\n        this.sizeInBytes = 0;\r\n        this.level = level;\r\n        this.method = \"<no_method>\";\r\n        this.assembly = Util.trim(frame);\r\n        var matches = frame.match(_StackFrame.regex);\r\n        if (matches && matches.length >= 5) {\r\n            this.method = Util.trim(matches[2]) || this.method;\r\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\r\n            this.line = parseInt(matches[5]) || 0;\r\n        }\r\n        this.sizeInBytes += this.method.length;\r\n        this.sizeInBytes += this.fileName.length;\r\n        this.sizeInBytes += this.assembly.length;\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        this.sizeInBytes += _StackFrame.baseSize;\r\n        this.sizeInBytes += this.level.toString().length;\r\n        this.sizeInBytes += this.line.toString().length;\r\n    }\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nmodule.exports = EnvelopeFactory;\r\n//# sourceMappingURL=EnvelopeFactory.js.map","// tslint:disable-next-line: no-implicit-dependencies\nimport { window } from \"vscode\";\nimport { TemplateService } from \"./TemplateService\";\n\nexport type createConfigFileFunction = (\n  options?: Map<string, any>\n) => Promise<void>;\n\nexport const createConfigFile = (\n  templateService: TemplateService\n): createConfigFileFunction => async (options?: Map<string, any>) => {\n  const folderResult = await window.showOpenDialog({\n    canSelectFiles: false,\n    canSelectFolders: true,\n    canSelectMany: false,\n  });\n  if (folderResult && folderResult.length === 1) {\n    const folderUri = folderResult[0];\n    await templateService.writeConfigFile(folderUri, options);\n  }\n};\n","import * as prettier from \"prettier\";\nimport { LoggingService } from \"./LoggingService\";\n\ninterface IResolveConfigResult {\n  config: prettier.Options | null;\n  error?: Error;\n}\n\nexport interface RangeFormattingOptions {\n  rangeStart: number;\n  rangeEnd: number;\n}\n\nexport class ConfigResolver {\n  constructor(private loggingService: LoggingService) {}\n\n  public async getPrettierOptions(\n    fileName: string,\n    parser: prettier.BuiltInParserName,\n    vsCodeConfig: prettier.Options,\n    resolveConfigOptions: prettier.ResolveConfigOptions,\n    rangeFormattingOptions?: RangeFormattingOptions\n  ): Promise<{ options?: Partial<prettier.Options>; error?: Error }> {\n    const { config: configOptions, error } = await this.resolveConfig(\n      fileName,\n      resolveConfigOptions\n    );\n\n    if (error) {\n      return { error };\n    }\n\n    const vsOpts: prettier.Options = {};\n\n    const fallbackToVSCodeConfig = configOptions === null;\n\n    if (fallbackToVSCodeConfig) {\n      vsOpts.arrowParens = vsCodeConfig.arrowParens;\n      vsOpts.bracketSpacing = vsCodeConfig.bracketSpacing;\n      vsOpts.endOfLine = vsCodeConfig.endOfLine;\n      vsOpts.htmlWhitespaceSensitivity = vsCodeConfig.htmlWhitespaceSensitivity;\n      vsOpts.insertPragma = vsCodeConfig.insertPragma;\n      vsOpts.jsxBracketSameLine = vsCodeConfig.jsxBracketSameLine;\n      vsOpts.jsxSingleQuote = vsCodeConfig.jsxSingleQuote;\n      vsOpts.printWidth = vsCodeConfig.printWidth;\n      vsOpts.proseWrap = vsCodeConfig.proseWrap;\n      vsOpts.quoteProps = vsCodeConfig.quoteProps;\n      vsOpts.requirePragma = vsCodeConfig.requirePragma;\n      vsOpts.semi = vsCodeConfig.semi;\n      vsOpts.singleQuote = vsCodeConfig.singleQuote;\n      vsOpts.tabWidth = vsCodeConfig.tabWidth;\n      vsOpts.trailingComma = vsCodeConfig.trailingComma;\n      vsOpts.useTabs = vsCodeConfig.useTabs;\n      vsOpts.vueIndentScriptAndStyle = vsCodeConfig.vueIndentScriptAndStyle;\n    }\n\n    this.loggingService.logInfo(\n      fallbackToVSCodeConfig\n        ? \"No local configuration (i.e. .prettierrc or .editorconfig) detected, falling back to VS Code configuration\"\n        : \"Detected local configuration (i.e. .prettierrc or .editorconfig), VS Code configuration will not be used\"\n    );\n\n    const options: prettier.Options = {\n      ...(fallbackToVSCodeConfig ? vsOpts : {}),\n      ...{\n        /* cspell: disable-next-line */\n        filepath: fileName,\n        parser: parser as prettier.BuiltInParserName,\n      },\n      ...(rangeFormattingOptions || {}),\n      ...(configOptions || {}),\n    };\n\n    return { options };\n  }\n\n  /**\n   * Check if a given file has an associated prettier config.\n   * @param filePath file's path\n   */\n  public async checkHasPrettierConfig(filePath: string) {\n    const { config, error } = await this.resolveConfig(filePath);\n    if (error) {\n      throw error;\n    }\n    return config !== null;\n  }\n\n  /**\n   * Resolves the prettier config for the given file.\n   *\n   * @param filePath file's path\n   */\n  private async resolveConfig(\n    filePath: string,\n    options?: prettier.ResolveConfigOptions\n  ): Promise<IResolveConfigResult> {\n    try {\n      const config = await prettier.resolveConfig(filePath, options);\n      return { config };\n    } catch (error) {\n      return { config: null, error };\n    }\n  }\n}\n","// tslint:disable-next-line: no-implicit-dependencies\nimport { Uri } from \"vscode\";\nimport { LoggingService } from \"./LoggingService\";\nimport { getConfig, getWorkspaceRelativePath } from \"./util\";\n\nexport class IgnorerResolver {\n  constructor(private loggingService: LoggingService) {}\n\n  public getIgnorePath(fsPath: string): string | undefined {\n    const absolutePath = this.getIgnorePathForFile(\n      fsPath,\n      getConfig(Uri.file(fsPath)).ignorePath\n    );\n    this.loggingService.logInfo(\n      `Using ignore file (if present) at ${absolutePath}`\n    );\n    return absolutePath;\n  }\n\n  private getIgnorePathForFile(\n    filePath: string,\n    ignorePath: string\n  ): string | undefined {\n    // Configuration `prettier.ignorePath` is set to `null`\n    if (!ignorePath) {\n      return;\n    }\n    return getWorkspaceRelativePath(filePath, ignorePath);\n  }\n}\n","import * as prettier from \"prettier\";\n// tslint:disable-next-line: no-implicit-dependencies\nimport { Uri } from \"vscode\";\nimport { ModuleResolver } from \"./ModuleResolver\";\n\nconst ESLINT_SUPPORTED_LANGUAGES = [\n  \"javascript\",\n  \"javascriptreact\",\n  \"typescript\",\n  \"typescriptreact\",\n  \"vue\",\n];\n\nconst STYLE_PARSERS = [\"postcss\", \"css\", \"less\", \"scss\"];\n\nexport class LanguageResolver {\n  constructor(private moduleResolver: ModuleResolver) {}\n  public getParsersFromLanguageId(\n    uri: Uri,\n    languageId: string\n  ): prettier.BuiltInParserName[] | string[] {\n    if (uri.scheme === \"untitled\" && languageId === \"html\") {\n      // This is a workaround for the HTML language when it is unsaved. By default,\n      // the Angular parser matches first because both register the language 'html'\n      return [\"html\"];\n    }\n    const language = this.getSupportLanguages(uri.fsPath).find(\n      (lang) =>\n        lang &&\n        lang.extensions &&\n        Array.isArray(lang.vscodeLanguageIds) &&\n        lang.vscodeLanguageIds.includes(languageId)\n    );\n    if (!language) {\n      return [];\n    }\n    return language.parsers;\n  }\n\n  public allEnabledLanguages(fsPath?: string): string[] {\n    const enabledLanguages: string[] = [];\n    this.getSupportLanguages(fsPath).forEach((lang) => {\n      if (lang && lang.vscodeLanguageIds) {\n        enabledLanguages.push(...lang.vscodeLanguageIds);\n      }\n    });\n    return enabledLanguages.filter((value, index, self) => {\n      return self.indexOf(value) === index;\n    });\n  }\n\n  public rangeSupportedLanguages(): string[] {\n    return [\n      \"javascript\",\n      \"javascriptreact\",\n      \"typescript\",\n      \"typescriptreact\",\n      \"json\",\n      \"graphql\",\n    ];\n  }\n\n  public doesLanguageSupportESLint(languageId: string) {\n    return ESLINT_SUPPORTED_LANGUAGES.includes(languageId);\n  }\n\n  public doesParserSupportStylelint(parser: string) {\n    return STYLE_PARSERS.includes(parser);\n  }\n\n  private getSupportLanguages(fsPath?: string) {\n    const prettierInstance = this.moduleResolver.getPrettierInstance(fsPath);\n    return prettierInstance.getSupportInfo().languages;\n  }\n}\n","import * as prettier from \"prettier\";\n// tslint:disable-next-line: no-implicit-dependencies\nimport { window } from \"vscode\";\n\ntype LogLevel = \"INFO\" | \"WARN\" | \"ERROR\" | \"NONE\";\n\nexport class LoggingService {\n  private outputChannel = window.createOutputChannel(\"Prettier\");\n\n  private logLevel: LogLevel = \"INFO\";\n\n  public setOutputLevel(logLevel: LogLevel) {\n    this.logLevel = logLevel;\n  }\n\n  /**\n   * Append messages to the output channel and format it with a title\n   *\n   * @param message The message to append to the output channel\n   */\n  public logInfo(message: string, data?: object): void {\n    if (\n      this.logLevel === \"NONE\" ||\n      this.logLevel === \"WARN\" ||\n      this.logLevel === \"ERROR\"\n    ) {\n      return;\n    }\n    this.logMessage(message, \"INFO\");\n    if (data) {\n      this.logObject(data);\n    }\n  }\n\n  /**\n   * Append messages to the output channel and format it with a title\n   *\n   * @param message The message to append to the output channel\n   */\n  public logWarning(message: string, data?: object): void {\n    if (this.logLevel === \"NONE\" || this.logLevel === \"ERROR\") {\n      return;\n    }\n    this.logMessage(message, \"WARN\");\n    if (data) {\n      this.logObject(data);\n    }\n  }\n\n  public logError(message: string, error?: Error) {\n    if (this.logLevel === \"NONE\") {\n      return;\n    }\n    this.logMessage(message, \"ERROR\");\n    if (error?.message) {\n      this.logMessage(error.message, \"ERROR\");\n    }\n    if (error?.stack) {\n      this.outputChannel.appendLine(error.stack);\n    }\n  }\n\n  public show() {\n    this.outputChannel.show();\n  }\n\n  private logObject(data: object): void {\n    const message = prettier\n      .format(JSON.stringify(data, null, 2), {\n        parser: \"json\",\n      })\n      .trim();\n    this.outputChannel.appendLine(message);\n  }\n\n  /**\n   * Append messages to the output channel and format it with a title\n   *\n   * @param message The message to append to the output channel\n   */\n  private logMessage(message: string, logLevel: LogLevel): void {\n    const title = new Date().toLocaleTimeString();\n    this.outputChannel.appendLine(`[\"${logLevel}\" - ${title}] ${message}`);\n  }\n}\n","import { execSync } from \"child_process\";\nimport * as findUp from \"find-up\";\nimport * as fs from \"fs\";\nimport * as mem from \"mem\";\nimport * as path from \"path\";\nimport * as prettier from \"prettier\";\nimport * as resolve from \"resolve\";\nimport * as semver from \"semver\";\n// tslint:disable-next-line: no-implicit-dependencies\nimport { Disposable, Uri } from \"vscode\";\nimport { resolveGlobalNodePath, resolveGlobalYarnPath } from \"./Files\";\nimport { LoggingService } from \"./LoggingService\";\nimport { FAILED_TO_LOAD_MODULE_MESSAGE } from \"./message\";\nimport { NotificationService } from \"./NotificationService\";\nimport { PackageManagers, PrettierModule } from \"./types\";\nimport { getConfig, getWorkspaceRelativePath } from \"./util\";\n\nconst minPrettierVersion = \"1.13.0\";\ndeclare const __webpack_require__: typeof require;\ndeclare const __non_webpack_require__: typeof require;\n\ninterface ModuleResult<T> {\n  moduleInstance: T | undefined;\n  modulePath: string | undefined;\n}\n\ninterface ModuleResolutionOptions {\n  showNotifications: boolean;\n}\n\nconst globalPaths: {\n  [key: string]: { cache: string | undefined; get(): string | undefined };\n} = {\n  npm: {\n    cache: undefined,\n    get(): string | undefined {\n      return resolveGlobalNodePath();\n    },\n  },\n  pnpm: {\n    cache: undefined,\n    get(): string {\n      const pnpmPath = execSync(\"pnpm root -g\").toString().trim();\n      return pnpmPath;\n    },\n  },\n  yarn: {\n    cache: undefined,\n    get(): string | undefined {\n      return resolveGlobalYarnPath();\n    },\n  },\n};\n\nfunction globalPathGet(packageManager: PackageManagers): string | undefined {\n  const pm = globalPaths[packageManager];\n  if (pm) {\n    if (pm.cache === undefined) {\n      pm.cache = pm.get();\n    }\n    return pm.cache;\n  }\n  return undefined;\n}\n\nexport class ModuleResolver implements Disposable {\n  private findPkgMem: (fsPath: string, pkgName: string) => string | undefined;\n  private resolvedModules = new Array<string>();\n\n  constructor(\n    private loggingService: LoggingService,\n    private notificationService: NotificationService\n  ) {\n    this.findPkgMem = mem(this.findPkg, {\n      cacheKey: (args) => `${args[0]}:${args[1]}`,\n    });\n  }\n\n  /**\n   * Returns an instance of the prettier module.\n   * @param fileName The path of the file to use as the starting point. If none provided, the bundled prettier will be used.\n   */\n  public getPrettierInstance(\n    fileName?: string,\n    options?: ModuleResolutionOptions\n  ): PrettierModule {\n    if (!fileName) {\n      return prettier;\n    }\n\n    const { prettierPath, packageManager, resolveGlobalModules } = getConfig(\n      Uri.file(fileName)\n    );\n\n    // tslint:disable-next-line: prefer-const\n    let { moduleInstance, modulePath } = this.requireLocalPkg<PrettierModule>(\n      fileName,\n      \"prettier\",\n      prettierPath,\n      options\n    );\n\n    if (resolveGlobalModules && !moduleInstance) {\n      const globalModuleResult = this.requireGlobalPkg<PrettierModule>(\n        packageManager,\n        \"prettier\"\n      );\n      if (\n        globalModuleResult?.moduleInstance &&\n        globalModuleResult?.modulePath\n      ) {\n        moduleInstance = globalModuleResult.moduleInstance;\n        modulePath = globalModuleResult.modulePath;\n      }\n    }\n\n    if (!moduleInstance && options?.showNotifications) {\n      this.loggingService.logInfo(\"Using bundled version of prettier.\");\n    }\n\n    if (moduleInstance) {\n      const isValidVersion =\n        moduleInstance.version &&\n        !!moduleInstance.getSupportInfo &&\n        !!moduleInstance.getFileInfo &&\n        !!moduleInstance.resolveConfig &&\n        semver.gte(moduleInstance.version, minPrettierVersion);\n\n      if (!isValidVersion) {\n        if (options?.showNotifications) {\n          // We only prompt when formatting a file. If we did it on load there\n          // could be lots of these notifications which would be annoying.\n          this.notificationService.warnOutdatedPrettierVersion(modulePath);\n        }\n        this.loggingService.logError(\n          \"Outdated version of prettier installed. Falling back to bundled version of prettier.\"\n        );\n        // Invalid version, force bundled\n        moduleInstance = undefined;\n      }\n    }\n\n    return moduleInstance || prettier;\n  }\n\n  public getModuleInstance(fsPath: string, pkgName: string): any {\n    let { moduleInstance } = this.requireLocalPkg<any>(fsPath, pkgName);\n\n    const { packageManager, resolveGlobalModules } = getConfig();\n    if (resolveGlobalModules && !moduleInstance) {\n      const globalModuleResult = this.requireGlobalPkg<PrettierModule>(\n        packageManager,\n        pkgName\n      );\n      if (globalModuleResult?.moduleInstance) {\n        moduleInstance = globalModuleResult.moduleInstance;\n      }\n    }\n    return moduleInstance;\n  }\n\n  /**\n   * Clears the module and config cache\n   */\n  public dispose() {\n    this.getPrettierInstance().clearConfigCache();\n    this.resolvedModules.forEach((modulePath) => {\n      const r =\n        typeof __webpack_require__ === \"function\"\n          ? __non_webpack_require__\n          : require;\n      try {\n        const mod: any = r.cache[r.resolve(modulePath)];\n        mod?.exports?.clearConfigCache();\n        delete r.cache[r.resolve(modulePath)];\n      } catch (error) {\n        this.loggingService.logError(\"Error clearing module cache.\", error);\n      }\n    });\n  }\n\n  /**\n   * Require package explicitly installed relative to given path.\n   * Fallback to bundled one if no package was found bottom up.\n   * @param {string} fsPath file system path starting point to resolve package\n   * @param {string} pkgName package's name to require\n   * @returns module\n   */\n  private requireLocalPkg<T>(\n    fsPath: string,\n    pkgName: string,\n    modulePath?: string,\n    options?: ModuleResolutionOptions\n  ): ModuleResult<T> {\n    if (modulePath === \"\") {\n      modulePath = undefined;\n    }\n\n    try {\n      modulePath = modulePath\n        ? getWorkspaceRelativePath(fsPath, modulePath)\n        : this.findPkgMem(fsPath, pkgName);\n\n      if (modulePath !== undefined) {\n        const moduleInstance = this.loadNodeModule(modulePath);\n        if (this.resolvedModules.indexOf(modulePath) === -1) {\n          this.resolvedModules.push(modulePath);\n        }\n        this.loggingService.logInfo(\n          `Loaded module '${pkgName}@${\n            moduleInstance.version ?? \"unknown\"\n          }' from '${modulePath}'`\n        );\n        return { moduleInstance, modulePath };\n      }\n    } catch (error) {\n      let moduleDirectory = \"\";\n      if (!modulePath) {\n        // If findPkg threw an error from `resolve.sync`, attempt to parse the\n        // directory it failed on to provide a better error message\n        const resolveSyncPathRegex = /Cannot find module '.*' from '(.*)'/;\n        const resolveErrorMatches = resolveSyncPathRegex.exec(error.message);\n        if (resolveErrorMatches && resolveErrorMatches[1]) {\n          moduleDirectory = resolveErrorMatches[1];\n        }\n      }\n\n      this.loggingService.logError(\n        `Failed to load local module ${pkgName}.`,\n        error\n      );\n\n      if (options?.showNotifications) {\n        this.notificationService.showErrorMessage(\n          FAILED_TO_LOAD_MODULE_MESSAGE,\n          [\n            `Attempted to load ${pkgName} from ${\n              modulePath || moduleDirectory || \"package.json\"\n            }`,\n          ]\n        );\n      }\n    }\n    return { moduleInstance: undefined, modulePath };\n  }\n\n  private requireGlobalPkg<T>(\n    packageManager: PackageManagers,\n    pkgName: string\n  ): ModuleResult<T> {\n    const resolvedGlobalPackageManagerPath = globalPathGet(packageManager);\n    if (resolvedGlobalPackageManagerPath) {\n      const modulePath = path.join(resolvedGlobalPackageManagerPath, pkgName);\n      try {\n        if (fs.existsSync(modulePath)) {\n          const moduleInstance = this.loadNodeModule(modulePath);\n          if (this.resolvedModules.indexOf(modulePath) === -1) {\n            this.resolvedModules.push(modulePath);\n          }\n          this.loggingService.logInfo(\n            `Loaded module '${pkgName}@${\n              moduleInstance.version ?? \"unknown\"\n            }' from '${modulePath}'`\n          );\n          return { moduleInstance, modulePath };\n        }\n      } catch (error) {\n        this.loggingService.logError(\n          `Failed to load global module ${pkgName}.`,\n          error\n        );\n        return { moduleInstance: undefined, modulePath };\n      }\n    }\n    return { moduleInstance: undefined, modulePath: undefined };\n  }\n\n  // Source: https://github.com/microsoft/vscode-eslint/blob/master/server/src/eslintServer.ts#L209\n  private loadNodeModule(moduleName: string): any | undefined {\n    const r =\n      typeof __webpack_require__ === \"function\"\n        ? __non_webpack_require__\n        : require;\n    try {\n      return r(moduleName);\n    } catch (error) {\n      this.loggingService.logError(\n        `Error loading node module '${moduleName}'`,\n        error\n      );\n    }\n    return undefined;\n  }\n\n  /**\n   * Recursively search upwards for a given module definition based on\n   * package.json or node_modules existence\n   * @param {string} fsPath file system path to start searching from\n   * @param {string} pkgName package's name to search for\n   * @returns {string} resolved path to module\n   */\n  private findPkg(fsPath: string, pkgName: string): string | undefined {\n    // Only look for a module definition outside of any `node_modules` directories\n    const splitPath = fsPath.split(\"/\");\n    let finalPath = fsPath;\n    const nodeModulesIndex = splitPath.indexOf(\"node_modules\");\n\n    if (nodeModulesIndex > 1) {\n      finalPath = splitPath.slice(0, nodeModulesIndex).join(\"/\");\n    }\n\n    const resDir = findUp.sync(\n      (dir) => {\n        if (fs.existsSync(path.join(dir, \"package.json\"))) {\n          let packageJson;\n          try {\n            packageJson = JSON.parse(\n              fs.readFileSync(path.join(dir, \"package.json\"), \"utf8\")\n            );\n          } catch (e) {\n            // Swallow, if we can't read it we don't want to resolve based on it\n          }\n\n          if (\n            packageJson &&\n            ((packageJson.dependencies && packageJson.dependencies[pkgName]) ||\n              (packageJson.devDependencies &&\n                packageJson.devDependencies[pkgName]))\n          ) {\n            return dir;\n          }\n        }\n\n        if (fs.existsSync(path.join(dir, \"node_modules\", pkgName))) {\n          return dir;\n        }\n      },\n      { cwd: finalPath, type: \"directory\" }\n    );\n\n    if (resDir) {\n      return resolve.sync(pkgName, { basedir: resDir });\n    }\n\n    return;\n  }\n}\n","'use strict';\nconst path = require('path');\nconst locatePath = require('locate-path');\nconst pathExists = require('path-exists');\n\nconst stop = Symbol('findUp.stop');\n\nmodule.exports = async (name, options = {}) => {\n\tlet directory = path.resolve(options.cwd || '');\n\tconst {root} = path.parse(directory);\n\tconst paths = [].concat(name);\n\n\tconst runMatcher = async locateOptions => {\n\t\tif (typeof name !== 'function') {\n\t\t\treturn locatePath(paths, locateOptions);\n\t\t}\n\n\t\tconst foundPath = await name(locateOptions.cwd);\n\t\tif (typeof foundPath === 'string') {\n\t\t\treturn locatePath([foundPath], locateOptions);\n\t\t}\n\n\t\treturn foundPath;\n\t};\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\t// eslint-disable-next-line no-await-in-loop\n\t\tconst foundPath = await runMatcher({...options, cwd: directory});\n\n\t\tif (foundPath === stop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (foundPath) {\n\t\t\treturn path.resolve(directory, foundPath);\n\t\t}\n\n\t\tif (directory === root) {\n\t\t\treturn;\n\t\t}\n\n\t\tdirectory = path.dirname(directory);\n\t}\n};\n\nmodule.exports.sync = (name, options = {}) => {\n\tlet directory = path.resolve(options.cwd || '');\n\tconst {root} = path.parse(directory);\n\tconst paths = [].concat(name);\n\n\tconst runMatcher = locateOptions => {\n\t\tif (typeof name !== 'function') {\n\t\t\treturn locatePath.sync(paths, locateOptions);\n\t\t}\n\n\t\tconst foundPath = name(locateOptions.cwd);\n\t\tif (typeof foundPath === 'string') {\n\t\t\treturn locatePath.sync([foundPath], locateOptions);\n\t\t}\n\n\t\treturn foundPath;\n\t};\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst foundPath = runMatcher({...options, cwd: directory});\n\n\t\tif (foundPath === stop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (foundPath) {\n\t\t\treturn path.resolve(directory, foundPath);\n\t\t}\n\n\t\tif (directory === root) {\n\t\t\treturn;\n\t\t}\n\n\t\tdirectory = path.dirname(directory);\n\t}\n};\n\nmodule.exports.exists = pathExists;\n\nmodule.exports.sync.exists = pathExists.sync;\n\nmodule.exports.stop = stop;\n","'use strict';\nconst path = require('path');\nconst fs = require('fs');\nconst {promisify} = require('util');\nconst pLocate = require('p-locate');\n\nconst fsStat = promisify(fs.stat);\nconst fsLStat = promisify(fs.lstat);\n\nconst typeMappings = {\n\tdirectory: 'isDirectory',\n\tfile: 'isFile'\n};\n\nfunction checkType({type}) {\n\tif (type in typeMappings) {\n\t\treturn;\n\t}\n\n\tthrow new Error(`Invalid type specified: ${type}`);\n}\n\nconst matchType = (type, stat) => type === undefined || stat[typeMappings[type]]();\n\nmodule.exports = async (paths, options) => {\n\toptions = {\n\t\tcwd: process.cwd(),\n\t\ttype: 'file',\n\t\tallowSymlinks: true,\n\t\t...options\n\t};\n\tcheckType(options);\n\tconst statFn = options.allowSymlinks ? fsStat : fsLStat;\n\n\treturn pLocate(paths, async path_ => {\n\t\ttry {\n\t\t\tconst stat = await statFn(path.resolve(options.cwd, path_));\n\t\t\treturn matchType(options.type, stat);\n\t\t} catch (_) {\n\t\t\treturn false;\n\t\t}\n\t}, options);\n};\n\nmodule.exports.sync = (paths, options) => {\n\toptions = {\n\t\tcwd: process.cwd(),\n\t\tallowSymlinks: true,\n\t\ttype: 'file',\n\t\t...options\n\t};\n\tcheckType(options);\n\tconst statFn = options.allowSymlinks ? fs.statSync : fs.lstatSync;\n\n\tfor (const path_ of paths) {\n\t\ttry {\n\t\t\tconst stat = statFn(path.resolve(options.cwd, path_));\n\n\t\t\tif (matchType(options.type, stat)) {\n\t\t\t\treturn path_;\n\t\t\t}\n\t\t} catch (_) {\n\t\t}\n\t}\n};\n","'use strict';\nconst pLimit = require('p-limit');\n\nclass EndError extends Error {\n\tconstructor(value) {\n\t\tsuper();\n\t\tthis.value = value;\n\t}\n}\n\n// The input can also be a promise, so we await it\nconst testElement = async (element, tester) => tester(await element);\n\n// The input can also be a promise, so we `Promise.all()` them both\nconst finder = async element => {\n\tconst values = await Promise.all(element);\n\tif (values[1] === true) {\n\t\tthrow new EndError(values[0]);\n\t}\n\n\treturn false;\n};\n\nconst pLocate = async (iterable, tester, options) => {\n\toptions = {\n\t\tconcurrency: Infinity,\n\t\tpreserveOrder: true,\n\t\t...options\n\t};\n\n\tconst limit = pLimit(options.concurrency);\n\n\t// Start all the promises concurrently with optional limit\n\tconst items = [...iterable].map(element => [element, limit(testElement, element, tester)]);\n\n\t// Check the promises either serially or concurrently\n\tconst checkLimit = pLimit(options.preserveOrder ? 1 : Infinity);\n\n\ttry {\n\t\tawait Promise.all(items.map(element => checkLimit(finder, element)));\n\t} catch (error) {\n\t\tif (error instanceof EndError) {\n\t\t\treturn error.value;\n\t\t}\n\n\t\tthrow error;\n\t}\n};\n\nmodule.exports = pLocate;\n// TODO: Remove this for the next major release\nmodule.exports.default = pLocate;\n","'use strict';\nconst pTry = require('p-try');\n\nconst pLimit = concurrency => {\n\tif (!((Number.isInteger(concurrency) || concurrency === Infinity) && concurrency > 0)) {\n\t\treturn Promise.reject(new TypeError('Expected `concurrency` to be a number from 1 and up'));\n\t}\n\n\tconst queue = [];\n\tlet activeCount = 0;\n\n\tconst next = () => {\n\t\tactiveCount--;\n\n\t\tif (queue.length > 0) {\n\t\t\tqueue.shift()();\n\t\t}\n\t};\n\n\tconst run = (fn, resolve, ...args) => {\n\t\tactiveCount++;\n\n\t\tconst result = pTry(fn, ...args);\n\n\t\tresolve(result);\n\n\t\tresult.then(next, next);\n\t};\n\n\tconst enqueue = (fn, resolve, ...args) => {\n\t\tif (activeCount < concurrency) {\n\t\t\trun(fn, resolve, ...args);\n\t\t} else {\n\t\t\tqueue.push(run.bind(null, fn, resolve, ...args));\n\t\t}\n\t};\n\n\tconst generator = (fn, ...args) => new Promise(resolve => enqueue(fn, resolve, ...args));\n\tObject.defineProperties(generator, {\n\t\tactiveCount: {\n\t\t\tget: () => activeCount\n\t\t},\n\t\tpendingCount: {\n\t\t\tget: () => queue.length\n\t\t},\n\t\tclearQueue: {\n\t\t\tvalue: () => {\n\t\t\t\tqueue.length = 0;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn generator;\n};\n\nmodule.exports = pLimit;\nmodule.exports.default = pLimit;\n","'use strict';\n\nconst pTry = (fn, ...arguments_) => new Promise(resolve => {\n\tresolve(fn(...arguments_));\n});\n\nmodule.exports = pTry;\n// TODO: remove this in the next major version\nmodule.exports.default = pTry;\n","'use strict';\nconst fs = require('fs');\nconst {promisify} = require('util');\n\nconst pAccess = promisify(fs.access);\n\nmodule.exports = async path => {\n\ttry {\n\t\tawait pAccess(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n\nmodule.exports.sync = path => {\n\ttry {\n\t\tfs.accessSync(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n","'use strict';\nconst mimicFn = require('mimic-fn');\nconst mapAgeCleaner = require('map-age-cleaner');\n\nconst cacheStore = new WeakMap();\n\nconst mem = (fn, {\n\tcacheKey = ([firstArgument]) => firstArgument,\n\tcache = new Map(),\n\tmaxAge\n} = {}) => {\n\tif (typeof maxAge === 'number') {\n\t\tmapAgeCleaner(cache);\n\t}\n\n\tconst memoized = function (...arguments_) {\n\t\tconst key = cacheKey(arguments_);\n\n\t\tif (cache.has(key)) {\n\t\t\treturn cache.get(key).data;\n\t\t}\n\n\t\tconst cacheItem = fn.apply(this, arguments_);\n\n\t\tcache.set(key, {\n\t\t\tdata: cacheItem,\n\t\t\tmaxAge: maxAge ? Date.now() + maxAge : Infinity\n\t\t});\n\n\t\treturn cacheItem;\n\t};\n\n\ttry {\n\t\t// The below call will throw in some host environments\n\t\t// See https://github.com/sindresorhus/mimic-fn/issues/10\n\t\tmimicFn(memoized, fn);\n\t} catch (_) {}\n\n\tcacheStore.set(memoized, cache);\n\n\treturn memoized;\n};\n\nmodule.exports = mem;\n\nmodule.exports.clear = fn => {\n\tif (!cacheStore.has(fn)) {\n\t\tthrow new Error('Can\\'t clear a function that was not memoized!');\n\t}\n\n\tconst cache = cacheStore.get(fn);\n\tif (typeof cache.clear === 'function') {\n\t\tcache.clear();\n\t}\n};\n","'use strict';\n\nconst copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n//  - one its descriptors is changed\n//  - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nconst mimicFn = (to, from, {ignoreNonConfigurable = false} = {}) => {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst p_defer_1 = __importDefault(require(\"p-defer\"));\nfunction mapAgeCleaner(map, property = 'maxAge') {\n    let processingKey;\n    let processingTimer;\n    let processingDeferred;\n    const cleanup = () => __awaiter(this, void 0, void 0, function* () {\n        if (processingKey !== undefined) {\n            // If we are already processing an item, we can safely exit\n            return;\n        }\n        const setupTimer = (item) => __awaiter(this, void 0, void 0, function* () {\n            processingDeferred = p_defer_1.default();\n            const delay = item[1][property] - Date.now();\n            if (delay <= 0) {\n                // Remove the item immediately if the delay is equal to or below 0\n                map.delete(item[0]);\n                processingDeferred.resolve();\n                return;\n            }\n            // Keep track of the current processed key\n            processingKey = item[0];\n            processingTimer = setTimeout(() => {\n                // Remove the item when the timeout fires\n                map.delete(item[0]);\n                if (processingDeferred) {\n                    processingDeferred.resolve();\n                }\n            }, delay);\n            // tslint:disable-next-line:strict-type-predicates\n            if (typeof processingTimer.unref === 'function') {\n                // Don't hold up the process from exiting\n                processingTimer.unref();\n            }\n            return processingDeferred.promise;\n        });\n        try {\n            for (const entry of map) {\n                yield setupTimer(entry);\n            }\n        }\n        catch (_a) {\n            // Do nothing if an error occurs, this means the timer was cleaned up and we should stop processing\n        }\n        processingKey = undefined;\n    });\n    const reset = () => {\n        processingKey = undefined;\n        if (processingTimer !== undefined) {\n            clearTimeout(processingTimer);\n            processingTimer = undefined;\n        }\n        if (processingDeferred !== undefined) { // tslint:disable-line:early-exit\n            processingDeferred.reject(undefined);\n            processingDeferred = undefined;\n        }\n    };\n    const originalSet = map.set.bind(map);\n    map.set = (key, value) => {\n        if (map.has(key)) {\n            // If the key already exist, remove it so we can add it back at the end of the map.\n            map.delete(key);\n        }\n        // Call the original `map.set`\n        const result = originalSet(key, value);\n        // If we are already processing a key and the key added is the current processed key, stop processing it\n        if (processingKey && processingKey === key) {\n            reset();\n        }\n        // Always run the cleanup method in case it wasn't started yet\n        cleanup(); // tslint:disable-line:no-floating-promises\n        return result;\n    };\n    cleanup(); // tslint:disable-line:no-floating-promises\n    return map;\n}\nexports.default = mapAgeCleaner;\n// Add support for CJS\nmodule.exports = mapAgeCleaner;\nmodule.exports.default = mapAgeCleaner;\n","'use strict';\nmodule.exports = () => {\n\tconst ret = {};\n\n\tret.promise = new Promise((resolve, reject) => {\n\t\tret.resolve = resolve;\n\t\tret.reject = reject;\n\t});\n\n\treturn ret;\n};\n","var async = require('./lib/async');\nasync.core = require('./lib/core');\nasync.isCore = require('./lib/is-core');\nasync.sync = require('./lib/sync');\n\nmodule.exports = async;\n","var fs = require('fs');\nvar path = require('path');\nvar caller = require('./caller.js');\nvar nodeModulesPaths = require('./node-modules-paths.js');\nvar normalizeOptions = require('./normalize-options.js');\nvar isCore = require('./is-core');\n\nvar defaultIsFile = function isFile(file, cb) {\n    fs.stat(file, function (err, stat) {\n        if (!err) {\n            return cb(null, stat.isFile() || stat.isFIFO());\n        }\n        if (err.code === 'ENOENT' || err.code === 'ENOTDIR') return cb(null, false);\n        return cb(err);\n    });\n};\n\nvar defaultIsDir = function isDirectory(dir, cb) {\n    fs.stat(dir, function (err, stat) {\n        if (!err) {\n            return cb(null, stat.isDirectory());\n        }\n        if (err.code === 'ENOENT' || err.code === 'ENOTDIR') return cb(null, false);\n        return cb(err);\n    });\n};\n\nvar maybeUnwrapSymlink = function maybeUnwrapSymlink(x, opts, cb) {\n    if (opts && opts.preserveSymlinks === false) {\n        fs.realpath(x, function (realPathErr, realPath) {\n            if (realPathErr && realPathErr.code !== 'ENOENT') cb(realPathErr);\n            else cb(null, realPathErr ? x : realPath);\n        });\n    } else {\n        cb(null, x);\n    }\n};\n\nvar getPackageCandidates = function getPackageCandidates(x, start, opts) {\n    var dirs = nodeModulesPaths(start, opts, x);\n    for (var i = 0; i < dirs.length; i++) {\n        dirs[i] = path.join(dirs[i], x);\n    }\n    return dirs;\n};\n\nmodule.exports = function resolve(x, options, callback) {\n    var cb = callback;\n    var opts = options;\n    if (typeof options === 'function') {\n        cb = opts;\n        opts = {};\n    }\n    if (typeof x !== 'string') {\n        var err = new TypeError('Path must be a string.');\n        return process.nextTick(function () {\n            cb(err);\n        });\n    }\n\n    opts = normalizeOptions(x, opts);\n\n    var isFile = opts.isFile || defaultIsFile;\n    var isDirectory = opts.isDirectory || defaultIsDir;\n    var readFile = opts.readFile || fs.readFile;\n    var packageIterator = opts.packageIterator;\n\n    var extensions = opts.extensions || ['.js'];\n    var basedir = opts.basedir || path.dirname(caller());\n    var parent = opts.filename || basedir;\n\n    opts.paths = opts.paths || [];\n\n    // ensure that `basedir` is an absolute path at this point, resolving against the process' current working directory\n    var absoluteStart = path.resolve(basedir);\n\n    maybeUnwrapSymlink(\n        absoluteStart,\n        opts,\n        function (err, realStart) {\n            if (err) cb(err);\n            else init(realStart);\n        }\n    );\n\n    var res;\n    function init(basedir) {\n        if ((/^(?:\\.\\.?(?:\\/|$)|\\/|([A-Za-z]:)?[/\\\\])/).test(x)) {\n            res = path.resolve(basedir, x);\n            if (x === '.' || x === '..' || x.slice(-1) === '/') res += '/';\n            if ((/\\/$/).test(x) && res === basedir) {\n                loadAsDirectory(res, opts.package, onfile);\n            } else loadAsFile(res, opts.package, onfile);\n        } else if (isCore(x)) {\n            return cb(null, x);\n        } else loadNodeModules(x, basedir, function (err, n, pkg) {\n            if (err) cb(err);\n            else if (n) {\n                return maybeUnwrapSymlink(n, opts, function (err, realN) {\n                    if (err) {\n                        cb(err);\n                    } else {\n                        cb(null, realN, pkg);\n                    }\n                });\n            } else {\n                var moduleError = new Error(\"Cannot find module '\" + x + \"' from '\" + parent + \"'\");\n                moduleError.code = 'MODULE_NOT_FOUND';\n                cb(moduleError);\n            }\n        });\n    }\n\n    function onfile(err, m, pkg) {\n        if (err) cb(err);\n        else if (m) cb(null, m, pkg);\n        else loadAsDirectory(res, function (err, d, pkg) {\n            if (err) cb(err);\n            else if (d) {\n                maybeUnwrapSymlink(d, opts, function (err, realD) {\n                    if (err) {\n                        cb(err);\n                    } else {\n                        cb(null, realD, pkg);\n                    }\n                });\n            } else {\n                var moduleError = new Error(\"Cannot find module '\" + x + \"' from '\" + parent + \"'\");\n                moduleError.code = 'MODULE_NOT_FOUND';\n                cb(moduleError);\n            }\n        });\n    }\n\n    function loadAsFile(x, thePackage, callback) {\n        var loadAsFilePackage = thePackage;\n        var cb = callback;\n        if (typeof loadAsFilePackage === 'function') {\n            cb = loadAsFilePackage;\n            loadAsFilePackage = undefined;\n        }\n\n        var exts = [''].concat(extensions);\n        load(exts, x, loadAsFilePackage);\n\n        function load(exts, x, loadPackage) {\n            if (exts.length === 0) return cb(null, undefined, loadPackage);\n            var file = x + exts[0];\n\n            var pkg = loadPackage;\n            if (pkg) onpkg(null, pkg);\n            else loadpkg(path.dirname(file), onpkg);\n\n            function onpkg(err, pkg_, dir) {\n                pkg = pkg_;\n                if (err) return cb(err);\n                if (dir && pkg && opts.pathFilter) {\n                    var rfile = path.relative(dir, file);\n                    var rel = rfile.slice(0, rfile.length - exts[0].length);\n                    var r = opts.pathFilter(pkg, x, rel);\n                    if (r) return load(\n                        [''].concat(extensions.slice()),\n                        path.resolve(dir, r),\n                        pkg\n                    );\n                }\n                isFile(file, onex);\n            }\n            function onex(err, ex) {\n                if (err) return cb(err);\n                if (ex) return cb(null, file, pkg);\n                load(exts.slice(1), x, pkg);\n            }\n        }\n    }\n\n    function loadpkg(dir, cb) {\n        if (dir === '' || dir === '/') return cb(null);\n        if (process.platform === 'win32' && (/^\\w:[/\\\\]*$/).test(dir)) {\n            return cb(null);\n        }\n        if ((/[/\\\\]node_modules[/\\\\]*$/).test(dir)) return cb(null);\n\n        maybeUnwrapSymlink(dir, opts, function (unwrapErr, pkgdir) {\n            if (unwrapErr) return loadpkg(path.dirname(dir), cb);\n            var pkgfile = path.join(pkgdir, 'package.json');\n            isFile(pkgfile, function (err, ex) {\n                // on err, ex is false\n                if (!ex) return loadpkg(path.dirname(dir), cb);\n\n                readFile(pkgfile, function (err, body) {\n                    if (err) cb(err);\n                    try { var pkg = JSON.parse(body); } catch (jsonErr) {}\n\n                    if (pkg && opts.packageFilter) {\n                        pkg = opts.packageFilter(pkg, pkgfile);\n                    }\n                    cb(null, pkg, dir);\n                });\n            });\n        });\n    }\n\n    function loadAsDirectory(x, loadAsDirectoryPackage, callback) {\n        var cb = callback;\n        var fpkg = loadAsDirectoryPackage;\n        if (typeof fpkg === 'function') {\n            cb = fpkg;\n            fpkg = opts.package;\n        }\n\n        maybeUnwrapSymlink(x, opts, function (unwrapErr, pkgdir) {\n            if (unwrapErr) return cb(unwrapErr);\n            var pkgfile = path.join(pkgdir, 'package.json');\n            isFile(pkgfile, function (err, ex) {\n                if (err) return cb(err);\n                if (!ex) return loadAsFile(path.join(x, 'index'), fpkg, cb);\n\n                readFile(pkgfile, function (err, body) {\n                    if (err) return cb(err);\n                    try {\n                        var pkg = JSON.parse(body);\n                    } catch (jsonErr) {}\n\n                    if (pkg && opts.packageFilter) {\n                        pkg = opts.packageFilter(pkg, pkgfile);\n                    }\n\n                    if (pkg && pkg.main) {\n                        if (typeof pkg.main !== 'string') {\n                            var mainError = new TypeError('package ' + pkg.name + ' `main` must be a string');\n                            mainError.code = 'INVALID_PACKAGE_MAIN';\n                            return cb(mainError);\n                        }\n                        if (pkg.main === '.' || pkg.main === './') {\n                            pkg.main = 'index';\n                        }\n                        loadAsFile(path.resolve(x, pkg.main), pkg, function (err, m, pkg) {\n                            if (err) return cb(err);\n                            if (m) return cb(null, m, pkg);\n                            if (!pkg) return loadAsFile(path.join(x, 'index'), pkg, cb);\n\n                            var dir = path.resolve(x, pkg.main);\n                            loadAsDirectory(dir, pkg, function (err, n, pkg) {\n                                if (err) return cb(err);\n                                if (n) return cb(null, n, pkg);\n                                loadAsFile(path.join(x, 'index'), pkg, cb);\n                            });\n                        });\n                        return;\n                    }\n\n                    loadAsFile(path.join(x, '/index'), pkg, cb);\n                });\n            });\n        });\n    }\n\n    function processDirs(cb, dirs) {\n        if (dirs.length === 0) return cb(null, undefined);\n        var dir = dirs[0];\n\n        isDirectory(path.dirname(dir), isdir);\n\n        function isdir(err, isdir) {\n            if (err) return cb(err);\n            if (!isdir) return processDirs(cb, dirs.slice(1));\n            loadAsFile(dir, opts.package, onfile);\n        }\n\n        function onfile(err, m, pkg) {\n            if (err) return cb(err);\n            if (m) return cb(null, m, pkg);\n            loadAsDirectory(dir, opts.package, ondir);\n        }\n\n        function ondir(err, n, pkg) {\n            if (err) return cb(err);\n            if (n) return cb(null, n, pkg);\n            processDirs(cb, dirs.slice(1));\n        }\n    }\n    function loadNodeModules(x, start, cb) {\n        var thunk = function () { return getPackageCandidates(x, start, opts); };\n        processDirs(\n            cb,\n            packageIterator ? packageIterator(x, start, thunk, opts) : thunk()\n        );\n    }\n};\n","'use strict';\n\nvar isWindows = process.platform === 'win32';\n\n// Regex to split a windows path into three parts: [*, device, slash,\n// tail] windows-only\nvar splitDeviceRe =\n    /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\n// Regex to split the tail part of the above into [*, dir, basename, ext]\nvar splitTailRe =\n    /^([\\s\\S]*?)((?:\\.{1,2}|[^\\\\\\/]+?|)(\\.[^.\\/\\\\]*|))(?:[\\\\\\/]*)$/;\n\nvar win32 = {};\n\n// Function to split a filename into [root, dir, basename, ext]\nfunction win32SplitPath(filename) {\n  // Separate device+slash from tail\n  var result = splitDeviceRe.exec(filename),\n      device = (result[1] || '') + (result[2] || ''),\n      tail = result[3] || '';\n  // Split the tail into dir, basename and extension\n  var result2 = splitTailRe.exec(tail),\n      dir = result2[1],\n      basename = result2[2],\n      ext = result2[3];\n  return [device, dir, basename, ext];\n}\n\nwin32.parse = function(pathString) {\n  if (typeof pathString !== 'string') {\n    throw new TypeError(\n        \"Parameter 'pathString' must be a string, not \" + typeof pathString\n    );\n  }\n  var allParts = win32SplitPath(pathString);\n  if (!allParts || allParts.length !== 4) {\n    throw new TypeError(\"Invalid path '\" + pathString + \"'\");\n  }\n  return {\n    root: allParts[0],\n    dir: allParts[0] + allParts[1].slice(0, -1),\n    base: allParts[2],\n    ext: allParts[3],\n    name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\n  };\n};\n\n\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar posix = {};\n\n\nfunction posixSplitPath(filename) {\n  return splitPathRe.exec(filename).slice(1);\n}\n\n\nposix.parse = function(pathString) {\n  if (typeof pathString !== 'string') {\n    throw new TypeError(\n        \"Parameter 'pathString' must be a string, not \" + typeof pathString\n    );\n  }\n  var allParts = posixSplitPath(pathString);\n  if (!allParts || allParts.length !== 4) {\n    throw new TypeError(\"Invalid path '\" + pathString + \"'\");\n  }\n  allParts[1] = allParts[1] || '';\n  allParts[2] = allParts[2] || '';\n  allParts[3] = allParts[3] || '';\n\n  return {\n    root: allParts[0],\n    dir: allParts[0] + allParts[1].slice(0, -1),\n    base: allParts[2],\n    ext: allParts[3],\n    name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\n  };\n};\n\n\nif (isWindows)\n  module.exports = win32.parse;\nelse /* posix */\n  module.exports = posix.parse;\n\nmodule.exports.posix = posix.parse;\nmodule.exports.win32 = win32.parse;\n","var isCore = require('./is-core');\nvar fs = require('fs');\nvar path = require('path');\nvar caller = require('./caller.js');\nvar nodeModulesPaths = require('./node-modules-paths.js');\nvar normalizeOptions = require('./normalize-options.js');\n\nvar defaultIsFile = function isFile(file) {\n    try {\n        var stat = fs.statSync(file);\n    } catch (e) {\n        if (e && (e.code === 'ENOENT' || e.code === 'ENOTDIR')) return false;\n        throw e;\n    }\n    return stat.isFile() || stat.isFIFO();\n};\n\nvar defaultIsDir = function isDirectory(dir) {\n    try {\n        var stat = fs.statSync(dir);\n    } catch (e) {\n        if (e && (e.code === 'ENOENT' || e.code === 'ENOTDIR')) return false;\n        throw e;\n    }\n    return stat.isDirectory();\n};\n\nvar maybeUnwrapSymlink = function maybeUnwrapSymlink(x, opts) {\n    if (opts && opts.preserveSymlinks === false) {\n        try {\n            return fs.realpathSync(x);\n        } catch (realPathErr) {\n            if (realPathErr.code !== 'ENOENT') {\n                throw realPathErr;\n            }\n        }\n    }\n    return x;\n};\n\nvar getPackageCandidates = function getPackageCandidates(x, start, opts) {\n    var dirs = nodeModulesPaths(start, opts, x);\n    for (var i = 0; i < dirs.length; i++) {\n        dirs[i] = path.join(dirs[i], x);\n    }\n    return dirs;\n};\n\nmodule.exports = function resolveSync(x, options) {\n    if (typeof x !== 'string') {\n        throw new TypeError('Path must be a string.');\n    }\n    var opts = normalizeOptions(x, options);\n\n    var isFile = opts.isFile || defaultIsFile;\n    var readFileSync = opts.readFileSync || fs.readFileSync;\n    var isDirectory = opts.isDirectory || defaultIsDir;\n    var packageIterator = opts.packageIterator;\n\n    var extensions = opts.extensions || ['.js'];\n    var basedir = opts.basedir || path.dirname(caller());\n    var parent = opts.filename || basedir;\n\n    opts.paths = opts.paths || [];\n\n    // ensure that `basedir` is an absolute path at this point, resolving against the process' current working directory\n    var absoluteStart = maybeUnwrapSymlink(path.resolve(basedir), opts);\n\n    if ((/^(?:\\.\\.?(?:\\/|$)|\\/|([A-Za-z]:)?[/\\\\])/).test(x)) {\n        var res = path.resolve(absoluteStart, x);\n        if (x === '.' || x === '..' || x.slice(-1) === '/') res += '/';\n        var m = loadAsFileSync(res) || loadAsDirectorySync(res);\n        if (m) return maybeUnwrapSymlink(m, opts);\n    } else if (isCore(x)) {\n        return x;\n    } else {\n        var n = loadNodeModulesSync(x, absoluteStart);\n        if (n) return maybeUnwrapSymlink(n, opts);\n    }\n\n    var err = new Error(\"Cannot find module '\" + x + \"' from '\" + parent + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n\n    function loadAsFileSync(x) {\n        var pkg = loadpkg(path.dirname(x));\n\n        if (pkg && pkg.dir && pkg.pkg && opts.pathFilter) {\n            var rfile = path.relative(pkg.dir, x);\n            var r = opts.pathFilter(pkg.pkg, x, rfile);\n            if (r) {\n                x = path.resolve(pkg.dir, r); // eslint-disable-line no-param-reassign\n            }\n        }\n\n        if (isFile(x)) {\n            return x;\n        }\n\n        for (var i = 0; i < extensions.length; i++) {\n            var file = x + extensions[i];\n            if (isFile(file)) {\n                return file;\n            }\n        }\n    }\n\n    function loadpkg(dir) {\n        if (dir === '' || dir === '/') return;\n        if (process.platform === 'win32' && (/^\\w:[/\\\\]*$/).test(dir)) {\n            return;\n        }\n        if ((/[/\\\\]node_modules[/\\\\]*$/).test(dir)) return;\n\n        var pkgfile = path.join(maybeUnwrapSymlink(dir, opts), 'package.json');\n\n        if (!isFile(pkgfile)) {\n            return loadpkg(path.dirname(dir));\n        }\n\n        var body = readFileSync(pkgfile);\n\n        try {\n            var pkg = JSON.parse(body);\n        } catch (jsonErr) {}\n\n        if (pkg && opts.packageFilter) {\n            // v2 will pass pkgfile\n            pkg = opts.packageFilter(pkg, /*pkgfile,*/ dir); // eslint-disable-line spaced-comment\n        }\n\n        return { pkg: pkg, dir: dir };\n    }\n\n    function loadAsDirectorySync(x) {\n        var pkgfile = path.join(maybeUnwrapSymlink(x, opts), '/package.json');\n        if (isFile(pkgfile)) {\n            try {\n                var body = readFileSync(pkgfile, 'UTF8');\n                var pkg = JSON.parse(body);\n            } catch (e) {}\n\n            if (pkg && opts.packageFilter) {\n                // v2 will pass pkgfile\n                pkg = opts.packageFilter(pkg, /*pkgfile,*/ x); // eslint-disable-line spaced-comment\n            }\n\n            if (pkg && pkg.main) {\n                if (typeof pkg.main !== 'string') {\n                    var mainError = new TypeError('package ' + pkg.name + ' `main` must be a string');\n                    mainError.code = 'INVALID_PACKAGE_MAIN';\n                    throw mainError;\n                }\n                if (pkg.main === '.' || pkg.main === './') {\n                    pkg.main = 'index';\n                }\n                try {\n                    var m = loadAsFileSync(path.resolve(x, pkg.main));\n                    if (m) return m;\n                    var n = loadAsDirectorySync(path.resolve(x, pkg.main));\n                    if (n) return n;\n                } catch (e) {}\n            }\n        }\n\n        return loadAsFileSync(path.join(x, '/index'));\n    }\n\n    function loadNodeModulesSync(x, start) {\n        var thunk = function () { return getPackageCandidates(x, start, opts); };\n        var dirs = packageIterator ? packageIterator(x, start, thunk, opts) : thunk();\n\n        for (var i = 0; i < dirs.length; i++) {\n            var dir = dirs[i];\n            if (isDirectory(path.dirname(dir))) {\n                var m = loadAsFileSync(dir);\n                if (m) return m;\n                var n = loadAsDirectorySync(dir);\n                if (n) return n;\n            }\n        }\n    }\n};\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nmodule.exports = {\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: require('./internal/constants').SEMVER_SPEC_VERSION,\n  SemVer: require('./classes/semver'),\n  compareIdentifiers: require('./internal/identifiers').compareIdentifiers,\n  rcompareIdentifiers: require('./internal/identifiers').rcompareIdentifiers,\n  parse: require('./functions/parse'),\n  valid: require('./functions/valid'),\n  clean: require('./functions/clean'),\n  inc: require('./functions/inc'),\n  diff: require('./functions/diff'),\n  major: require('./functions/major'),\n  minor: require('./functions/minor'),\n  patch: require('./functions/patch'),\n  prerelease: require('./functions/prerelease'),\n  compare: require('./functions/compare'),\n  rcompare: require('./functions/rcompare'),\n  compareLoose: require('./functions/compare-loose'),\n  compareBuild: require('./functions/compare-build'),\n  sort: require('./functions/sort'),\n  rsort: require('./functions/rsort'),\n  gt: require('./functions/gt'),\n  lt: require('./functions/lt'),\n  eq: require('./functions/eq'),\n  neq: require('./functions/neq'),\n  gte: require('./functions/gte'),\n  lte: require('./functions/lte'),\n  cmp: require('./functions/cmp'),\n  coerce: require('./functions/coerce'),\n  Comparator: require('./classes/comparator'),\n  Range: require('./classes/range'),\n  satisfies: require('./functions/satisfies'),\n  toComparators: require('./ranges/to-comparators'),\n  maxSatisfying: require('./ranges/max-satisfying'),\n  minSatisfying: require('./ranges/min-satisfying'),\n  minVersion: require('./ranges/min-version'),\n  validRange: require('./ranges/valid'),\n  outside: require('./ranges/outside'),\n  gtr: require('./ranges/gtr'),\n  ltr: require('./ranges/ltr'),\n  intersects: require('./ranges/intersects'),\n}\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier) => {\n  if (typeof (options) === 'string') {\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(version, options).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const parse = require('./parse')\nconst eq = require('./eq')\n\nconst diff = (version1, version2) => {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    const v1 = parse(version1)\n    const v2 = parse(version2)\n    const hasPre = v1.prerelease.length || v2.prerelease.length\n    const prefix = hasPre ? 'pre' : ''\n    const defaultResult = hasPre ? 'prerelease' : ''\n    for (const key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\nmodule.exports = diff\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst {re, t} = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    let next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null)\n    return null\n\n  return parse(`${match[2]}.${match[3] || '0'}.${match[4] || '0'}`, options)\n}\nmodule.exports = coerce\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\nmodule.exports = intersects\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * COPIED FROM: https://github.com/microsoft/vscode-languageserver-node/blob/master/server/src/files.ts\n * ------------------------------------------------------------------------------------------ */\n\nimport { spawnSync, SpawnSyncOptionsWithStringEncoding } from \"child_process\";\nimport * as path from \"path\";\n\nfunction isWindows(): boolean {\n  return process.platform === \"win32\";\n}\n\n/**\n * Resolve the global npm package path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nexport function resolveGlobalNodePath(\n  tracer?: (message: string) => void\n): string | undefined {\n  let npmCommand = \"npm\";\n  const options: SpawnSyncOptionsWithStringEncoding = {\n    encoding: \"utf8\",\n  };\n  if (isWindows()) {\n    npmCommand = \"npm.cmd\";\n    options.shell = true;\n  }\n\n  // tslint:disable-next-line: no-empty\n  const handler = () => {};\n  try {\n    process.on(\"SIGPIPE\", handler);\n    const stdout = spawnSync(npmCommand, [\"config\", \"get\", \"prefix\"], options)\n      .stdout;\n\n    if (!stdout) {\n      if (tracer) {\n        tracer(`'npm config get prefix' didn't return a value.`);\n      }\n      return undefined;\n    }\n    const prefix = stdout.trim();\n    if (tracer) {\n      tracer(`'npm config get prefix' value is: ${prefix}`);\n    }\n\n    if (prefix.length > 0) {\n      if (isWindows()) {\n        return path.join(prefix, \"node_modules\");\n      } else {\n        return path.join(prefix, \"lib\", \"node_modules\");\n      }\n    }\n    return undefined;\n  } catch (err) {\n    return undefined;\n  } finally {\n    process.removeListener(\"SIGPIPE\", handler);\n  }\n}\n\ninterface YarnJsonFormat {\n  type: string;\n  data: string;\n}\n\n/*\n * Resolve the global yarn package path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nexport function resolveGlobalYarnPath(\n  tracer?: (message: string) => void\n): string | undefined {\n  let yarnCommand = \"yarn\";\n  const options: SpawnSyncOptionsWithStringEncoding = {\n    encoding: \"utf8\",\n  };\n\n  if (isWindows()) {\n    yarnCommand = \"yarn.cmd\";\n    options.shell = true;\n  }\n\n  // tslint:disable-next-line: no-empty\n  const handler = () => {};\n  try {\n    process.on(\"SIGPIPE\", handler);\n    const results = spawnSync(\n      yarnCommand,\n      [\"global\", \"dir\", \"--json\"],\n      options\n    );\n\n    const stdout = results.stdout;\n    if (!stdout) {\n      if (tracer) {\n        tracer(`'yarn global dir' didn't return a value.`);\n        if (results.stderr) {\n          tracer(results.stderr);\n        }\n      }\n      return undefined;\n    }\n    const lines = stdout.trim().split(/\\r?\\n/);\n    for (const line of lines) {\n      try {\n        const yarn: YarnJsonFormat = JSON.parse(line);\n        if (yarn.type === \"log\") {\n          return path.join(yarn.data, \"node_modules\");\n        }\n      } catch (e) {\n        // Do nothing. Ignore the line\n      }\n    }\n    return undefined;\n  } catch (err) {\n    return undefined;\n  } finally {\n    process.removeListener(\"SIGPIPE\", handler);\n  }\n}\n","import {\n  window,\n  // tslint:disable-next-line: no-implicit-dependencies\n} from \"vscode\";\nimport { LoggingService } from \"./LoggingService\";\nimport {\n  OUTDATED_PRETTIER_VERSION_MESSAGE,\n  VIEW_LOGS_ACTION_TEXT,\n} from \"./message\";\n\nexport class NotificationService {\n  constructor(private loggingService: LoggingService) {}\n\n  public warnOutdatedPrettierVersion(prettierPath?: string) {\n    window.showErrorMessage(\n      OUTDATED_PRETTIER_VERSION_MESSAGE.replace(\n        \"{{path}}\",\n        prettierPath || \"unknown\"\n      )\n    );\n  }\n\n  public async showErrorMessage(message: string, extraLines?: string[]) {\n    let result: string | undefined;\n    if (extraLines) {\n      const lines = [message];\n      lines.push(...extraLines);\n      result = await window.showErrorMessage(\n        lines.join(\" \"),\n        VIEW_LOGS_ACTION_TEXT\n      );\n    } else {\n      result = await window.showErrorMessage(message, VIEW_LOGS_ACTION_TEXT);\n    }\n    if (result && result === VIEW_LOGS_ACTION_TEXT) {\n      this.loggingService.show();\n    }\n  }\n}\n","import * as prettier from \"prettier\";\nimport {\n  Disposable,\n  DocumentFilter,\n  DocumentSelector,\n  languages,\n  Range,\n  TextDocument,\n  TextEdit,\n  workspace,\n  // tslint:disable-next-line: no-implicit-dependencies\n} from \"vscode\";\nimport { ConfigResolver, RangeFormattingOptions } from \"./ConfigResolver\";\nimport { IgnorerResolver } from \"./IgnorerResolver\";\nimport { LanguageResolver } from \"./LanguageResolver\";\nimport { LoggingService } from \"./LoggingService\";\nimport { INVALID_PRETTIER_CONFIG } from \"./message\";\nimport { ModuleResolver } from \"./ModuleResolver\";\nimport { NotificationService } from \"./NotificationService\";\nimport { PrettierEditProvider } from \"./PrettierEditProvider\";\nimport { FormattingResult, StatusBarService } from \"./StatusBarService\";\nimport {\n  IPrettierStylelint,\n  PrettierEslintFormat,\n  PrettierTslintFormat,\n} from \"./types\";\nimport { getConfig, getWorkspaceRelativePath } from \"./util\";\n\ninterface ISelectors {\n  rangeLanguageSelector: DocumentSelector;\n  languageSelector: DocumentSelector;\n}\n\n/**\n * Prettier reads configuration from files\n */\nconst PRETTIER_CONFIG_FILES = [\n  \".prettierrc\",\n  \".prettierrc.json\",\n  \".prettierrc.yaml\",\n  \".prettierrc.yml\",\n  \".prettierrc.js\",\n  \"package.json\",\n  \"prettier.config.js\",\n  \".editorconfig\",\n];\n\nexport default class PrettierEditService implements Disposable {\n  private formatterHandler: undefined | Disposable;\n  private rangeFormatterHandler: undefined | Disposable;\n\n  constructor(\n    private moduleResolver: ModuleResolver,\n    private languageResolver: LanguageResolver,\n    private ignoreResolver: IgnorerResolver,\n    private configResolver: ConfigResolver,\n    private loggingService: LoggingService,\n    private notificationService: NotificationService,\n    private statusBarService: StatusBarService\n  ) {}\n\n  public registerDisposables(): Disposable[] {\n    const packageWatcher = workspace.createFileSystemWatcher(\"**/package.json\");\n    packageWatcher.onDidChange(this.registerFormatter);\n    packageWatcher.onDidCreate(this.registerFormatter);\n    packageWatcher.onDidDelete(this.registerFormatter);\n\n    const configurationWatcher = workspace.onDidChangeConfiguration((event) => {\n      if (event.affectsConfiguration(\"prettier\")) {\n        this.registerFormatter();\n      }\n    });\n\n    const workspaceWatcher = workspace.onDidChangeWorkspaceFolders(\n      this.registerFormatter\n    );\n\n    const prettierConfigWatcher = workspace.createFileSystemWatcher(\n      `**/{${PRETTIER_CONFIG_FILES.join(\",\")}}`\n    );\n    prettierConfigWatcher.onDidChange(this.registerFormatter);\n    prettierConfigWatcher.onDidCreate(this.registerFormatter);\n    prettierConfigWatcher.onDidDelete(this.registerFormatter);\n\n    return [\n      packageWatcher,\n      configurationWatcher,\n      workspaceWatcher,\n      prettierConfigWatcher,\n    ];\n  }\n\n  public registerFormatter = () => {\n    this.dispose();\n    const { languageSelector, rangeLanguageSelector } = this.selectors();\n    const editProvider = new PrettierEditProvider(this.provideEdits);\n    this.rangeFormatterHandler = languages.registerDocumentRangeFormattingEditProvider(\n      rangeLanguageSelector,\n      editProvider\n    );\n    this.formatterHandler = languages.registerDocumentFormattingEditProvider(\n      languageSelector,\n      editProvider\n    );\n  };\n\n  public dispose = () => {\n    this.moduleResolver.dispose();\n    this.formatterHandler?.dispose();\n    this.rangeFormatterHandler?.dispose();\n    this.formatterHandler = undefined;\n    this.rangeFormatterHandler = undefined;\n  };\n\n  /**\n   * Build formatter selectors\n   */\n  private selectors = (): ISelectors => {\n    const { disableLanguages } = getConfig();\n\n    let allLanguages: string[];\n    if (workspace.workspaceFolders === undefined) {\n      allLanguages = this.languageResolver.allEnabledLanguages();\n    } else {\n      allLanguages = [];\n      for (const folder of workspace.workspaceFolders) {\n        const allWorkspaceLanguages = this.languageResolver.allEnabledLanguages(\n          folder.uri.fsPath\n        );\n        allWorkspaceLanguages.forEach((lang) => {\n          if (!allLanguages.includes(lang)) {\n            allLanguages.push(lang);\n          }\n        });\n      }\n    }\n\n    this.loggingService.logInfo(\n      \"Enabling prettier for languages\",\n      allLanguages.sort()\n    );\n\n    const allRangeLanguages = this.languageResolver.rangeSupportedLanguages();\n    this.loggingService.logInfo(\n      \"Enabling prettier for range supported languages\",\n      allRangeLanguages.sort()\n    );\n\n    const globalLanguageSelector = allLanguages.filter(\n      (l) => !disableLanguages.includes(l)\n    );\n    const globalRangeLanguageSelector = allRangeLanguages.filter(\n      (l) => !disableLanguages.includes(l)\n    );\n    if (workspace.workspaceFolders === undefined) {\n      // no workspace opened\n      return {\n        languageSelector: globalLanguageSelector,\n        rangeLanguageSelector: globalRangeLanguageSelector,\n      };\n    }\n\n    // at least 1 workspace\n    const untitledLanguageSelector: DocumentFilter[] = globalLanguageSelector.map(\n      (l) => ({ language: l, scheme: \"untitled\" })\n    );\n    const untitledRangeLanguageSelector: DocumentFilter[] = globalRangeLanguageSelector.map(\n      (l) => ({ language: l, scheme: \"untitled\" })\n    );\n    const fileLanguageSelector: DocumentFilter[] = globalLanguageSelector.map(\n      (l) => ({ language: l, scheme: \"file\" })\n    );\n    const fileRangeLanguageSelector: DocumentFilter[] = globalRangeLanguageSelector.map(\n      (l) => ({ language: l, scheme: \"file\" })\n    );\n    return {\n      languageSelector: untitledLanguageSelector.concat(fileLanguageSelector),\n      rangeLanguageSelector: untitledRangeLanguageSelector.concat(\n        fileRangeLanguageSelector\n      ),\n    };\n  };\n\n  private provideEdits = async (\n    document: TextDocument,\n    options?: RangeFormattingOptions\n  ): Promise<TextEdit[]> => {\n    const hrStart = process.hrtime();\n    const result = await this.format(document.getText(), document, options);\n    if (!result) {\n      // No edits happened, return never so VS Code can try other formatters\n      return [];\n    }\n    const hrEnd = process.hrtime(hrStart);\n    this.loggingService.logInfo(\n      `Formatting completed in ${hrEnd[1] / 1000000}ms.`\n    );\n    return [TextEdit.replace(this.fullDocumentRange(document), result)];\n  };\n\n  /**\n   * Format the given text with user's configuration.\n   * @param text Text to format\n   * @param path formatting file's path\n   * @returns {string} formatted text\n   */\n  private async format(\n    text: string,\n    { fileName, languageId, uri, isUntitled }: TextDocument,\n    rangeFormattingOptions?: RangeFormattingOptions\n  ): Promise<string | undefined> {\n    this.loggingService.logInfo(`Formatting ${fileName}`);\n\n    const vscodeConfig = getConfig(uri);\n\n    // This has to stay, as it allows to skip in sub workspaceFolders. Sadly noop.\n    // wf1  (with \"lang\") -> glob: \"wf1/**\"\n    // wf1/wf2  (without \"lang\") -> match \"wf1/**\"\n    if (vscodeConfig.disableLanguages.includes(languageId)) {\n      this.statusBarService.updateStatusBar(FormattingResult.Ignore);\n      return;\n    }\n\n    try {\n      const hasConfig = await this.configResolver.checkHasPrettierConfig(\n        fileName\n      );\n\n      if (!isUntitled && !hasConfig && vscodeConfig.requireConfig) {\n        this.loggingService.logInfo(\n          \"Require config set to true and no config present. Skipping file.\"\n        );\n        this.statusBarService.updateStatusBar(FormattingResult.Ignore);\n        return;\n      }\n    } catch (error) {\n      this.loggingService.logError(\n        \"Invalid prettier configuration file detected.\",\n        error\n      );\n      this.notificationService.showErrorMessage(INVALID_PRETTIER_CONFIG);\n      this.statusBarService.updateStatusBar(FormattingResult.Error);\n      return;\n    }\n\n    const ignorePath = this.ignoreResolver.getIgnorePath(fileName);\n\n    const prettierInstance = this.moduleResolver.getPrettierInstance(fileName, {\n      showNotifications: true,\n    });\n\n    let fileInfo: prettier.FileInfoResult | undefined;\n    if (fileName) {\n      fileInfo = await prettierInstance.getFileInfo(fileName, {\n        ignorePath,\n        resolveConfig: true, // Fix for 1.19 (https://prettier.io/blog/2019/11/09/1.19.0.html#api)\n        withNodeModules: vscodeConfig.withNodeModules\n      });\n      this.loggingService.logInfo(\"File Info:\", fileInfo);\n    }\n\n    if (fileInfo && fileInfo.ignored) {\n      this.loggingService.logInfo(\"File is ignored, skipping.\");\n      this.statusBarService.updateStatusBar(FormattingResult.Ignore);\n      return;\n    }\n\n    let parser: prettier.BuiltInParserName | string | undefined;\n    if (fileInfo && fileInfo.inferredParser) {\n      parser = fileInfo.inferredParser;\n    } else {\n      this.loggingService.logWarning(\n        \"Parser not inferred, using VS Code language.\"\n      );\n      const dynamicParsers = this.languageResolver.getParsersFromLanguageId(\n        uri,\n        languageId\n      );\n      if (dynamicParsers.length > 0) {\n        parser = dynamicParsers[0];\n        this.loggingService.logInfo(`Resolved parser to '${parser}'`);\n      }\n    }\n\n    if (!parser) {\n      this.loggingService.logError(\n        `Failed to resolve a parser, skipping file.`\n      );\n      this.statusBarService.updateStatusBar(FormattingResult.Error);\n      return;\n    }\n\n    const {\n      options: prettierOptions,\n      error,\n    } = await this.configResolver.getPrettierOptions(\n      fileName,\n      parser as prettier.BuiltInParserName,\n      vscodeConfig,\n      {\n        config: vscodeConfig.configPath\n          ? getWorkspaceRelativePath(fileName, vscodeConfig.configPath)\n          : undefined,\n        editorconfig: vscodeConfig.useEditorConfig,\n      },\n      rangeFormattingOptions\n    );\n\n    if (error) {\n      this.loggingService.logError(\n        `Error resolving prettier configuration for ${fileName}`,\n        error\n      );\n      this.statusBarService.updateStatusBar(FormattingResult.Error);\n      return;\n    }\n\n    this.loggingService.logInfo(\"Prettier Options:\", prettierOptions);\n\n    if (parser === \"typescript\") {\n      const prettierTslintModule = this.moduleResolver.getModuleInstance(\n        fileName,\n        \"prettier-tslint\"\n      );\n\n      if (prettierTslintModule) {\n        this.loggingService.logInfo(\"Formatting using 'prettier-tslint'\");\n        return this.safeExecution(() => {\n          const prettierTslintFormat = prettierTslintModule.format as PrettierTslintFormat;\n\n          return prettierTslintFormat({\n            fallbackPrettierOptions: prettierOptions,\n            filePath: fileName,\n            text,\n          });\n        }, text);\n      }\n    }\n\n    if (this.languageResolver.doesLanguageSupportESLint(languageId)) {\n      const prettierEslintModule = this.moduleResolver.getModuleInstance(\n        fileName,\n        \"prettier-eslint\"\n      );\n      if (prettierEslintModule) {\n        this.loggingService.logInfo(\"Formatting using 'prettier-eslint'\");\n        return this.safeExecution(() => {\n          const prettierEslintFormat = prettierEslintModule as PrettierEslintFormat;\n\n          return prettierEslintFormat({\n            fallbackPrettierOptions: prettierOptions,\n            filePath: fileName,\n            text,\n          });\n        }, text);\n      }\n    }\n\n    if (this.languageResolver.doesParserSupportStylelint(parser)) {\n      const prettierStylelintModule = this.moduleResolver.getModuleInstance(\n        fileName,\n        \"prettier-stylelint\"\n      );\n      if (prettierStylelintModule) {\n        this.loggingService.logInfo(\"Formatting using 'prettier-stylelint'\");\n        const prettierStylelint = prettierStylelintModule as IPrettierStylelint;\n        return this.safeExecution(\n          prettierStylelint.format({\n            filePath: fileName,\n            prettierOptions,\n            text,\n          }),\n          text\n        );\n      }\n    }\n\n    return this.safeExecution(\n      () => prettierInstance.format(text, prettierOptions),\n      text\n    );\n  }\n\n  /**\n   * Execute a callback safely, if it doesn't work, return default and log messages.\n   *\n   * @param cb The function to be executed,\n   * @param defaultText The default value if execution of the cb failed\n   * @param fileName The filename of the current document\n   * @returns {string} formatted text or defaultText\n   */\n  private safeExecution(\n    cb: (() => string) | Promise<string>,\n    defaultText: string\n  ): string | Promise<string> {\n    if (cb instanceof Promise) {\n      return cb\n        .then((returnValue) => {\n          this.statusBarService.updateStatusBar(FormattingResult.Success);\n\n          return returnValue;\n        })\n        .catch((error: Error) => {\n          this.loggingService.logError(\"Error formatting document.\", error);\n          this.statusBarService.updateStatusBar(FormattingResult.Error);\n\n          return defaultText;\n        });\n    }\n    try {\n      const returnValue = cb();\n      this.statusBarService.updateStatusBar(FormattingResult.Success);\n\n      return returnValue;\n    } catch (error) {\n      this.loggingService.logError(\"Error formatting document.\", error);\n      this.statusBarService.updateStatusBar(FormattingResult.Error);\n\n      return defaultText;\n    }\n  }\n\n  private fullDocumentRange(document: TextDocument): Range {\n    const lastLineId = document.lineCount - 1;\n    return new Range(0, 0, lastLineId, document.lineAt(lastLineId).text.length);\n  }\n}\n","import {\n  CancellationToken,\n  DocumentFormattingEditProvider,\n  DocumentRangeFormattingEditProvider,\n  FormattingOptions,\n  Range,\n  TextDocument,\n  TextEdit,\n  // tslint:disable-next-line: no-implicit-dependencies\n} from \"vscode\";\n\nimport { RangeFormattingOptions } from \"./ConfigResolver\";\n\nexport class PrettierEditProvider\n  implements\n    DocumentRangeFormattingEditProvider,\n    DocumentFormattingEditProvider {\n  constructor(\n    private provideEdits: (\n      document: TextDocument,\n      options?: RangeFormattingOptions\n    ) => Promise<TextEdit[]>\n  ) {}\n\n  public async provideDocumentRangeFormattingEdits(\n    document: TextDocument,\n    range: Range,\n    options: FormattingOptions,\n    token: CancellationToken\n  ): Promise<TextEdit[]> {\n    return this.provideEdits(document, {\n      rangeEnd: document.offsetAt(range.end),\n      rangeStart: document.offsetAt(range.start),\n    });\n  }\n\n  public async provideDocumentFormattingEdits(\n    document: TextDocument,\n    options: FormattingOptions,\n    token: CancellationToken\n  ): Promise<TextEdit[]> {\n    return this.provideEdits(document);\n  }\n}\n","import { writeFile } from \"fs\";\nimport * as path from \"path\";\nimport { format, Options } from \"prettier\";\nimport { promisify } from \"util\";\n// tslint:disable-next-line: no-implicit-dependencies\nimport { Uri } from \"vscode\";\nimport { LoggingService } from \"./LoggingService\";\n\nconst writeFileAsync: (\n  filePath: string,\n  data: string,\n  encoding: \"utf8\"\n) => Promise<void> = promisify(writeFile);\n\nexport class TemplateService {\n  constructor(private loggingService: LoggingService) {}\n  public async writeConfigFile(folderPath: Uri, options?: Map<string, any>) {\n    const settings = { tabWidth: 2, useTabs: false };\n\n    const outputPath = path.join(folderPath.fsPath, \".prettierrc\");\n\n    const formatterOptions: Options = {\n      /* cspell: disable-next-line */\n      filepath: outputPath,\n      tabWidth: settings.tabWidth,\n      useTabs: settings.useTabs,\n    };\n\n    const templateSource = format(\n      JSON.stringify(settings, null, 2),\n      formatterOptions\n    );\n\n    this.loggingService.logInfo(`Writing .prettierrc to '${outputPath}'`);\n    await writeFileAsync(outputPath, templateSource, \"utf8\");\n  }\n}\n"],"sourceRoot":""}