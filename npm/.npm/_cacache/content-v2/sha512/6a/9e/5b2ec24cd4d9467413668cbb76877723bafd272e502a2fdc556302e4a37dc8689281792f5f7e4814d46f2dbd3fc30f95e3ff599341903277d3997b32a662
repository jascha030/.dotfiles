{"maintainers":[{"name":"mibrito707","email":"mibrito@mibrito.com"}],"keywords":["cordova","security","encryption","storage","secure","ecosystem:cordova","cordova-android","cordova-ios","cordova-wp8","cordova-windows","cordova-browser"],"dist-tags":{"latest":"5.0.1"},"author":{"name":"Yiorgis Gozadinos","email":"ggozad@crypho.com"},"_rev":"102","description":"Secure storage plugin for iOS & Android","readme":"# SecureStorage plugin for Apache Cordova\n\n[![NPM](https://nodei.co/npm/cordova-plugin-secure-storage-echo.png?mini=true)](https://nodei.co/npm/cordova-plugin-secure-storage-echo/)\n\n##### Forked from [Crypho/cordova-plugin-secure-storage](https://github.com/Crypho/cordova-plugin-secure-storage) in a effort to keep that project alive. Thank you @ggozad.\n\n## Introduction\n\nThis plugin is for use with [Apache Cordova](http://cordova.apache.org/) and allows your application to securely store secrets\nsuch as usernames, passwords, tokens, certificates or other sensitive information (strings) on iOS & Android phones and Windows devices.\n\n### Supported platforms\n\n- Android\n- iOS\n- Windows (Windows 8.x/Store, Windows 10/UWP and Windows Phone 8.1+)\n\n### Contents\n\n- [Installation](#installation)\n- [Plugin API](#plugin-api)\n- [LICENSE](#license)\n\n## <a name=\"installation\"></a>Installation\n\nBelow are the methods for installing this plugin automatically using command line tools. For additional info, take a look at the [Plugman Documentation](https://cordova.apache.org/docs/en/latest/plugin_ref/plugman.html), [`cordova plugin` command](https://cordova.apache.org/docs/en/latest/reference/cordova-cli/index.html#cordova-plugin-command) and [Cordova Plugin Specification](https://cordova.apache.org/docs/en/latest/plugin_ref/spec.html).\n\n### Cordova\n\nThe plugin can be installed via the Cordova command line interface:\n\n- Navigate to the root folder for your phonegap project.\n- Run the command:\n\n```sh\ncordova plugin add cordova-plugin-secure-storage-echo\n```\n\n## <a name=\"plugin_api\"></a> Plugin API\n\n#### Create a namespaced storage.\n\n```js\nvar ss = new cordova.plugins.SecureStorage(\n  function() {\n    console.log(\"Success\");\n  },\n  function(error) {\n    console.log(\"Error \" + error);\n  },\n  \"my_app\"\n);\n```\n\n#### Set a key/value in the storage.\n\n```js\nss.set(\n  function(key) {\n    console.log(\"Set \" + key);\n  },\n  function(error) {\n    console.log(\"Error \" + error);\n  },\n  \"mykey\",\n  \"myvalue\"\n);\n```\n\nwhere `key` and `value` are both strings.\n\n#### Get a key's value from the storage.\n\n```js\nss.get(\n  function(value) {\n    console.log(\"Success, got \" + value);\n  },\n  function(error) {\n    console.log(\"Error \" + error);\n  },\n  \"mykey\"\n);\n```\n\n#### Remove a key from the storage.\n\n```js\nss.remove(\n  function(key) {\n    console.log(\"Removed \" + key);\n  },\n  function(error) {\n    console.log(\"Error, \" + error);\n  },\n  \"mykey\"\n);\n```\n\n#### Get all keys from the storage.\n\n```js\nss.keys(\n  function(keys) {\n    console.log(\"Got keys \" + keys.join(\", \"));\n  },\n  function(error) {\n    console.log(\"Error, \" + error);\n  }\n);\n```\n\n#### Clear all keys from the storage.\n\n```js\nss.clear(\n  function() {\n    console.log(\"Cleared\");\n  },\n  function(error) {\n    console.log(\"Error, \" + error);\n  }\n);\n```\n\n## Platform details\n\n#### iOS\n\nOn iOS secrets are stored directly in the KeyChain through the [SAMKeychain](https://github.com/soffes/samkeychain) library.\n\n##### Configuration\n\nOn iOS it is possible to configure the accessibility of the keychain by setting the `KeychainAccessibility` preference in the `config.xml` to one of the following strings:\n\n- AfterFirstUnlock\n- AfterFirstUnlockThisDeviceOnly\n- WhenUnlocked (default)\n- WhenUnlockedThisDeviceOnly\n- WhenPasscodeSetThisDeviceOnly (this option is available only on iOS8 and later)\n\nFor reference what these settings mean, see [Keychain Item Accessibility Constants](https://developer.apple.com/reference/security/keychain_services/keychain_item_accessibility_constants).\n\nFor example, include in your `config.xml` the following:\n\n```xml\n    <platform name=\"ios\">\n        <preference name=\"KeychainAccessibility\" value=\"WhenUnlocked\"/>\n    </platform>\n```\n\n#### iOS 7 Support\n\niOS 7 is supported without `WhenPasscodeSetThisDeviceOnly` option.\n\nHow to test the plugin using iOS 7 simulator:\n\n- Download and install Xcode 6 into a separate folder, e.g. /Application/Xcode 6/\n- Run `$ xcode-select --switch <path to Xcode6>/Contents/Developer`\n- Build Cordova app with the plugin and run it in iOS 7 simulator\n\n#### Android\n\nOn Android there does not exist an equivalent of the iOS KeyChain. The `SecureStorage` API is implemented as follows:\n\n- A random 256-bit AES key is generated.\n- The AES key encrypts the value.\n- The AES key is encrypted with a device-generated RSA (RSA/ECB/PKCS1Padding) from the Android KeyStore.\n- The combination of the encrypted AES key and value are stored in `SharedPreferences`.\n\nThe inverse process is followed on `get`.\n\nNative AES is used.\nMinimum android supported version is 5.0 Lollipop. If you need to support earlier Android versions use version 2.6.8.\n\n##### Android Init Options.\n- `packageName` - See [Sharing data between 2 apps on Android](#sharing-data-android)\n- `userAuthenticationValidityDuration` - Sets the duration of time (seconds) for which the Private Encryption Key is authorized to be used after the user is successfully authenticated. [KeyGenParameterSpec.Builder#setUserAuthenticationValidityDurationSeconds(int)](https://developer.android.com/reference/android/security/keystore/KeyGenParameterSpec.Builder.html#setUserAuthenticationValidityDurationSeconds(int))\n- `unlockCredentialsTitle` - Custom title for Confirm Credentials screen. See [KeyguardManager#createConfirmDeviceCredentialIntent(title, description)](https://developer.android.com/reference/android/app/KeyguardManager.html#createConfirmDeviceCredentialIntent(java.lang.CharSequence,%20java.lang.CharSequence))\n- `unlockCredentialsDescription` - Custom description for Confirm Credentials screen.\n\n```js\nvar ss = new cordova.plugins.SecureStorage(\n  function() {\n    console.log(\"Success\");\n  },\n  function(error) {\n    console.log(\"Error \" + error);\n  },\n  \"my_app\",\n  {\n    android: {\n      packageName: \"com.test.app1\"\n    }\n  }\n);\n```\n\n##### Users must have a secure screen-lock set.\n\nThe plugin will only work correctly if the user has sufficiently secure settings on the lock screen. If not, the plugin will fail to initialize and the failure callback will be called on `init()`. This is because in order to use the Android Credential Storage and create RSA keys the device needs to be somewhat secure.\n\nIn case of failure to initialize, the app developer should inform the user about the security requirements of her app and initialize again after the user has changed the screen-lock settings. To facilitate this, we provide `secureDevice` which will bring up the screen-lock settings and will call the success or failure callbacks depending on whether the user locked the screen appropriately.\n\nFor example, this would keep asking the user to enable screen lock forever. Obviously adapt to your needs :)\n\n```js\nvar ss;\nvar _init = function() {\n  ss = new cordova.plugins.SecureStorage(\n    function() {\n      console.log(\"OK\");\n    },\n    function() {\n      navigator.notification.alert(\n        \"Please enable the screen lock on your device. This app cannot operate securely without it.\",\n        function() {\n          ss.secureDevice(\n            function() {\n              _init();\n            },\n            function() {\n              _init();\n            }\n          );\n        },\n        \"Screen lock is disabled\"\n      );\n    },\n    \"my_app\"\n  );\n};\n_init();\n```\n\n##### <a name=\"sharing-data-android\"></a> Sharing data between 2 apps on Android.\n\nThe plugin can be used to share data securely between 2 Android apps.\n\nThis can be done by updating the `config.xml` for both the Android apps with below changes:\n\n1. Add `xmlns:android=\"http://schemas.android.com/apk/res/android\"` in the initial `widget` tag.\n2. Add the below tag in `<platform name=\"android\">`\n\n```xml\n<edit-config file=\"AndroidManifest.xml\" mode=\"merge\" target=\"/manifest\">\n    <manifest android:sharedUserId=\"<your>.<secret>.<anyUserId>\" />\n</edit-config>\n```\n\nThis is required as both the apps should have the same `android:sharedUserId`. For e.g. `android:sharedUserId=\"com.example.myUser\"`.\n\nConsider `App1` with `packageName` as `com.test.app1`.\nData can be set from the `App1` using the below code.\n\n```js\nvar ss = new cordova.plugins.SecureStorage(\n  function() {\n    ss.set(\n      function(res) {\n        console.log(\"Shared key set: \" + res);\n      },\n      function(err) {\n        console.log(\"Error setting shared key: \" + err);\n      },\n      \"sharedKey\",\n      \"sharedValue\"\n    );\n  },\n  function(err) {\n    console.log(\"Error creating SecureStorage: \" + err);\n  },\n  \"my_shared_data\"\n);\n```\n\nConsider `App2` with `packageName` as `com.test.app2`.\nData can be accessed from the `App2` using the `packageName` of `App1` as shown in below code.\n\n```js\nvar ss = new cordova.plugins.SecureStorage(\n  function() {\n    ss.get(\n      function(res) {\n        console.log(\"Got Shared key: \" + res);\n      },\n      function(err) {\n        console.log(\"Error getting shared key: \" + err);\n      },\n      \"sharedKey\"\n    );\n  },\n  function(err) {\n    console.log(\"Error creating SecureStorage: \" + err);\n  },\n  \"my_shared_data\",\n  {\n    android: {\n      packageName: \"com.test.app1\"\n    }\n  }\n);\n```\n\nPlease note that if the 2 apps use different `android:sharedUserId`, the `App2` will fail with an error `Error: Key [sharedKey] not found`.\n\nIf `App1` is uninstalled and `App2` tries to access the `sharedKey` from `App1`, `App2` will fail with an error `Error: Application package com.test.app1 not found`.\n\n##### Android keystore deletion on security setting change\n\nChanging the lock screen type on Android erases the keystore (issues [61989](https://code.google.com/p/android/issues/detail?id=61989) and [210402](https://code.google.com/p/android/issues/detail?id=210402)). This is also described in the [Android Security: The Forgetful Keystore](https://doridori.github.io/android-security-the-forgetful-keystore/) blog post.\n\nThis means that any values saved using the plugin could be lost if the user changes security settings. The plugin should therefore be used as a secure credential cache and not persistent storage on Android.\n\n#### Windows\n\nWindows implementation is based on [PasswordVault](https://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordvault.aspx) object from the [Windows.Security.Credentials](https://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.aspx) namespace.\nThe contents of the locker are specific to the app so different apps and services don't have access to credentials associated with other apps or services.\n\n**Limitations:** you can only store up to ten credentials per app. If you try to store more than ten credentials, you will\nencounter an error. Read [documentation](https://msdn.microsoft.com/en-us/library/windows/apps/hh701231.aspx) for more details.\n\n#### Browser\n\nThe browser platform is supported as a mock only. Key/values are stored unencrypted in localStorage.\n\n## FAQ\n\n- I get the error `cordova.plugins.SecureStorage is not a function`, what gives?\n\n  You can instantiate the plugin only after the `deviceready` event is fired. The plugin is not available before that. Also make sure you use the plugin after its success callback has fired.\n\n- Do my users really need to set a PIN code on their android devices to use the plugin?\n\n  Yes, sorry. Android will not allow the creation of cryptographic keys unless the user has enabled at least PIN locking on the device.\n\n## Testing\n\n### Setup\n\n1. Create a cordova app.\n2. Change the start page in config.xml with `<content src=\"cdvtests/index.html\" />`\n3. Add your platforms.\n4. Add the `cordova-plugin-test-framework` plugin:\n\n```\ncordova plugin add cordova-plugin-test-framework\n```\n\n5. Finally add the secure storage plugin as well as the tests from its location\n\n```\ncordova plugin add PATH_TO_SECURE_STORAGE_PLUGIN\ncordova plugin add PATH_TO_SECURE_STORAGE_PLUGIN/tests\n```\n\n### Running the tests\n\nJust run the app for all platforms. Remember, if you have changes to test you will need to remove the secure storage plugin and add it again for the changes to be seen by the app.\n\n## <a name=\"license\"></a> LICENSE\n\n    The MIT License\n\n    Copyright (c) 2015 Crypho AS.\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the \"Software\"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    THE SOFTWARE.\n","repository":{"type":"git","url":"git+https://github.com/mibrito707/cordova-plugin-secure-storage-echo.git"},"bugs":{"url":"https://github.com/mibrito707/cordova-plugin-secure-storage-echo/issues"},"license":"MIT","versions":{"5.0.0":{"name":"cordova-plugin-secure-storage-echo","version":"5.0.0","description":"Secure storage plugin for iOS & Android","author":{"name":"Yiorgis Gozadinos","email":"ggozad@crypho.com"},"contributors":[{"name":"Demetris Manikas","email":"demetris.manikas@gmail.com"},{"name":"Sergey Grebnov","email":"sergei.grebnov@gmail.com"},{"name":"Ajay Ambre","email":"ajayambre88@gmail.com"},{"name":"Maurys Brito","email":"mibrito@mibrito.com"}],"cordova":{"id":"cordova-plugin-secure-storage-echo","platforms":["android","ios","wp8","windows"]},"keywords":["cordova","security","encryption","storage","secure","ecosystem:cordova","cordova-android","cordova-ios","cordova-wp8","cordova-windows","cordova-browser"],"main":"www/securestorage.js","repository":{"type":"git","url":"git+https://github.com/mibrito707/cordova-plugin-secure-storage-echo.git"},"scripts":{"eslint":"eslint www/securestorage.js tests/tests.js"},"devDependencies":{"cordova-plugin-test-framework":">=1.0.0","eslint":""},"license":"MIT","bugs":{"url":"https://github.com/mibrito707/cordova-plugin-secure-storage-echo/issues"},"homepage":"https://github.com/mibrito707/cordova-plugin-secure-storage-echo#readme","gitHead":"371b8bcde194ee494aec7a9874d5838ef866d74a","_id":"cordova-plugin-secure-storage-echo@5.0.0","_nodeVersion":"11.10.1","_npmVersion":"6.7.0","dist":{"integrity":"sha512-LxNKYlCwoqu4wWc0O+uvVpnSn+sgMwNFEeb467KjeqhiKHcp5xnQibFNTnxRVuZPZaJtMld+SvP4Deop3ixXLg==","shasum":"cd6c1cece737a1eff206e5c3b2b84376b579abc7","tarball":"https://nexusrepo.pondevelopment.com/repository/npm-all/cordova-plugin-secure-storage-echo/-/cordova-plugin-secure-storage-echo-5.0.0.tgz","fileCount":23,"unpackedSize":110808,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJdlJhSCRA9TVsSAnZWagAAdlcQAJKle1BPMU2dmGmoPC3N\nGZRVcgaNqlMBpfYoJGZkR1ULnHIxOy8S4IgJC2sC/2lMdm4LyhYMUAZFbMIe\n2yZrgyqu9UdInfNGRDTgGQCnfQ85V4/XPmpzYLz9489aGC1AbU6asOutyRpV\nUwL5Y/cIkPUOwSu+byVeeMNxERODaGxwl0inXPhZWQdq85sqcVjeYHb0YeEV\nX4CZv0H3NiazzWtr3giwx7rgPjJTCyhFEjRTHZLWdAV/i5eclzpDnNg4dsI5\nJG+9mfn3dAoP3JtreBAmk0SjKkx5hoyzZT4338Ly/C4VFTswZWjDqry/XMKj\n1RImwOX/SY/9lhUfybZaI0PptkwzJ2fthU9uLPV4T3qxh/07T2iJDH58BXFb\nqurkJY07nA81lmHOjz8YB+9FZ7Bp1qcN0kumyExSWvfqr6t3VpSUQ/LVnW+K\nWwfRr3Go2NANm3lt2Ztl3aE5+Co7/1Nd7XGRu+niRWgqNqUr+dBI8TDD8Y/1\nz5uFF+Q8PWkg3Iu15DAOrZdjNwNMdD2X1xxBVa01TZxX980pDMWpsN+5vytG\n5O71VbWzYvcrDJgXJfWUtbEM7i0soW03A9F0PAD1uhvrhP7CzLElOlYi04i+\nQhB6IGQVIAo8YUAxHR+oARDRke5JGKZBzoF5y1/McjtBHcylEzv3x5de3CYs\nIGmW\r\n=wOUz\r\n-----END PGP SIGNATURE-----\r\n"},"maintainers":[{"name":"mibrito707","email":"mibrito@mibrito.com"}],"_npmUser":{"name":"mibrito707","email":"mibrito@mibrito.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/cordova-plugin-secure-storage-echo_5.0.0_1570019409354_0.74981564116481"},"_hasShrinkwrap":false},"5.0.1":{"name":"cordova-plugin-secure-storage-echo","version":"5.0.1","description":"Secure storage plugin for iOS & Android","author":{"name":"Yiorgis Gozadinos","email":"ggozad@crypho.com"},"contributors":[{"name":"Demetris Manikas","email":"demetris.manikas@gmail.com"},{"name":"Sergey Grebnov","email":"sergei.grebnov@gmail.com"},{"name":"Ajay Ambre","email":"ajayambre88@gmail.com"},{"name":"Maurys Brito","email":"mibrito@mibrito.com"}],"cordova":{"id":"cordova-plugin-secure-storage-echo","platforms":["android","ios","wp8","windows"]},"keywords":["cordova","security","encryption","storage","secure","ecosystem:cordova","cordova-android","cordova-ios","cordova-wp8","cordova-windows","cordova-browser"],"main":"www/securestorage.js","repository":{"type":"git","url":"git+https://github.com/mibrito707/cordova-plugin-secure-storage-echo.git"},"scripts":{"eslint":"eslint www/securestorage.js tests/tests.js"},"devDependencies":{"cordova-plugin-test-framework":">=1.0.0","eslint":""},"license":"MIT","bugs":{"url":"https://github.com/mibrito707/cordova-plugin-secure-storage-echo/issues"},"homepage":"https://github.com/mibrito707/cordova-plugin-secure-storage-echo#readme","gitHead":"54fc8175680ca7c396aaf3b3d5e7c80f8116bd99","_id":"cordova-plugin-secure-storage-echo@5.0.1","_nodeVersion":"11.6.0","_npmVersion":"6.10.0","dist":{"integrity":"sha512-3oTYEZ14XRQ+G1DgbuQFGeWFMpgEfpWUfR7TxKH8H4PE3tYdcI67ZzaK5yPVEpHZC+vljw4E4VpSys1SvhjIbQ==","shasum":"e120e9118dadcc84df57c7dbd45ef2df123299ab","tarball":"https://nexusrepo.pondevelopment.com/repository/npm-all/cordova-plugin-secure-storage-echo/-/cordova-plugin-secure-storage-echo-5.0.1.tgz","fileCount":26,"unpackedSize":109661,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJd3UR6CRA9TVsSAnZWagAAWasP/RFVLDebUh5xkun6vKLr\nraXkBwR56hpD2CDeoB8tUOf4LXJI1QSvNri5SRZZbMYCBW150LkjGM8c7OoV\nN3qv4tvCtif1N49CDJ/FniB6hR4CvYXk8EqNE2vuwXQixl9Gu2ezoideqeAh\nEaj67w4eDVpwnMGEgB29tFxwRdGi0cqKWI8I//Uql+8kS77XghDQ8+RMrphZ\nu7H4ngV4vrFlp5XDlP/rhBeHJIvpShnmo5xbSZXRtxTfzLxB2JlfxqS19M0m\nKNBTvDMwEq1Um16nXxisig+olEbPxeoN08f9/RGfiaInnitaJcTVgNHcDgMb\n0ObcY2FVvFWFKqY3+6/b6CTQWjDO6oNn2y81qK9vwnEhhUqb47RC7RiJ3zue\nmgkwW35jpHsJKPdgMczBDF7FfxnuxjAw/8hxCUAUU5Ns/hZOjK/mIKceFryK\nnEtOSjfVNind0QBGbM1kMp6aMN5AUHG3dVbfbZIJoIsMkLiKZTWgUo69eJEA\nrWz4zpt82pBxNg6MzivFNZQ4HVvJCgVyNspVhsvj41mMoAiceNKPrhJ2MxBX\nBQ6dM3PlYeUgFYnNqY7e1+VPaHYwq2rkz6/K2DpyHmQJ33wdrbkO8K8jZrN+\nE11CkPQ03YRwXAkJXqGsa8JP5ze3GPvcNUsKZarrILBRXlg1g34oT+4FXPpu\n8gmU\r\n=ZgsR\r\n-----END PGP SIGNATURE-----\r\n"},"maintainers":[{"name":"mibrito707","email":"mibrito@mibrito.com"}],"_npmUser":{"name":"mibrito707","email":"mibrito@mibrito.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/cordova-plugin-secure-storage-echo_5.0.1_1574782074371_0.7238604424858635"},"_hasShrinkwrap":false}},"name":"cordova-plugin-secure-storage-echo","time":{"created":"2019-10-02T12:30:09.354Z","5.0.0":"2019-10-02T12:30:09.522Z","modified":"2020-03-10T13:52:26.638Z","5.0.1":"2019-11-26T15:27:54.549Z"},"contributors":[{"name":"Demetris Manikas","email":"demetris.manikas@gmail.com"},{"name":"Sergey Grebnov","email":"sergei.grebnov@gmail.com"},{"name":"Ajay Ambre","email":"ajayambre88@gmail.com"},{"name":"Maurys Brito","email":"mibrito@mibrito.com"}],"readmeFilename":"README.md","_id":"cordova-plugin-secure-storage-echo","homepage":"https://github.com/mibrito707/cordova-plugin-secure-storage-echo#readme"}